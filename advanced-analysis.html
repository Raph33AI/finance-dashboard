<!DOCTYPE html>
    <html lang='fr'>
    <head>
        <meta charset='UTF-8'>
        <meta name='viewport' content='width=device-width, initial-scale=1.0'>
        <title>Advanced Analysis - Legal Compliant</title>
        
        <!-- Highcharts -->
        <script src='https://code.highcharts.com/stock/highstock.js'></script>
        <script src='https://code.highcharts.com/highcharts-more.js'></script>
        <script src='https://code.highcharts.com/modules/exporting.js'></script>
        
        <!-- Font Awesome -->
        <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css'>
        
        <!-- Styles -->
        <link rel='stylesheet' href='assets/css/common.css'>
        <link rel='stylesheet' href='assets/css/sidebar.css'>
        <link rel="stylesheet" href="assets/css/user-menu.css">
        <link rel="stylesheet" href="assets/css/chatbot-styles.css">
        <link rel='stylesheet' href='assets/css/advanced-analysis.css'>
        
        <!-- ‚úÖ FAVICON DYNAMIQUE -->
        <script src="assets/js/favicon-dynamic.js"></script>

        <!-- Firebase SDK -->
        <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
        <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
        <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
        
        <!-- Configuration Firebase -->
        <script src="assets/js/firebase-config.js"></script>
        
        <!-- Protection de la page (AUTH GUARD) -->
        <script src="assets/js/auth-guard.js"></script>

        <!-- ‚úÖ ACCESS CONTROL -->
        <script src="assets/js/access-control.js"></script>
        
        <!-- ‚úÖ STYLES SIMPLIFI√âS POUR MODALS (ULTRA L√âGERS) -->
        <style>
            /* ============================================
            üé® MODAL STYLES - MINIMALISTES
            ============================================ */
            
            /* Modal Overlay */
            .modal {
                display: none;
                position: fixed;
                z-index: 10000;
                left: 0;
                top: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.5);
                overflow-y: auto;
                padding: 2rem;
            }

            .modal.active {
                display: flex;
                align-items: center;
                justify-content: center;
            }

            /* Modal Content */
            .modal-content {
                background: #ffffff;
                border-radius: 8px;
                max-width: 800px;
                width: 100%;
                max-height: 90vh;
                overflow-y: auto;
                box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
                position: relative;
            }

            body.dark-mode .modal-content {
                background: #1e293b;
                color: #e2e8f0;
            }

            /* Modal Header */
            .modal-header {
                background: #f8fafc;
                padding: 1.5rem 2rem;
                border-bottom: 1px solid #e2e8f0;
                border-radius: 8px 8px 0 0;
                position: relative;
            }

            body.dark-mode .modal-header {
                background: #0f172a;
                border-bottom-color: #334155;
            }

            .modal-header h2 {
                margin: 0;
                font-size: 1.5rem;
                font-weight: 700;
                color: #1e293b;
                display: flex;
                align-items: center;
                gap: 0.75rem;
            }

            body.dark-mode .modal-header h2 {
                color: #f1f5f9;
            }

            /* Close Button */
            .close-modal {
                position: absolute;
                right: 1.5rem;
                top: 50%;
                transform: translateY(-50%);
                font-size: 1.5rem;
                color: #64748b;
                cursor: pointer;
                width: 32px;
                height: 32px;
                display: flex;
                align-items: center;
                justify-content: center;
                border-radius: 6px;
                background: transparent;
                transition: background 0.2s;
                line-height: 1;
            }

            .close-modal:hover {
                background: #f1f5f9;
                color: #1e293b;
            }

            body.dark-mode .close-modal:hover {
                background: #334155;
                color: #f1f5f9;
            }

            /* Modal Body */
            .modal-body {
                padding: 2rem;
            }

            .modal-body h3 {
                font-size: 1.25rem;
                font-weight: 700;
                color: #1e293b;
                margin: 1.5rem 0 1rem 0;
            }

            body.dark-mode .modal-body h3 {
                color: #f1f5f9;
            }

            .modal-body h4 {
                font-size: 1.1rem;
                font-weight: 600;
                color: #334155;
                margin: 1.25rem 0 0.75rem 0;
            }

            body.dark-mode .modal-body h4 {
                color: #cbd5e1;
            }

            .modal-body ul {
                margin: 1rem 0;
                padding-left: 1.5rem;
            }

            .modal-body li {
                margin-bottom: 0.5rem;
                line-height: 1.6;
                color: #475569;
            }

            body.dark-mode .modal-body li {
                color: #94a3b8;
            }

            .modal-body p {
                line-height: 1.6;
                color: #475569;
                margin-bottom: 1rem;
            }

            body.dark-mode .modal-body p {
                color: #94a3b8;
            }

            /* Small Modal Variant */
            .modal-small .modal-content {
                max-width: 500px;
            }

            /* Scrollbar Styling */
            .modal-content::-webkit-scrollbar {
                width: 8px;
            }

            .modal-content::-webkit-scrollbar-track {
                background: #f1f5f9;
            }

            .modal-content::-webkit-scrollbar-thumb {
                background: #cbd5e1;
                border-radius: 4px;
            }

            .modal-content::-webkit-scrollbar-thumb:hover {
                background: #94a3b8;
            }

            /* ============================================
            ‚ùì HELP ICON BUTTON
            ============================================ */
            
            .help-icon {
                display: inline-flex;
                align-items: center;
                justify-content: center;
                width: 24px;
                height: 24px;
                border-radius: 50%;
                background: #3b82f6;
                color: white !important;
                font-size: 0.85rem;
                font-weight: 700;
                cursor: pointer;
                transition: all 0.2s;
                margin-left: 0.5rem;
                border: none;
            }

            .help-icon::before {
                content: '?';
            }

            .help-icon:hover {
                background: #2563eb;
                transform: scale(1.1);
            }

            /* ============================================
            üìã FORMULA & INFO BOXES
            ============================================ */
            
            .formula-box {
                background: #f8fafc;
                border-left: 3px solid #3b82f6;
                padding: 1rem;
                margin: 1rem 0;
                border-radius: 4px;
                font-family: 'Courier New', monospace;
                font-size: 0.9rem;
                line-height: 1.6;
            }

            body.dark-mode .formula-box {
                background: #1e293b;
                color: #e2e8f0;
            }

            .formula-box strong {
                color: #1e293b;
                display: block;
                margin-bottom: 0.5rem;
            }

            body.dark-mode .formula-box strong {
                color: #f1f5f9;
            }

            .key-term {
                color: #3b82f6;
                font-weight: 600;
            }

            .tip-box {
                background: #ecfdf5;
                border-left: 3px solid #10b981;
                padding: 1rem;
                margin: 1rem 0;
                border-radius: 4px;
                font-size: 0.9rem;
            }

            body.dark-mode .tip-box {
                background: #064e3b;
                color: #d1fae5;
            }

            .warning-box {
                background: #fef3c7;
                border-left: 3px solid #f59e0b;
                padding: 1rem;
                margin: 1rem 0;
                border-radius: 4px;
                font-size: 0.9rem;
            }

            body.dark-mode .warning-box {
                background: #78350f;
                color: #fef3c7;
            }

            /* Responsive Modal */
            @media (max-width: 768px) {
                .modal {
                    padding: 1rem;
                }

                .modal-content {
                    max-height: 95vh;
                }

                .modal-header {
                    padding: 1.25rem 1.5rem;
                }

                .modal-header h2 {
                    font-size: 1.25rem;
                }

                .modal-body {
                    padding: 1.5rem;
                }

                .close-modal {
                    right: 1rem;
                    width: 28px;
                    height: 28px;
                    font-size: 1.25rem;
                }

                .help-icon {
                    width: 20px;
                    height: 20px;
                    font-size: 0.75rem;
                }
            }
        </style>
    </head>
    <body>

        <!-- ‚ö° THEME SCRIPT -->
        <script src="assets/js/theme.js"></script>

        <!-- Particles Background -->
        <canvas id="particles-canvas" class="particles-background"></canvas>

        <!-- üé® THEME CHARTS -->
        <script src="assets/js/theme-charts.js"></script>

        <div class='layout-wrapper'>
            
            <!-- ============================================
                SIDEBAR NAVIGATION
                ============================================ -->
            <aside class='sidebar' id='sidebar'>
                <!-- Header avec Logo 3D -->
                <div class="sidebar-header">
                    <div class="logo-container">
                        <div class="logo-3d">
                            <svg class="logo-svg" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                                <defs>
                                    <linearGradient id="logoGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                        <stop offset="0%" class="logo-gradient-1" />
                                        <stop offset="100%" class="logo-gradient-2" />
                                    </linearGradient>
                                </defs>
                                <path d="M 20 80 L 30 70 L 40 75 L 50 60 L 60 65 L 70 45 L 80 50 L 90 30" 
                                    stroke="url(#logoGradient)" 
                                    stroke-width="4" 
                                    fill="none" 
                                    stroke-linecap="round" 
                                    stroke-linejoin="round"/>
                                <circle cx="30" cy="70" r="4" fill="url(#logoGradient)"/>
                                <circle cx="50" cy="60" r="4" fill="url(#logoGradient)"/>
                                <circle cx="70" cy="45" r="4" fill="url(#logoGradient)"/>
                                <circle cx="90" cy="30" r="5" fill="url(#logoGradient)"/>
                                <path d="M 85 35 L 90 30 L 85 25" 
                                    stroke="url(#logoGradient)" 
                                    stroke-width="3" 
                                    fill="none" 
                                    stroke-linecap="round"/>
                            </svg>
                        </div>
                        <div class="brand-text">
                            <h2 class="brand-name">AlphaVault AI</h2>
                            <span class="brand-tagline">Investments</span>
                        </div>
                    </div>
                    <button class="sidebar-toggle" aria-label="Toggle Sidebar">
                        <i class="fas fa-angle-left"></i>
                    </button>
                </div>
                
                <!-- Navigation -->
                <nav class="sidebar-nav">
                    <div class="nav-section">
                        <button class="nav-folder" data-tooltip="Home">
                            <i class="fas fa-home"></i>
                            <span>Home</span>
                            <i class="fas fa-chevron-down arrow"></i>
                        </button>
                        <div class="nav-submenu">
                            <a href="index.html" class="nav-link">
                                <i class="fas fa-home"></i>
                                <span>Overview</span>
                            </a>
                        </div>
                    </div>
                    
                    <div class='nav-section'>
                        <button class='nav-folder'>
                            <i class='fas fa-wallet'></i>
                            <span>Budget</span>
                            <i class='fas fa-chevron-down arrow'></i>
                        </button>
                        <div class='nav-submenu'>
                            <a href='dashboard-financier.html' class='nav-link'>
                                <i class='fas fa-home'></i>
                                <span>Dashboard Budget</span>
                            </a>
                            <a href='investment-analytics.html' class='nav-link'>
                                <i class='fas fa-chart-bar'></i>
                                <span>Investment Analytics</span>
                            </a>
                        </div>
                    </div>
                    
                    <div class='nav-section'>
                        <button class='nav-folder'>
                            <i class='fas fa-calculator'></i>
                            <span>Simulation</span>
                            <i class='fas fa-chevron-down arrow'></i>
                        </button>
                        <div class='nav-submenu'>
                            <a href='monte-carlo.html' class='nav-link'>
                                <i class='fas fa-dice'></i>
                                <span>Monte Carlo</span>
                            </a>
                            <a href='portfolio-optimizer.html' class='nav-link'>
                                <i class='fas fa-chart-pie'></i>
                                <span>Markowitz</span>
                            </a>
                            <a href='risk-parity.html' class='nav-link'>
                                <i class='fas fa-balance-scale'></i>
                                <span>Risk Parity</span>
                            </a>
                            <a href='scenario-analysis.html' class='nav-link'>
                                <i class='fas fa-flask'></i>
                                <span>Scenarios</span>
                            </a>
                        </div>
                    </div>
                    
                    <div class='nav-section'>
                        <button class="nav-folder" data-tooltip="Stocks">
                            <i class="fas fa-chart-line"></i>
                            <span>Stocks</span>
                            <i class="fas fa-chevron-down arrow"></i>
                        </button>
                        <div class='nav-submenu' style='display: block;'>
                            <a href='advanced-analysis.html' class='nav-link active'>
                                <i class='fas fa-brain'></i>
                                <span>Advanced Analysis</span>
                            </a>
                            <a href='trend-prediction.html' class='nav-link'>
                                <i class='fas fa-chart-line'></i>
                                <span>Trend Prediction</span>
                            </a>
                            <a href='market-intelligence.html' class='nav-link'>
                                <i class='fas fa-globe'></i>
                                <span>Market Intelligence</span>
                            </a>
                            <a href='company-insights.html' class='nav-link'>
                                <i class='fas fa-building'></i>
                                <span>Company Insights</span>
                            </a>
                            <a href='analyst-coverage.html' class='nav-link'>
                                <i class='fas fa-users'></i>
                                <span>Analyst Coverage</span>
                            </a>
                            <a href='earnings-estimates.html' class='nav-link'>
                                <i class='fas fa-coins'></i>
                                <span>Earnings & Estimates</span>
                            </a>
                        </div>
                    </div>

                    <div class='nav-section'>
                        <button class="nav-folder" data-tooltip="AI Assistant">
                            <i class="fas fa-robot"></i>
                            <span>AI Assistant</span>
                            <i class="fas fa-chevron-down arrow"></i>
                        </button>
                        <div class='nav-submenu' style='display: block;'>
                            <a href='chatbot-fullpage.html' class='nav-link'>
                                <i class='fas fa-comments'></i>
                                <span>Alphy AI Chat</span>
                            </a>
                        </div>
                    </div>
                </nav>
                
                <!-- SIDEBAR FOOTER -->
                <div class="sidebar-footer">
                    <div class="sidebar-user-menu">
                        <div class="sidebar-user-trigger" id="sidebarUserTrigger">
                            <img data-user-photo 
                                src="https://ui-avatars.com/api/?name=User&background=2563eb&color=fff" 
                                alt="Avatar" 
                                class="sidebar-user-avatar">
                            <div class="sidebar-user-info">
                                <span data-user-name class="sidebar-user-name">User</span>
                                <span data-user-plan class="sidebar-user-plan">Free Plan</span>
                            </div>
                            <i class="fas fa-chevron-up sidebar-user-arrow"></i>
                        </div>
                        
                        <div class="sidebar-user-dropdown" id="sidebarUserDropdown">
                            <div class="user-dropdown-header">
                                <img data-user-photo 
                                    src="https://ui-avatars.com/api/?name=User&background=2563eb&color=fff" 
                                    alt="Avatar" 
                                    class="user-dropdown-avatar">
                                <div class="user-dropdown-details">
                                    <h4 data-user-name class="user-dropdown-name">User</h4>
                                    <p data-user-email class="user-dropdown-email">email@example.com</p>
                                </div>
                            </div>
                            
                            <div class="user-dropdown-divider"></div>
                            
                            <nav class="user-dropdown-links">
                                <a href="user-profile.html" class="user-dropdown-link">
                                    <i class="fas fa-user"></i>
                                    <span>My profile</span>
                                </a>
                                <a href="settings.html" class="user-dropdown-link">
                                    <i class="fas fa-cog"></i>
                                    <span>Settings</span>
                                </a>
                                <a href="#" class="user-dropdown-link">
                                    <i class="fas fa-question-circle"></i>
                                    <span>Help</span>
                                </a>
                            </nav>
                            
                            <div class="user-dropdown-divider"></div>
                            
                            <button onclick="logout()" class="user-dropdown-logout">
                                <i class="fas fa-sign-out-alt"></i>
                                <span>Disconnect</span>
                            </button>
                        </div>
                    </div>
                </div>
            </aside>
            
            <div class='sidebar-overlay' id='sidebarOverlay' aria-hidden='true'></div>

            <!-- ============================================
                MAIN CONTENT AREA
                ============================================ -->
            <div class='main-content'>
                <!-- Top Header -->
                <header class='top-header'>
                    <div class="header-content-wrapper">
                        <div class='header-left'>
                            <button class='mobile-toggle' id='mobileToggle'>
                                <i class='fas fa-bars'></i>
                            </button>
                            <h1>Advanced Technical Analysis (Legal Compliant)</h1>
                        </div>
                    </div>
                </header>
                
                <!-- Container -->
                <div class='container'>
                    <div class='content'>
                        
                        <!-- ============================================
                            üÜï PORTFOLIO MANAGEMENT SECTION
                            ============================================ -->
                        <div class='portfolio-management-section'>
                            <h2 class='section-title'>
                                <i class='fas fa-briefcase'></i> Portfolio Management
                                <span class='help-icon' onclick='openPortfolioHelp()'></span>
                            </h2>
                            
                            <div class='portfolio-toolbar'>
                                <div class='portfolio-selector'>
                                    <label>
                                        <i class='fas fa-folder-open'></i> Active Portfolio:
                                    </label>
                                    <select id='portfolioSelect' class='portfolio-dropdown'>
                                        <option value=''>Loading portfolios...</option>
                                    </select>
                                </div>
                                
                                <div class='portfolio-actions'>
                                    <button class='btn-portfolio-action' onclick='PortfolioManager.openCreateModal()'>
                                        <i class='fas fa-plus'></i> New Portfolio
                                    </button>
                                    <button class='btn-portfolio-action' onclick='PortfolioManager.openManageModal()'>
                                        <i class='fas fa-cog'></i> Manage
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- ============================================
                            üÜï WATCHLIST SECTION
                            ============================================ -->
                        <div class='watchlist-section'>
                            <h2 class='section-title'>
                                <i class='fas fa-star'></i> Watchlist
                                <span class='help-icon' onclick='openWatchlistHelp()'></span>
                            </h2>
                            
                            <div class='watchlist-toolbar'>
                                <div class='watchlist-search'>
                                    <input type='text' 
                                        id='watchlistSearchInput' 
                                        placeholder='Add stock to watchlist (e.g., AAPL)...'
                                        autocomplete='off'>
                                    <button class='btn-add-watchlist' onclick='WatchlistManager.addFromInput()'>
                                        <i class='fas fa-plus'></i> Add
                                    </button>
                                </div>
                                
                                <div class='watchlist-filters'>
                                    <button class='filter-btn active' data-filter='all' onclick='WatchlistManager.filterWatchlist("all")'>
                                        All
                                    </button>
                                    <button class='filter-btn' data-filter='gainers' onclick='WatchlistManager.filterWatchlist("gainers")'>
                                        <i class='fas fa-arrow-up'></i> Gainers
                                    </button>
                                    <button class='filter-btn' data-filter='losers' onclick='WatchlistManager.filterWatchlist("losers")'>
                                        <i class='fas fa-arrow-down'></i> Losers
                                    </button>
                                </div>
                            </div>
                            
                            <div id='watchlistContainer' class='watchlist-container'>
                                <div class='watchlist-empty'>
                                    <i class='fas fa-star'></i>
                                    <p>No stocks in watchlist</p>
                                    <small>Add stocks to track them in real-time</small>
                                </div>
                            </div>
                        </div>
                        
                        <!-- ============================================
                            SEARCH PANEL
                            ============================================ -->
                        <div class='search-panel'>
                            <h2 class='panel-title'>
                                <i class='fas fa-search'></i> Select Stock for Advanced Analysis (Technical Indicators Only)
                                <span class='help-icon' onclick='openModal("modalIntro")'></span>
                            </h2>
                            
                            <div class='search-container'>
                                <div class='search-input-wrapper'>
                                    <input type='text' 
                                        id='symbolInput' 
                                        placeholder='Search by symbol or company name (e.g., AAPL, Apple, Tesla)...'
                                        autocomplete='off'
                                        value='AAPL'>
                                    <button class='btn-analyze' onclick='AdvancedAnalysis.analyzeStock()'>
                                        <i class='fas fa-chart-area'></i> Analyze Stock
                                    </button>
                                    <div class='search-suggestions' id='searchSuggestions'></div>
                                </div>
                                
                                <div class='popular-stocks'>
                                    <span class='quick-label'>Popular Stocks:</span>
                                    <button class='symbol-chip' onclick='AdvancedAnalysis.loadSymbol("AAPL")'>
                                        <i class='fab fa-apple'></i> AAPL
                                    </button>
                                    <button class='symbol-chip' onclick='AdvancedAnalysis.loadSymbol("MSFT")'>
                                        <i class='fab fa-microsoft'></i> MSFT
                                    </button>
                                    <button class='symbol-chip' onclick='AdvancedAnalysis.loadSymbol("GOOGL")'>
                                        <i class='fab fa-google'></i> GOOGL
                                    </button>
                                    <button class='symbol-chip' onclick='AdvancedAnalysis.loadSymbol("AMZN")'>
                                        <i class='fab fa-amazon'></i> AMZN
                                    </button>
                                    <button class='symbol-chip' onclick='AdvancedAnalysis.loadSymbol("TSLA")'>
                                        <i class='fas fa-car'></i> TSLA
                                    </button>
                                    <button class='symbol-chip' onclick='AdvancedAnalysis.loadSymbol("NVDA")'>
                                        <i class='fas fa-microchip'></i> NVDA
                                    </button>
                                    <button class='symbol-chip' onclick='AdvancedAnalysis.loadSymbol("META")'>
                                        <i class='fab fa-meta'></i> META
                                    </button>
                                    <button class='symbol-chip' onclick='AdvancedAnalysis.loadSymbol("NFLX")'>
                                        <i class='fas fa-film'></i> NFLX
                                    </button>
                                </div>
                                
                                <div class='prediction-settings'>
                                    <div class='setting-group'>
                                        <label>Analysis Period:</label>
                                        <button class='horizon-btn' data-period='1M' onclick='AdvancedAnalysis.changePeriod("1M")'>1M</button>
                                        <button class='horizon-btn' data-period='3M' onclick='AdvancedAnalysis.changePeriod("3M")'>3M</button>
                                        <button class='horizon-btn active' data-period='6M' onclick='AdvancedAnalysis.changePeriod("6M")'>6M</button>
                                        <button class='horizon-btn' data-period='1Y' onclick='AdvancedAnalysis.changePeriod("1Y")'>1Y</button>
                                        <button class='horizon-btn' data-period='5Y' onclick='AdvancedAnalysis.changePeriod("5Y")'>5Y</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Loading Indicator -->
                        <div id='loadingIndicator' class='loading-indicator hidden'>
                            <i class='fas fa-spinner fa-spin'></i> 
                            <span id='loadingText'>Loading data and calculating technical indicators...</span>
                        </div>
                        
                        <!-- Stock Header (SANS PRIX) -->
                        <div id='stockHeader' class='stock-header hidden'>
                            <div class='header-content'>
                                <div class='stock-info'>
                                    <h2 id='stockSymbol'>-</h2>
                                    <span id='stockName' class='stock-name'>-</span>
                                </div>
                                <div class='stock-price'>
                                    <div id='currentPrice' class='price'>AlphaVault Score: --</div>
                                    <div id='priceChange' class='change'>Market Strength: --</div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Results Panel -->
                        <div id='resultsPanel' class='results-panel hidden'>
                            
                            <!-- ============================================
                                üìä CONSOLIDATED SIGNALS
                                ============================================ -->
                            <div class='signals-section'>
                                <h3 class='section-title'>
                                    <i class='fas fa-signal'></i> Consolidated Trading Signals (Based on All Indicators)
                                    <span class='help-icon' onclick='openModal("modalSignals")'></span>
                                </h3>
                                
                                <div class='signal-gauge'>
                                    <div class='gauge-header'>
                                        <h4>Overall Market Signal</h4>
                                    </div>
                                    <div class='gauge-container'>
                                        <div class='gauge-bar'>
                                            <div class='gauge-fill' id='gaugeFill' style='width: 50%'></div>
                                        </div>
                                        <div class='gauge-value' id='gaugeValue'>NEUTRAL</div>
                                    </div>
                                </div>
                                
                                <div class='signals-breakdown' id='signalsBreakdown'>
                                    <!-- Rempli dynamiquement -->
                                </div>
                            </div>

                            <!-- ============================================
                                ü§ñ ALPHY AI INVESTMENT RECOMMENDATION
                                ============================================ -->
                            <div class='ai-recommendation-section' id='aiRecommendationSection'>
                                <div class='ai-header'>
                                    <div class='ai-logo-container'>
                                        <div class='ai-logo-ring'>
                                            <div class='ai-logo-core'>
                                                <i class='fas fa-brain'></i>
                                            </div>
                                        </div>
                                    </div>
                                    <div class='ai-header-text'>
                                        <h2 class='ai-title'>
                                            <span class='ai-badge'>POWERED BY</span>
                                            ALPHY AI RECOMMENDATION ENGINE
                                        </h2>
                                        <p class='ai-subtitle'>
                                            Technical Analysis Based Multi-Horizon Investment Analysis
                                            <span class='ai-indicators-count'>‚Ä¢ Analyzing Technical Indicators Only</span>
                                        </p>
                                    </div>
                                </div>

                                <!-- AI Score Global -->
                                <div class='ai-score-container'>
                                    <div class='ai-score-card'>
                                        <div class='ai-score-label'>AI CONFIDENCE SCORE</div>
                                        <div class='ai-score-value' id='aiScoreValue'>--</div>
                                        <div class='ai-score-bar' id='aiScoreFill'>
                                            <div class='ai-score-fill' style='width: 0%'></div>
                                        </div>
                                        <div class='ai-score-rating' id='aiScoreRating'>Analyzing...</div>
                                    </div>

                                    <div class='ai-quick-stats'>
                                        <div class='ai-stat-item'>
                                            <div class='ai-stat-icon bullish'>
                                                <i class='fas fa-arrow-up'></i>
                                            </div>
                                            <div class='ai-stat-content'>
                                                <div class='ai-stat-value' id='bullishSignals'>--</div>
                                                <div class='ai-stat-label'>Bullish Signals</div>
                                            </div>
                                        </div>
                                        <div class='ai-stat-item'>
                                            <div class='ai-stat-icon neutral'>
                                                <i class='fas fa-minus'></i>
                                            </div>
                                            <div class='ai-stat-content'>
                                                <div class='ai-stat-value' id='neutralSignals'>--</div>
                                                <div class='ai-stat-label'>Neutral Signals</div>
                                            </div>
                                        </div>
                                        <div class='ai-stat-item'>
                                            <div class='ai-stat-icon bearish'>
                                                <i class='fas fa-arrow-down'></i>
                                            </div>
                                            <div class='ai-stat-content'>
                                                <div class='ai-stat-value' id='bearishSignals'>--</div>
                                                <div class='ai-stat-label'>Bearish Signals</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Multi-Horizon Recommendations -->
                                <div class='ai-horizons-grid'>
                                    <!-- 1 Year Horizon -->
                                    <div class='ai-horizon-card' data-horizon='1y'>
                                        <div class='ai-horizon-header'>
                                            <div class='ai-horizon-icon'>
                                                <i class='fas fa-calendar-alt'></i>
                                            </div>
                                            <div class='ai-horizon-title'>
                                                <h3>1 Year Outlook</h3>
                                                <p>Short-Term Investment</p>
                                            </div>
                                        </div>
                                        <div class='ai-horizon-recommendation' id='recommendation1y'>
                                            <div class='ai-rec-badge'>ANALYZING...</div>
                                        </div>
                                        <div class='ai-horizon-details'>
                                            <div class='ai-detail-row'>
                                                <span class='ai-detail-label'>Potential:</span>
                                                <span class='ai-detail-value' id='target1y'>--</span>
                                            </div>
                                            <div class='ai-detail-row'>
                                                <span class='ai-detail-label'>Confidence:</span>
                                                <div class='ai-confidence-bar' id='confidence1y'>
                                                    <div class='ai-confidence-fill' style='width: 0%'></div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class='ai-horizon-drivers'>
                                            <div class='ai-drivers-label'>Key Drivers:</div>
                                            <div class='ai-drivers-list' id='drivers1y'></div>
                                        </div>
                                    </div>

                                    <!-- 2 Years Horizon -->
                                    <div class='ai-horizon-card' data-horizon='2y'>
                                        <div class='ai-horizon-header'>
                                            <div class='ai-horizon-icon'>
                                                <i class='fas fa-chart-line'></i>
                                            </div>
                                            <div class='ai-horizon-title'>
                                                <h3>2 Years Outlook</h3>
                                                <p>Medium-Term Investment</p>
                                            </div>
                                        </div>
                                        <div class='ai-horizon-recommendation' id='recommendation2y'>
                                            <div class='ai-rec-badge'>ANALYZING...</div>
                                        </div>
                                        <div class='ai-horizon-details'>
                                            <div class='ai-detail-row'>
                                                <span class='ai-detail-label'>Potential:</span>
                                                <span class='ai-detail-value' id='target2y'>--</span>
                                            </div>
                                            <div class='ai-detail-row'>
                                                <span class='ai-detail-label'>Confidence:</span>
                                                <div class='ai-confidence-bar' id='confidence2y'>
                                                    <div class='ai-confidence-fill' style='width: 0%'></div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class='ai-horizon-drivers'>
                                            <div class='ai-drivers-label'>Key Drivers:</div>
                                            <div class='ai-drivers-list' id='drivers2y'></div>
                                        </div>
                                    </div>

                                    <!-- 5 Years Horizon -->
                                    <div class='ai-horizon-card' data-horizon='5y'>
                                        <div class='ai-horizon-header'>
                                            <div class='ai-horizon-icon'>
                                                <i class='fas fa-rocket'></i>
                                            </div>
                                            <div class='ai-horizon-title'>
                                                <h3>5 Years Outlook</h3>
                                                <p>Long-Term Investment</p>
                                            </div>
                                        </div>
                                        <div class='ai-horizon-recommendation' id='recommendation5y'>
                                            <div class='ai-rec-badge'>ANALYZING...</div>
                                        </div>
                                        <div class='ai-horizon-details'>
                                            <div class='ai-detail-row'>
                                                <span class='ai-detail-label'>Potential:</span>
                                                <span class='ai-detail-value' id='target5y'>--</span>
                                            </div>
                                            <div class='ai-detail-row'>
                                                <span class='ai-detail-label'>Confidence:</span>
                                                <div class='ai-confidence-bar' id='confidence5y'>
                                                    <div class='ai-confidence-fill' style='width: 0%'></div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class='ai-horizon-drivers'>
                                            <div class='ai-drivers-label'>Key Drivers:</div>
                                            <div class='ai-drivers-list' id='drivers5y'></div>
                                        </div>
                                    </div>

                                    <!-- 10 Years Horizon -->
                                    <div class='ai-horizon-card' data-horizon='10y'>
                                        <div class='ai-horizon-header'>
                                            <div class='ai-horizon-icon'>
                                                <i class='fas fa-gem'></i>
                                            </div>
                                            <div class='ai-horizon-title'>
                                                <h3>10 Years Outlook</h3>
                                                <p>Strategic Investment</p>
                                            </div>
                                        </div>
                                        <div class='ai-horizon-recommendation' id='recommendation10y'>
                                            <div class='ai-rec-badge'>ANALYZING...</div>
                                        </div>
                                        <div class='ai-horizon-details'>
                                            <div class='ai-detail-row'>
                                                <span class='ai-detail-label'>Potential:</span>
                                                <span class='ai-detail-value' id='target10y'>--</span>
                                            </div>
                                            <div class='ai-detail-row'>
                                                <span class='ai-detail-label'>Confidence:</span>
                                                <div class='ai-confidence-bar' id='confidence10y'>
                                                    <div class='ai-confidence-fill' style='width: 0%'></div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class='ai-horizon-drivers'>
                                            <div class='ai-drivers-label'>Key Drivers:</div>
                                            <div class='ai-drivers-list' id='drivers10y'></div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Disclaimer -->
                                <div class='ai-disclaimer'>
                                    <i class='fas fa-info-circle'></i>
                                    <strong>Disclaimer:</strong> This AI-powered analysis is for informational purposes only and should not be considered as financial advice. Alphy AI aggregates technical indicators to provide data-driven insights. Always conduct your own research and consult with a licensed financial advisor before making investment decisions. Past performance does not guarantee future results.
                                </div>
                            </div>
                            
                            <!-- ============================================
                                üìà SECTION 1: MOMENTUM OSCILLATORS
                                ============================================ -->
                            <div class='oscillators-grid'>
                                
                                <!-- RSI -->
                                <div class='oscillator-card'>
                                    <h3 class='section-title'>
                                        <i class='fas fa-chart-line'></i> RSI - Relative Strength Index
                                        <span class='help-icon' onclick='openModal("modalRSI")'></span>
                                    </h3>
                                    <div id='rsiChart' class='chart'></div>
                                    <div class='signal-box' id='rsiSignal'>Calculating...</div>
                                </div>
                                
                                <!-- MACD -->
                                <div class='oscillator-card'>
                                    <h3 class='section-title'>
                                        <i class='fas fa-wave-square'></i> MACD
                                        <span class='help-icon' onclick='openModal("modalMACD")'></span>
                                    </h3>
                                    <div id='macdChart' class='chart'></div>
                                    <div class='signal-box' id='macdSignal'>Calculating...</div>
                                </div>
                                
                            </div>
                            
                            <!-- Stochastic & Williams Grid -->
                            <div class='oscillators-grid'>
                                
                                <!-- Stochastic -->
                                <div class='oscillator-card'>
                                    <h3 class='section-title'>
                                        <i class='fas fa-wave-square'></i> Stochastic Oscillator
                                        <span class='help-icon' onclick='openModal("modalStochastic")'></span>
                                    </h3>
                                    <div id='stochasticChart' class='chart'></div>
                                    <div class='signal-box' id='stochasticSignal'>Calculating...</div>
                                </div>
                                
                                <!-- Williams %R -->
                                <div class='oscillator-card'>
                                    <h3 class='section-title'>
                                        <i class='fas fa-chart-line'></i> Williams %R
                                        <span class='help-icon' onclick='openModal("modalWilliams")'></span>
                                    </h3>
                                    <div id='williamsChart' class='chart'></div>
                                    <div class='signal-box' id='williamsSignal'>Calculating...</div>
                                </div>
                                
                            </div>
                            
                            <!-- MFI, CCI, Ultimate Grid -->
                            <div class='oscillators-grid'>
                                
                                <!-- MFI -->
                                <div class='oscillator-card'>
                                    <h3 class='section-title'>
                                        <i class='fas fa-coins'></i> MFI - Money Flow Index
                                        <span class='help-icon' onclick='openModal("modalMFI")'></span>
                                    </h3>
                                    <div id='mfiChart' class='chart'></div>
                                    <div class='signal-box' id='mfiSignal'>Calculating...</div>
                                </div>
                                
                                <!-- CCI -->
                                <div class='oscillator-card'>
                                    <h3 class='section-title'>
                                        <i class='fas fa-chart-area'></i> CCI - Commodity Channel Index
                                        <span class='help-icon' onclick='openModal("modalCCI")'></span>
                                    </h3>
                                    <div id='cciChart' class='chart'></div>
                                    <div class='signal-box' id='cciSignal'>Calculating...</div>
                                </div>
                                
                            </div>
                            
                            <!-- Ultimate & ROC Grid -->
                            <div class='oscillators-grid'>
                                
                                <!-- Ultimate Oscillator -->
                                <div class='oscillator-card'>
                                    <h3 class='section-title'>
                                        <i class='fas fa-layer-group'></i> Ultimate Oscillator
                                        <span class='help-icon' onclick='openModal("modalUltimate")'></span>
                                    </h3>
                                    <div id='ultimateChart' class='chart'></div>
                                    <div class='signal-box' id='ultimateSignal'>Calculating...</div>
                                </div>
                                
                                <!-- ROC -->
                                <div class='oscillator-card'>
                                    <h3 class='section-title'>
                                        <i class='fas fa-percentage'></i> ROC - Rate of Change
                                        <span class='help-icon' onclick='openModal("modalROC")'></span>
                                    </h3>
                                    <div id='rocChart' class='chart'></div>
                                    <div class='signal-box' id='rocSignal'>Calculating...</div>
                                </div>
                                
                            </div>
                            
                            <!-- ============================================
                                üìä SECTION 2: TREND INDICATORS
                                ============================================ -->
                            
                            <!-- ADX & Aroon Grid -->
                            <div class='oscillators-grid'>
                                
                                <!-- ADX -->
                                <div class='oscillator-card'>
                                    <h3 class='section-title'>
                                        <i class='fas fa-chart-area'></i> ADX - Trend Strength
                                        <span class='help-icon' onclick='openModal("modalADX")'></span>
                                    </h3>
                                    <div id='adxChart' class='chart'></div>
                                    <div class='signal-box' id='adxSignal'>Calculating...</div>
                                </div>
                                
                                <!-- Aroon Indicator -->
                                <div class='oscillator-card'>
                                    <h3 class='section-title'>
                                        <i class='fas fa-arrows-alt-h'></i> Aroon Indicator
                                        <span class='help-icon' onclick='openModal("modalAroon")'></span>
                                    </h3>
                                    <div id='aroonChart' class='chart'></div>
                                    <div class='signal-box' id='aroonSignal'>Calculating...</div>
                                </div>
                                
                            </div>
                            
                            <!-- ============================================
                                üéØ SECTION 3: VOLATILITY
                                ============================================ -->
                            
                            <!-- ATR -->
                            <div class='chart-section'>
                                <h3 class='section-title'>
                                    <i class='fas fa-arrows-alt-v'></i> Average True Range (ATR)
                                    <span class='help-icon' onclick='openModal("modalATR")'></span>
                                </h3>
                                <div id='atrChart' class='chart'></div>
                                <div class='signal-box' id='atrSignal'>Calculating...</div>
                            </div>
                            
                            <!-- ============================================
                                üìä SECTION 4: VOLUME ANALYSIS
                                ============================================ -->
                            
                            <!-- OBV & CMF Grid -->
                            <div class='oscillators-grid'>
                                
                                <!-- OBV -->
                                <div class='oscillator-card'>
                                    <h3 class='section-title'>
                                        <i class='fas fa-chart-bar'></i> On-Balance Volume
                                        <span class='help-icon' onclick='openModal("modalOBV")'></span>
                                    </h3>
                                    <div id='obvChart' class='chart'></div>
                                    <div class='signal-box' id='obvSignal'>Calculating...</div>
                                </div>
                                
                                <!-- CMF -->
                                <div class='oscillator-card'>
                                    <h3 class='section-title'>
                                        <i class='fas fa-water'></i> CMF - Chaikin Money Flow
                                        <span class='help-icon' onclick='openModal("modalCMF")'></span>
                                    </h3>
                                    <div id='cmfChart' class='chart'></div>
                                    <div class='signal-box' id='cmfSignal'>Calculating...</div>
                                </div>
                                
                            </div>
                            
                            <!-- Elder Ray -->
                            <div class='chart-section'>
                                <h3 class='section-title'>
                                    <i class='fas fa-balance-scale'></i> Elder Ray Index - Bull & Bear Power
                                    <span class='help-icon' onclick='openModal("modalElderRay")'></span>
                                </h3>
                                <div id='elderRayChart' class='chart'></div>
                                <div class='signal-box' id='elderRaySignal'>Calculating...</div>
                            </div>
                            
                        </div>
                    </div>
                    
                    <!-- Footer -->
                    <footer>
                        <p>Advanced Technical Analysis | Legal Compliant Version (Technical Indicators Only)</p>
                    </footer>
                </div>
            </div>
            
        </div>

        <!-- Core Scripts -->
        <script src='assets/js/config.js'></script>
        <script src='assets/js/api-client.js'></script>
        <script src='assets/js/dark-mode.js'></script>
        <script src='assets/js/common.js'></script>
        <script src='assets/js/sidebar.js'></script>
        <script src="assets/js/chatbot-particles.js"></script>
        <script src='assets/js/advanced-analysis.js'></script>
        <script src='assets/js/portfolio-manager.js'></script>
        <script src='assets/js/watchlist-manager.js'></script>
        <script src='assets/js/chatbot-config.js'></script>
        <script src='assets/js/chatbot-ui.js'></script>

    </body>
    </html>

    <!-- ============================================
         üÜï MODALS - PORTFOLIO, WATCHLIST & ALERTS
         ============================================ -->
    
    <!-- Modal: Create Portfolio -->
    <div id='modalCreatePortfolio' class='modal'>
        <div class='modal-content modal-small'>
            <div class='modal-header'>
                <h2><i class='fas fa-folder-plus'></i> Create New Portfolio</h2>
                <span class='close-modal' onclick='closeModal("modalCreatePortfolio")'>&times;</span>
            </div>
            <div class='modal-body'>
                <div class='form-group'>
                    <label>Portfolio Name</label>
                    <input type='text' id='newPortfolioName' placeholder='e.g., Tech Stocks, Dividend Portfolio...' class='form-input'>
                </div>
                <div class='modal-actions'>
                    <button class='btn-cancel' onclick='closeModal("modalCreatePortfolio")'>Cancel</button>
                    <button class='btn-confirm' onclick='PortfolioManager.createPortfolio()'>
                        <i class='fas fa-check'></i> Create
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Modal: Manage Portfolios -->
    <div id='modalManagePortfolios' class='modal'>
        <div class='modal-content'>
            <div class='modal-header'>
                <h2><i class='fas fa-cog'></i> Manage Portfolios</h2>
                <span class='close-modal' onclick='closeModal("modalManagePortfolios")'>&times;</span>
            </div>
            <div class='modal-body'>
                <div id='portfoliosListManage' class='portfolios-manage-list'>
                    <!-- Rempli dynamiquement -->
                </div>
            </div>
        </div>
    </div>
    
    <!-- Modal: Create Price Alert -->
    <div id='modalCreateAlert' class='modal'>
        <div class='modal-content modal-small'>
            <div class='modal-header'>
                <h2><i class='fas fa-bell'></i> Create Price Alert</h2>
                <span class='close-modal' onclick='closeModal("modalCreateAlert")'>&times;</span>
            </div>
            <div class='modal-body'>
                <div class='form-group'>
                    <label>Stock Symbol</label>
                    <input type='text' id='alertSymbol' placeholder='e.g., AAPL' class='form-input' style='text-transform: uppercase;'>
                </div>
                <div class='form-group'>
                    <label>Alert Condition</label>
                    <select id='alertCondition' class='form-input'>
                        <option value='above'>Price goes above</option>
                        <option value='below'>Price goes below</option>
                    </select>
                </div>
                <div class='form-group'>
                    <label>Target Price ($)</label>
                    <input type='number' id='alertTargetPrice' placeholder='e.g., 150.00' class='form-input' step='0.01'>
                </div>
                <div class='modal-actions'>
                    <button class='btn-cancel' onclick='closeModal("modalCreateAlert")'>Cancel</button>
                    <button class='btn-confirm' onclick='AlertsManager.createAlert()'>
                        <i class='fas fa-check'></i> Create Alert
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- ============================================
         üìö MODALS - INDICATEURS TECHNIQUES (COMPLET)
         ============================================ -->

    <!-- Modal Introduction -->
    <div id='modalIntro' class='modal'>
        <div class='modal-content'>
            <div class='modal-header'>
                <h2>üìä Advanced Technical Analysis - Wall Street Edition</h2>
                <span class='close-modal' onclick='closeModal("modalIntro")'>&times;</span>
            </div>
            <div class='modal-body'>
                <h3>üöÄ What is This Platform?</h3>
                <p>This is a <span class='key-term'>professional-grade technical analysis platform</span> featuring <strong>40+ institutional-level indicators</strong> used by hedge funds, prop traders, and Wall Street analysts.</p>
                
                <h3>üî• 40+ Available Indicators</h3>
                
                <h4>üìà Momentum Oscillators (8)</h4>
                <ul>
                    <li>RSI - Relative Strength Index</li>
                    <li>MACD - Moving Average Convergence Divergence</li>
                    <li>Stochastic Oscillator</li>
                    <li>Williams %R</li>
                    <li>MFI - Money Flow Index</li>
                    <li>CCI - Commodity Channel Index</li>
                    <li>Ultimate Oscillator</li>
                    <li>ROC - Rate of Change</li>
                </ul>
                
                <h4>üìä Trend Indicators (7)</h4>
                <ul>
                    <li>Ichimoku Cloud</li>
                    <li>ADX - Average Directional Index</li>
                    <li>Parabolic SAR</li>
                    <li>Aroon Indicator</li>
                    <li>Moving Averages (SMA 20/50/200, EMA 9/21)</li>
                    <li>Linear Regression Channel</li>
                </ul>
                
                <h4>üéØ Volatility & Channels (4)</h4>
                <ul>
                    <li>Bollinger Bands</li>
                    <li>Keltner Channels</li>
                    <li>Donchian Channels</li>
                    <li>ATR - Average True Range</li>
                </ul>
                
                <h4>üìä Volume Analysis (5)</h4>
                <ul>
                    <li>OBV - On-Balance Volume</li>
                    <li>CMF - Chaikin Money Flow</li>
                    <li>VWAP - Volume Weighted Average Price</li>
                    <li>Volume Profile</li>
                    <li>Elder Ray Index (Bull/Bear Power)</li>
                </ul>
                
                <h4>üéØ Support/Resistance & Patterns (5)</h4>
                <ul>
                    <li>Fibonacci Retracements</li>
                    <li>Pivot Points (Standard, Fibonacci, Camarilla)</li>
                    <li>Automatic Support/Resistance Detection</li>
                    <li>Candlestick Pattern Recognition (20+ patterns)</li>
                    <li>Divergence Detection</li>
                </ul>
                
                <h3>üìà How to Use</h3>
                <ol>
                    <li><strong>Search:</strong> Enter a stock symbol or company name</li>
                    <li><strong>Period:</strong> Select analysis timeframe (1M to 5Y)</li>
                    <li><strong>Analyze:</strong> Click "Analyze Stock"</li>
                    <li><strong>Review:</strong> Consolidated signals + individual indicators</li>
                    <li><strong>Decide:</strong> Make informed trading decisions</li>
                </ol>
                
                <div class='warning-box'>
                    ‚ö† <strong>Important:</strong> Technical analysis should complement fundamental analysis and proper risk management. Past performance doesn't guarantee future results.
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Signals -->
    <div id='modalSignals' class='modal'>
        <div class='modal-content'>
            <div class='modal-header'>
                <h2>üéØ Consolidated Trading Signals</h2>
                <span class='close-modal' onclick='closeModal("modalSignals")'>&times;</span>
            </div>
            <div class='modal-body'>
                <h3>How Signals Are Calculated</h3>
                <p>The <span class='key-term'>Consolidated Signal</span> aggregates <strong>40+ technical indicators</strong> to provide an overall market sentiment with institutional-grade accuracy.</p>
                
                <h3>Signal Categories</h3>
                <ul>
                    <li><strong>STRONG BUY (80-100%):</strong> Overwhelming bullish consensus across all indicator categories</li>
                    <li><strong>BUY (60-80%):</strong> Clear bullish majority - favorable entry conditions</li>
                    <li><strong>NEUTRAL (40-60%):</strong> Mixed signals - consolidation or uncertainty</li>
                    <li><strong>SELL (20-40%):</strong> Clear bearish majority - exit warning</li>
                    <li><strong>STRONG SELL (0-20%):</strong> Overwhelming bearish consensus - strong exit signal</li>
                </ul>
                
                <h3>Indicators Analyzed (40+)</h3>
                <p>Each indicator contributes <strong>+1 (bullish)</strong>, <strong>0 (neutral)</strong>, or <strong>-1 (bearish)</strong> to the final score:</p>
                
                <h4>üìà Momentum (8 indicators)</h4>
                <ul>
                    <li>RSI (overbought/oversold levels)</li>
                    <li>MACD (histogram direction & crossovers)</li>
                    <li>Stochastic (K/D crossovers & zones)</li>
                    <li>Williams %R (momentum zones)</li>
                    <li>MFI (money flow strength)</li>
                    <li>CCI (channel extremes)</li>
                    <li>Ultimate Oscillator (multi-timeframe momentum)</li>
                    <li>ROC (momentum direction)</li>
                </ul>
                
                <h3>Calculation Formula</h3>
                <div class='formula-box'>
                    Signal % = [(Total Signal Score + Max Indicators) / (2 √ó Max Indicators)] √ó 100<br><br>
                    Example: 15 bullish, 5 neutral, 5 bearish out of 25 indicators<br>
                    Signal Score = (+15) + (0) + (-5) = +10<br>
                    Signal % = [(10 + 25) / (2 √ó 25)] √ó 100 = 70% ‚Üí <strong>BUY</strong>
                </div>
                
                <div class='tip-box'>
                    üí° <strong>Pro Tip:</strong> Wait for signals above 70% or below 30% for highest probability trades. Use multiple timeframes for confirmation.
                </div>
            </div>
        </div>
    </div>

    <!-- Modal RSI -->
    <div id='modalRSI' class='modal'>
        <div class='modal-content'>
            <div class='modal-header'>
                <h2>üìä RSI - Relative Strength Index</h2>
                <span class='close-modal' onclick='closeModal("modalRSI")'>&times;</span>
            </div>
            <div class='modal-body'>
                <h3>What is RSI?</h3>
                <p>The <span class='key-term'>Relative Strength Index</span> is a momentum oscillator developed by J. Welles Wilder that measures the speed and magnitude of price changes. It's one of the most popular technical indicators.</p>
                
                <h3>Mathematical Calculation</h3>
                <div class='formula-box'>
                    <strong>Step 1: Calculate Price Changes</strong><br>
                    Gain = Price(today) - Price(yesterday) if positive, else 0<br>
                    Loss = |Price(today) - Price(yesterday)| if negative, else 0<br><br>
                    
                    <strong>Step 2: Calculate Average Gains & Losses (14 periods)</strong><br>
                    First Avg Gain = Sum of Gains / 14<br>
                    First Avg Loss = Sum of Losses / 14<br><br>
                    
                    <strong>Step 3: Smooth Averages</strong><br>
                    Avg Gain = [(Previous Avg Gain √ó 13) + Current Gain] / 14<br>
                    Avg Loss = [(Previous Avg Loss √ó 13) + Current Loss] / 14<br><br>
                    
                    <strong>Step 4: Calculate RS and RSI</strong><br>
                    RS = Avg Gain / Avg Loss<br>
                    RSI = 100 - [100 / (1 + RS)]<br><br>
                    
                    <strong>Range:</strong> 0 to 100
                </div>
                
                <h3>How to Interpret</h3>
                <ul>
                    <li><strong>RSI > 70:</strong> Overbought zone - potential reversal down (sell signal)</li>
                    <li><strong>RSI < 30:</strong> Oversold zone - potential reversal up (buy signal)</li>
                    <li><strong>RSI 50:</strong> Neutral zone - market equilibrium</li>
                    <li><strong>RSI crossing above 30:</strong> Bullish reversal signal</li>
                    <li><strong>RSI crossing below 70:</strong> Bearish reversal signal</li>
                </ul>
                
                <h3>Advanced Techniques</h3>
                <ul>
                    <li><strong>Divergence:</strong> Price makes higher highs but RSI makes lower highs = bearish divergence (sell)</li>
                    <li><strong>Hidden Divergence:</strong> Price makes lower lows but RSI makes higher lows = bullish (continuation)</li>
                    <li><strong>Centerline Crossover:</strong> RSI crossing above 50 = bullish momentum</li>
                    <li><strong>Failure Swings:</strong> RSI fails to reach overbought/oversold = reversal warning</li>
                </ul>
                
                <div class='warning-box'>
                    ‚ö† <strong>Warning:</strong> In strong trends, RSI can remain overbought (>70) or oversold (<30) for extended periods. Always confirm with trend indicators.
                </div>
                
                <div class='tip-box'>
                    üí° <strong>Pro Tip:</strong> Use RSI 80/20 levels for stocks, 70/30 for indices. In strong uptrends, wait for RSI to dip to 40-50 for entries.
                </div>
            </div>
        </div>
    </div>

    <!-- Modal MACD -->
    <div id='modalMACD' class='modal'>
        <div class='modal-content'>
            <div class='modal-header'>
                <h2>üìà MACD - Moving Average Convergence Divergence</h2>
                <span class='close-modal' onclick='closeModal("modalMACD")'>&times;</span>
            </div>
            <div class='modal-body'>
                <h3>What is MACD?</h3>
                <p>The <span class='key-term'>MACD</span> is a trend-following momentum indicator developed by Gerald Appel that shows the relationship between two exponential moving averages. It's one of the most powerful indicators for trend identification.</p>
                
                <h3>Mathematical Calculation</h3>
                <div class='formula-box'>
                    <strong>Step 1: Calculate EMAs</strong><br>
                    EMA(12) = 12-period Exponential Moving Average<br>
                    EMA(26) = 26-period Exponential Moving Average<br>
                    Multiplier = 2 / (Period + 1)<br>
                    EMA = [Close - EMA(previous)] √ó Multiplier + EMA(previous)<br><br>
                    
                    <strong>Step 2: Calculate MACD Line</strong><br>
                    MACD Line = EMA(12) - EMA(26)<br><br>
                    
                    <strong>Step 3: Calculate Signal Line</strong><br>
                    Signal Line = 9-period EMA of MACD Line<br><br>
                    
                    <strong>Step 4: Calculate Histogram</strong><br>
                    MACD Histogram = MACD Line - Signal Line
                </div>
                
                <h3>How to Interpret</h3>
                <ul>
                    <li><strong>MACD Line crosses above Signal Line:</strong> BULLISH CROSSOVER - Buy Signal</li>
                    <li><strong>MACD Line crosses below Signal Line:</strong> BEARISH CROSSOVER - Sell Signal</li>
                    <li><strong>Histogram > 0 and increasing:</strong> Bullish momentum strengthening</li>
                    <li><strong>Histogram < 0 and decreasing:</strong> Bearish momentum strengthening</li>
                    <li><strong>Histogram crossing zero:</strong> Momentum shift confirmation</li>
                    <li><strong>MACD crossing zero line:</strong> Trend change confirmation</li>
                </ul>
                
                <h3>Advanced Signals</h3>
                <ul>
                    <li><strong>Bullish Divergence:</strong> Price makes lower lows, MACD makes higher lows ‚Üí Reversal up</li>
                    <li><strong>Bearish Divergence:</strong> Price makes higher highs, MACD makes lower highs ‚Üí Reversal down</li>
                    <li><strong>Zero Line Rejection:</strong> MACD bounces at zero line ‚Üí Strong trend continuation</li>
                    <li><strong>Histogram Peak:</strong> Highest bar before reversal ‚Üí Momentum exhaustion</li>
                </ul>
                
                <div class='tip-box'>
                    üí° <strong>Pro Tip:</strong> MACD works best in trending markets. Combine with ADX (>25) for confirmation. In sideways markets, use RSI instead.
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Bollinger Bands -->
    <div id='modalBollinger' class='modal'>
        <div class='modal-content'>
            <div class='modal-header'>
                <h2>üìä Bollinger Bands</h2>
                <span class='close-modal' onclick='closeModal("modalBollinger")'>&times;</span>
            </div>
            <div class='modal-body'>
                <h3>What are Bollinger Bands?</h3>
                <p>Developed by John Bollinger, <span class='key-term'>Bollinger Bands</span> are volatility bands placed above and below a moving average. They expand and contract based on market volatility.</p>
                
                <h3>Mathematical Calculation</h3>
                <div class='formula-box'>
                    <strong>Default Settings: 20-period, 2 standard deviations</strong><br><br>
                    
                    <strong>Step 1: Calculate Middle Band (SMA)</strong><br>
                    Middle Band = 20-period Simple Moving Average<br><br>
                    
                    <strong>Step 2: Calculate Standard Deviation</strong><br>
                    Variance = Œ£[(Price - SMA)¬≤] / 20<br>
                    Standard Deviation (œÉ) = ‚àöVariance<br><br>
                    
                    <strong>Step 3: Calculate Bands</strong><br>
                    Upper Band = Middle Band + (2 √ó œÉ)<br>
                    Lower Band = Middle Band - (2 √ó œÉ)<br><br>
                    
                    <strong>Step 4: Calculate %B (Optional)</strong><br>
                    %B = (Price - Lower Band) / (Upper Band - Lower Band)<br>
                    Range: 0 to 1 (or 0% to 100%)
                </div>
                
                <h3>How to Interpret</h3>
                <ul>
                    <li><strong>Price touches Upper Band:</strong> Overbought - potential sell signal</li>
                    <li><strong>Price touches Lower Band:</strong> Oversold - potential buy signal</li>
                    <li><strong>Price above Middle Band:</strong> Bullish territory</li>
                    <li><strong>Price below Middle Band:</strong> Bearish territory</li>
                    <li><strong>Bands squeezing (narrow):</strong> Low volatility - breakout coming (Bollinger Squeeze)</li>
                    <li><strong>Bands expanding (wide):</strong> High volatility - strong trend</li>
                </ul>
                
                <h3>Advanced Strategies</h3>
                <ul>
                    <li><strong>Double Top/Bottom at Bands:</strong> Strong reversal signal</li>
                    <li><strong>Walking the Bands:</strong> In strong trends, price "walks" along upper/lower band</li>
                    <li><strong>M-Top (W-Bottom):</strong> Price makes 2 touches at upper (lower) band = reversal</li>
                    <li><strong>Bandwidth < 5%:</strong> Extreme squeeze - major breakout imminent</li>
                </ul>
                
                <div class='tip-box'>
                    üí° <strong>Pro Tip:</strong> 95% of price action occurs within 2 standard deviations. A move outside bands is significant but NOT automatically a reversal signal in strong trends.
                </div>
            </div>
        </div>
    </div>

    <!-- Modal MFI -->
    <div id='modalMFI' class='modal'>
        <div class='modal-content'>
            <div class='modal-header'>
                <h2>üí∞ MFI - Money Flow Index</h2>
                <span class='close-modal' onclick='closeModal("modalMFI")'>&times;</span>
            </div>
            <div class='modal-body'>
                <h3>What is MFI?</h3>
                <p>The <span class='key-term'>Money Flow Index</span> is a volume-weighted version of RSI that measures buying and selling pressure. It's often called the "volume-weighted RSI".</p>
                
                <h3>Mathematical Calculation</h3>
                <div class='formula-box'>
                    <strong>Step 1: Calculate Typical Price</strong><br>
                    Typical Price = (High + Low + Close) / 3<br><br>
                    
                    <strong>Step 2: Calculate Money Flow</strong><br>
                    Money Flow = Typical Price √ó Volume<br><br>
                    
                    <strong>Step 3: Identify Positive/Negative Money Flow (14 periods)</strong><br>
                    If Typical Price(today) > Typical Price(yesterday):<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;Positive Money Flow = Money Flow<br>
                    Else:<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;Negative Money Flow = Money Flow<br><br>
                    
                    <strong>Step 4: Calculate Money Flow Ratio</strong><br>
                    Money Flow Ratio = (14-period Positive MF) / (14-period Negative MF)<br><br>
                    
                    <strong>Step 5: Calculate MFI</strong><br>
                    MFI = 100 - [100 / (1 + Money Flow Ratio)]<br><br>
                    
                    <strong>Range:</strong> 0 to 100
                </div>
                
                <h3>How to Interpret</h3>
                <ul>
                    <li><strong>MFI > 80:</strong> OVERBOUGHT - Strong selling pressure expected</li>
                    <li><strong>MFI < 20:</strong> OVERSOLD - Strong buying pressure expected</li>
                    <li><strong>MFI > 50:</strong> Positive money flow - buyers in control</li>
                    <li><strong>MFI < 50:</strong> Negative money flow - sellers in control</li>
                </ul>
                
                <h3>Advanced Signals</h3>
                <ul>
                    <li><strong>Bullish Divergence:</strong> Price makes lower low, MFI makes higher low ‚Üí Buy signal</li>
                    <li><strong>Bearish Divergence:</strong> Price makes higher high, MFI makes lower high ‚Üí Sell signal</li>
                    <li><strong>Failure Swing:</strong> MFI goes above 80, drops below 80, rallies but fails to exceed 80 = top</li>
                </ul>
                
                <div class='tip-box'>
                    üí° <strong>Pro Tip:</strong> MFI is superior to RSI when volume is significant. Use it for stocks with high trading volume. Divergences are extremely powerful signals.
                </div>
            </div>
        </div>
    </div>

    <!-- Modal CCI -->
    <div id='modalCCI' class='modal'>
        <div class='modal-content'>
            <div class='modal-header'>
                <h2>üìä CCI - Commodity Channel Index</h2>
                <span class='close-modal' onclick='closeModal("modalCCI")'>&times;</span>
            </div>
            <div class='modal-body'>
                <h3>What is CCI?</h3>
                <p>Developed by Donald Lambert, the <span class='key-term'>Commodity Channel Index</span> measures the variation of price from its statistical mean. Despite its name, it works on all instruments, not just commodities.</p>
                
                <h3>Mathematical Calculation</h3>
                <div class='formula-box'>
                    <strong>Default Period: 20</strong><br><br>
                    
                    <strong>Step 1: Calculate Typical Price</strong><br>
                    TP = (High + Low + Close) / 3<br><br>
                    
                    <strong>Step 2: Calculate SMA of Typical Price</strong><br>
                    SMA(TP) = 20-period Simple Moving Average of TP<br><br>
                    
                    <strong>Step 3: Calculate Mean Deviation</strong><br>
                    Mean Deviation = (Œ£|TP - SMA(TP)|) / 20<br><br>
                    
                    <strong>Step 4: Calculate CCI</strong><br>
                    CCI = (TP - SMA(TP)) / (0.015 √ó Mean Deviation)<br><br>
                    
                    <em>Note: 0.015 is a constant to ensure ~70-80% of values fall between -100 and +100</em>
                </div>
                
                <h3>How to Interpret</h3>
                <ul>
                    <li><strong>CCI > +100:</strong> OVERBOUGHT - Price unusually high, potential reversal</li>
                    <li><strong>CCI < -100:</strong> OVERSOLD - Price unusually low, potential reversal</li>
                    <li><strong>CCI crossing above 0:</strong> Bullish signal</li>
                    <li><strong>CCI crossing below 0:</strong> Bearish signal</li>
                    <li><strong>CCI > +200:</strong> Extreme overbought - very strong reversal signal</li>
                    <li><strong>CCI < -200:</strong> Extreme oversold - very strong reversal signal</li>
                </ul>
                
                <h3>Trading Strategies</h3>
                <ul>
                    <li><strong>Basic Strategy:</strong> Buy when CCI crosses above -100, sell when crosses below +100</li>
                    <li><strong>Extreme Strategy:</strong> Buy when CCI < -200, sell when CCI > +200</li>
                    <li><strong>Trend Following:</strong> Use CCI crossover of 0 line for trend direction</li>
                </ul>
                
                <div class='tip-box'>
                    üí° <strong>Pro Tip:</strong> CCI is unbounded (no fixed range), so extreme readings (+300, -300) indicate very strong trends. Don't fight these moves!
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Ultimate Oscillator -->
    <div id='modalUltimate' class='modal'>
        <div class='modal-content'>
            <div class='modal-header'>
                <h2>üéØ Ultimate Oscillator</h2>
                <span class='close-modal' onclick='closeModal("modalUltimate")'>&times;</span>
            </div>
            <div class='modal-body'>
                <h3>What is the Ultimate Oscillator?</h3>
                <p>Developed by Larry Williams, the <span class='key-term'>Ultimate Oscillator</span> is a momentum oscillator that uses weighted averages of three different timeframes to reduce false signals and volatility.</p>
                
                <h3>Mathematical Calculation</h3>
                <div class='formula-box'>
                    <strong>Default Periods: 7, 14, 28</strong><br><br>
                    
                    <strong>Step 1: Calculate Buying Pressure (BP) and True Range (TR)</strong><br>
                    BP = Close - MIN(Low, Previous Close)<br>
                    TR = MAX(High, Previous Close) - MIN(Low, Previous Close)<br><br>
                    
                    <strong>Step 2: Calculate Averages for each timeframe</strong><br>
                    Avg7 = (Sum of 7-period BP) / (Sum of 7-period TR)<br>
                    Avg14 = (Sum of 14-period BP) / (Sum of 14-period TR)<br>
                    Avg28 = (Sum of 28-period BP) / (Sum of 28-period TR)<br><br>
                    
                    <strong>Step 3: Calculate Ultimate Oscillator</strong><br>
                    UO = 100 √ó [(4 √ó Avg7) + (2 √ó Avg14) + Avg28] / (4 + 2 + 1)<br><br>
                    
                    <strong>Range:</strong> 0 to 100
                </div>
                
                <h3>How to Interpret</h3>
                <ul>
                    <li><strong>UO > 70:</strong> Overbought - potential sell signal</li>
                    <li><strong>UO < 30:</strong> Oversold - potential buy signal</li>
                    <li><strong>Bullish Divergence:</strong> Price makes lower low, UO makes higher low ‚Üí Buy</li>
                    <li><strong>Bearish Divergence:</strong> Price makes higher high, UO makes lower high ‚Üí Sell</li>
                </ul>
                
                <h3>Larry Williams' Buy Signal (3 conditions)</h3>
                <ol>
                    <li>Bullish divergence occurs (price makes lower low, UO makes higher low)</li>
                    <li>During divergence, UO falls below 30</li>
                    <li>UO then rises above the high reached during the divergence</li>
                </ol>
                
                <div class='tip-box'>
                    üí° <strong>Pro Tip:</strong> The multi-timeframe approach makes this oscillator less prone to false signals than single-period oscillators like RSI or Stochastic.
                </div>
            </div>
        </div>
    </div>

    <!-- Modal ROC -->
    <div id='modalROC' class='modal'>
        <div class='modal-content'>
            <div class='modal-header'>
                <h2>üìà ROC - Rate of Change</h2>
                <span class='close-modal' onclick='closeModal("modalROC")'>&times;</span>
            </div>
            <div class='modal-body'>
                <h3>What is ROC?</h3>
                <p>The <span class='key-term'>Rate of Change</span> is a pure momentum oscillator that measures the percentage change in price from one period to another. It's one of the simplest yet most effective momentum indicators.</p>
                
                <h3>Mathematical Calculation</h3>
                <div class='formula-box'>
                    <strong>Default Period: 12</strong><br><br>
                    
                    <strong>Formula:</strong><br>
                    ROC = [(Close(today) - Close(n periods ago)) / Close(n periods ago)] √ó 100<br><br>
                    
                    <strong>Example (12-period ROC):</strong><br>
                    Today's Close = $150<br>
                    Close 12 days ago = $140<br>
                    ROC = [($150 - $140) / $140] √ó 100 = 7.14%<br><br>
                    
                    <strong>Range:</strong> Unbounded (typically -50% to +50%)
                </div>
                
                <h3>How to Interpret</h3>
                <ul>
                    <li><strong>ROC > 0:</strong> Positive momentum - price trending up</li>
                    <li><strong>ROC < 0:</strong> Negative momentum - price trending down</li>
                    <li><strong>ROC crossing above 0:</strong> Bullish momentum shift - Buy signal</li>
                    <li><strong>ROC crossing below 0:</strong> Bearish momentum shift - Sell signal</li>
                    <li><strong>ROC > +10%:</strong> Strong upward momentum</li>
                    <li><strong>ROC < -10%:</strong> Strong downward momentum</li>
                </ul>
                
                <h3>Advanced Applications</h3>
                <ul>
                    <li><strong>Divergence:</strong> Price makes new high but ROC doesn't ‚Üí Bearish divergence</li>
                    <li><strong>Overbought/Oversold:</strong> Extreme ROC values (>+15%, <-15%) suggest reversal</li>
                    <li><strong>Trend Confirmation:</strong> Sustained positive ROC confirms uptrend</li>
                    <li><strong>Momentum Comparison:</strong> Compare ROC across multiple stocks for relative strength</li>
                </ul>
                
                <div class='tip-box'>
                    üí° <strong>Pro Tip:</strong> ROC is excellent for comparing momentum across different stocks. Use 9-period for short-term, 25-period for medium-term analysis.
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Stochastic -->
    <div id='modalStochastic' class='modal'>
        <div class='modal-content'>
            <div class='modal-header'>
                <h2>üìà Stochastic Oscillator</h2>
                <span class='close-modal' onclick='closeModal("modalStochastic")'>&times;</span>
            </div>
            <div class='modal-body'>
                <h3>What is the Stochastic Oscillator?</h3>
                <p>The <span class='key-term'>Stochastic Oscillator</span> is a momentum indicator developed by George Lane that compares a particular closing price to a range of prices over a certain period. It shows where the current price stands relative to recent highs and lows.</p>
                
                <h3>Mathematical Calculation</h3>
                <div class='formula-box'>
                    <strong>Default Period: 14</strong><br><br>
                    
                    <strong>Step 1: Calculate %K (Fast Stochastic)</strong><br>
                    %K = [(Current Close - Lowest Low) / (Highest High - Lowest Low)] √ó 100<br><br>
                    
                    Where:<br>
                    - Current Close = Most recent closing price<br>
                    - Lowest Low = Lowest low over the last 14 periods<br>
                    - Highest High = Highest high over the last 14 periods<br><br>
                    
                    <strong>Step 2: Calculate %D (Slow Stochastic)</strong><br>
                    %D = 3-period Simple Moving Average of %K<br><br>
                    
                    <strong>Range:</strong> 0 to 100
                </div>
                
                <h3>How to Interpret</h3>
                <ul>
                    <li><strong>%K above 80:</strong> Overbought zone - potential sell signal (price near recent highs)</li>
                    <li><strong>%K below 20:</strong> Oversold zone - potential buy signal (price near recent lows)</li>
                    <li><strong>%K crosses above %D:</strong> Bullish signal - momentum shifting up</li>
                    <li><strong>%K crosses below %D:</strong> Bearish signal - momentum shifting down</li>
                    <li><strong>%K and %D both above 80:</strong> Strong overbought condition</li>
                    <li><strong>%K and %D both below 20:</strong> Strong oversold condition</li>
                </ul>
                
                <h3>Trading Strategies</h3>
                <ul>
                    <li><strong>Overbought/Oversold:</strong> Sell when %K crosses below 80, buy when %K crosses above 20</li>
                    <li><strong>Crossover:</strong> Buy when %K crosses above %D (especially below 20), sell when crosses below</li>
                    <li><strong>Divergence:</strong> Price makes new high but Stochastic doesn't = bearish divergence (reversal)</li>
                    <li><strong>Bull/Bear Setup:</strong> Wait for both lines to be in extreme zones before trading</li>
                </ul>
                
                <div class='warning-box'>
                    ‚ö† <strong>Warning:</strong> In strong trends, Stochastic can remain overbought (>80) or oversold (<20) for extended periods. Don't blindly sell just because it's overbought in a strong uptrend!
                </div>
                
                <div class='tip-box'>
                    üí° <strong>Pro Tip:</strong> Combine Stochastic with trend indicators like ADX. Only take overbought signals in downtrends and oversold signals in uptrends. This dramatically reduces false signals.
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Williams -->
    <div id='modalWilliams' class='modal'>
        <div class='modal-content'>
            <div class='modal-header'>
                <h2>üìâ Williams %R</h2>
                <span class='close-modal' onclick='closeModal("modalWilliams")'>&times;</span>
            </div>
            <div class='modal-body'>
                <h3>What is Williams %R?</h3>
                <p>The <span class='key-term'>Williams %R</span> (Williams Percent Range) is a momentum indicator developed by Larry Williams that measures overbought/oversold levels. It's essentially an inverted Stochastic Oscillator, ranging from 0 to -100.</p>
                
                <h3>Mathematical Calculation</h3>
                <div class='formula-box'>
                    <strong>Default Period: 14</strong><br><br>
                    
                    <strong>Formula:</strong><br>
                    Williams %R = [(Highest High - Close) / (Highest High - Lowest Low)] √ó -100<br><br>
                    
                    Where:<br>
                    - Highest High = Highest high over the last 14 periods<br>
                    - Lowest Low = Lowest low over the last 14 periods<br>
                    - Close = Most recent closing price<br><br>
                    
                    <strong>Range:</strong> 0 to -100 (inverted scale)
                </div>
                
                <h3>How to Interpret</h3>
                <ul>
                    <li><strong>-20 to 0:</strong> OVERBOUGHT zone - price near recent highs, consider selling</li>
                    <li><strong>-80 to -100:</strong> OVERSOLD zone - price near recent lows, consider buying</li>
                    <li><strong>-50:</strong> Centerline - neutral zone (equilibrium)</li>
                    <li><strong>Williams %R crossing above -80:</strong> Bullish signal - exiting oversold</li>
                    <li><strong>Williams %R crossing below -20:</strong> Bearish signal - exiting overbought</li>
                </ul>
                
                <h3>Trading Strategies</h3>
                <ul>
                    <li><strong>Overbought Exit:</strong> Sell when Williams %R crosses below -20 from above</li>
                    <li><strong>Oversold Entry:</strong> Buy when Williams %R crosses above -80 from below</li>
                    <li><strong>Divergence:</strong> Price makes new low but Williams %R makes higher low = bullish reversal</li>
                    <li><strong>Failure Swing:</strong> Williams %R fails to reach -20 in uptrend = weakness</li>
                </ul>
                
                <h3>Williams %R vs Stochastic</h3>
                <ul>
                    <li><strong>Similarity:</strong> Both measure position within recent range</li>
                    <li><strong>Difference:</strong> Williams %R is inverted (0 to -100 vs 0 to 100)</li>
                    <li><strong>Advantage:</strong> Williams %R has no smoothing, more responsive to price changes</li>
                    <li><strong>Disadvantage:</strong> More sensitive = more false signals</li>
                </ul>
                
                <div class='tip-box'>
                    üí° <strong>Pro Tip:</strong> Use Williams %R for short-term trading (scalping, day trading). For longer timeframes, Stochastic with %D smoothing is more reliable. Combine with volume analysis for best results.
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Ichimoku -->
    <div id='modalIchimoku' class='modal'>
        <div class='modal-content'>
            <div class='modal-header'>
                <h2>‚òÅ Ichimoku Cloud</h2>
                <span class='close-modal' onclick='closeModal("modalIchimoku")'>&times;</span>
            </div>
            <div class='modal-body'>
                <h3>What is Ichimoku Cloud?</h3>
                <p>The <span class='key-term'>Ichimoku Kinko Hyo</span> (equilibrium chart at a glance) is a comprehensive indicator that defines support/resistance, identifies trend direction, gauges momentum, and provides trading signals.</p>
                
                <h3>Components</h3>
                <ul>
                    <li><strong>Tenkan-sen (Conversion Line):</strong> (9-period high + 9-period low) / 2</li>
                    <li><strong>Kijun-sen (Base Line):</strong> (26-period high + 26-period low) / 2</li>
                    <li><strong>Senkou Span A (Leading Span A):</strong> (Tenkan-sen + Kijun-sen) / 2, plotted 26 periods ahead</li>
                    <li><strong>Senkou Span B (Leading Span B):</strong> (52-period high + 52-period low) / 2, plotted 26 periods ahead</li>
                    <li><strong>Chikou Span (Lagging Span):</strong> Current closing price plotted 26 periods back</li>
                    <li><strong>Kumo (Cloud):</strong> Area between Senkou Span A and B</li>
                </ul>
                
                <h3>Mathematical Calculation</h3>
                <div class='formula-box'>
                    <strong>Tenkan-sen (Conversion Line):</strong><br>
                    Tenkan = (Highest High + Lowest Low) / 2 over last 9 periods<br><br>
                    
                    <strong>Kijun-sen (Base Line):</strong><br>
                    Kijun = (Highest High + Lowest Low) / 2 over last 26 periods<br><br>
                    
                    <strong>Senkou Span A (Leading Span A):</strong><br>
                    Span A = (Tenkan + Kijun) / 2, plotted 26 periods ahead<br><br>
                    
                    <strong>Senkou Span B (Leading Span B):</strong><br>
                    Span B = (Highest High + Lowest Low) / 2 over last 52 periods, plotted 26 periods ahead<br><br>
                    
                    <strong>Chikou Span (Lagging Span):</strong><br>
                    Chikou = Current Close, plotted 26 periods back
                </div>
                
                <h3>How to Interpret</h3>
                <ul>
                    <li><strong>Price above Cloud:</strong> Bullish trend (buy zone) - cloud acts as support</li>
                    <li><strong>Price below Cloud:</strong> Bearish trend (sell zone) - cloud acts as resistance</li>
                    <li><strong>Price in Cloud:</strong> Consolidation/ranging market - no clear trend</li>
                    <li><strong>Tenkan crosses above Kijun:</strong> Bullish signal (TK cross or golden cross)</li>
                    <li><strong>Tenkan crosses below Kijun:</strong> Bearish signal (death cross)</li>
                    <li><strong>Green Cloud (Span A > Span B):</strong> Bullish support zone</li>
                    <li><strong>Red Cloud (Span A < Span B):</strong> Bearish resistance zone</li>
                    <li><strong>Thick Cloud:</strong> Strong support/resistance</li>
                    <li><strong>Thin Cloud:</strong> Weak support/resistance (easier to break)</li>
                </ul>
                
                <h3>Advanced Trading Signals</h3>
                <ul>
                    <li><strong>Strong Buy:</strong> Price above cloud + Tenkan above Kijun + Chikou above price (26 periods ago)</li>
                    <li><strong>Strong Sell:</strong> Price below cloud + Tenkan below Kijun + Chikou below price (26 periods ago)</li>
                    <li><strong>Cloud Breakout:</strong> Price breaking through cloud = strong momentum signal</li>
                    <li><strong>Kumo Twist:</strong> Span A crosses Span B = potential trend reversal ahead</li>
                </ul>
                
                <div class='tip-box'>
                    üí° <strong>Pro Tip:</strong> Ichimoku works best on daily charts and in trending markets. The cloud provides future support/resistance levels since it's plotted 26 periods ahead. Avoid using it in choppy, sideways markets.
                </div>
                
                <div class='warning-box'>
                    ‚ö† <strong>Warning:</strong> Ichimoku can generate false signals in ranging markets. Always wait for price to be clearly above or below the cloud before taking positions.
                </div>
            </div>
        </div>
    </div>

    <!-- Modal ADX -->
    <div id='modalADX' class='modal'>
        <div class='modal-content'>
            <div class='modal-header'>
                <h2>üí™ ADX - Average Directional Index</h2>
                <span class='close-modal' onclick='closeModal("modalADX")'>&times;</span>
            </div>
            <div class='modal-body'>
                <h3>What is ADX?</h3>
                <p>The <span class='key-term'>Average Directional Index (ADX)</span> is a trend strength indicator developed by J. Welles Wilder. It measures the strength of a trend, regardless of direction. ADX does NOT tell you if the trend is up or down, only HOW STRONG it is.</p>
                
                <h3>Components</h3>
                <ul>
                    <li><strong>ADX Line:</strong> Trend strength (0-100) - the main indicator</li>
                    <li><strong>+DI (Plus Directional Indicator):</strong> Upward movement strength</li>
                    <li><strong>-DI (Minus Directional Indicator):</strong> Downward movement strength</li>
                </ul>
                
                <h3>Mathematical Calculation</h3>
                <div class='formula-box'>
                    <strong>Default Period: 14</strong><br><br>
                    
                    <strong>Step 1: Calculate True Range (TR)</strong><br>
                    TR = MAX of:<br>
                    - (High - Low)<br>
                    - |High - Previous Close|<br>
                    - |Low - Previous Close|<br><br>
                    
                    <strong>Step 2: Calculate Directional Movement (+DM, -DM)</strong><br>
                    +DM = High - Previous High (if positive and > -DM, else 0)<br>
                    -DM = Previous Low - Low (if positive and > +DM, else 0)<br><br>
                    
                    <strong>Step 3: Calculate Smoothed TR, +DM, -DM</strong><br>
                    Smoothed TR‚ÇÅ‚ÇÑ = Sum of first 14 TR / 14<br>
                    Smoothed TR = (Previous Smoothed TR √ó 13 + Current TR) / 14<br><br>
                    
                    <strong>Step 4: Calculate +DI and -DI</strong><br>
                    +DI‚ÇÅ‚ÇÑ = (Smoothed +DM‚ÇÅ‚ÇÑ / Smoothed TR‚ÇÅ‚ÇÑ) √ó 100<br>
                    -DI‚ÇÅ‚ÇÑ = (Smoothed -DM‚ÇÅ‚ÇÑ / Smoothed TR‚ÇÅ‚ÇÑ) √ó 100<br><br>
                    
                    <strong>Step 5: Calculate DX (Directional Index)</strong><br>
                    DX = (|+DI‚ÇÅ‚ÇÑ - -DI‚ÇÅ‚ÇÑ| / |+DI‚ÇÅ‚ÇÑ + -DI‚ÇÅ‚ÇÑ|) √ó 100<br><br>
                    
                    <strong>Step 6: Calculate ADX</strong><br>
                    ADX = 14-period Smoothed Average of DX
                </div>
                
                <h3>How to Interpret</h3>
                <ul>
                    <li><strong>ADX < 20:</strong> WEAK TREND or NO TREND - ranging market, avoid trend-following strategies</li>
                    <li><strong>ADX 20-25:</strong> Trend is developing - watch for confirmation</li>
                    <li><strong>ADX > 25:</strong> STRONG TREND - good for trend-following strategies</li>
                    <li><strong>ADX > 40:</strong> VERY STRONG TREND - powerful directional movement</li>
                    <li><strong>ADX > 50:</strong> EXTREMELY STRONG TREND - rare, exceptional trend strength</li>
                    <li><strong>ADX rising:</strong> Trend strengthening (regardless of direction)</li>
                    <li><strong>ADX falling:</strong> Trend weakening (consolidation likely)</li>
                </ul>
                
                <h3>Trading with +DI and -DI</h3>
                <ul>
                    <li><strong>+DI above -DI + ADX > 25:</strong> STRONG UPTREND - go long</li>
                    <li><strong>-DI above +DI + ADX > 25:</strong> STRONG DOWNTREND - go short</li>
                    <li><strong>+DI crosses above -DI:</strong> Potential uptrend starting (wait for ADX > 20)</li>
                    <li><strong>-DI crosses above +DI:</strong> Potential downtrend starting</li>
                    <li><strong>Both DI lines below 20:</strong> Very weak trend, choppy market</li>
                </ul>
                
                <h3>Trading Strategies</h3>
                <ul>
                    <li><strong>Trend Confirmation:</strong> Only trade in direction when ADX > 25</li>
                    <li><strong>Avoid Whipsaws:</strong> Stay out when ADX < 20 (use range-trading strategies instead)</li>
                    <li><strong>Peak ADX:</strong> When ADX peaks and starts falling = trend exhaustion, prepare for reversal</li>
                    <li><strong>ADX + MA:</strong> Combine with moving averages (ADX > 25 + price above 200 SMA = strong uptrend)</li>
                </ul>
                
                <div class='tip-box'>
                    üí° <strong>Pro Tip:</strong> ADX is a LAGGING indicator - it confirms trends after they've started. Use it to filter trades: only take trend-following setups when ADX > 25, and only take mean-reversion setups when ADX < 20.
                </div>
                
                <div class='warning-box'>
                    ‚ö† <strong>Warning:</strong> ADX does NOT tell you trend direction! Always look at +DI/-DI or price action to determine if trend is up or down. A high ADX (>40) can occur in both strong uptrends AND downtrends.
                </div>
            </div>
        </div>
    </div>

    <!-- Modal SAR -->
    <div id='modalSAR' class='modal'>
        <div class='modal-content'>
            <div class='modal-header'>
                <h2>üéØ Parabolic SAR</h2>
                <span class='close-modal' onclick='closeModal("modalSAR")'>&times;</span>
            </div>
            <div class='modal-body'>
                <h3>What is Parabolic SAR?</h3>
                <p>The <span class='key-term'>Parabolic SAR</span> (Stop And Reverse) is a trend-following indicator developed by J. Welles Wilder. It provides entry/exit points and trailing stop levels. The "dots" appear below price in uptrends and above price in downtrends.</p>
                
                <h3>Mathematical Calculation</h3>
                <div class='formula-box'>
                    <strong>Default Settings:</strong><br>
                    - AF (Acceleration Factor) Start: 0.02<br>
                    - AF Maximum: 0.20<br>
                    - AF Increment: 0.02<br><br>
                    
                    <strong>Formula:</strong><br>
                    SAR(today) = SAR(yesterday) + AF √ó [EP - SAR(yesterday)]<br><br>
                    
                    Where:<br>
                    - SAR = Stop And Reverse point<br>
                    - AF = Acceleration Factor (starts at 0.02, increases by 0.02 each time EP is updated, max 0.20)<br>
                    - EP = Extreme Point (highest high in uptrend, lowest low in downtrend)<br><br>
                    
                    <strong>Uptrend Rules:</strong><br>
                    - SAR is below price<br>
                    - If price touches SAR, switch to downtrend<br>
                    - Each period, if new high is made, increase AF by 0.02 (max 0.20)<br><br>
                    
                    <strong>Downtrend Rules:</strong><br>
                    - SAR is above price<br>
                    - If price touches SAR, switch to uptrend<br>
                    - Each period, if new low is made, increase AF by 0.02 (max 0.20)
                </div>
                
                <h3>How to Interpret</h3>
                <ul>
                    <li><strong>Dots below price:</strong> UPTREND - stay long, dots act as trailing stop</li>
                    <li><strong>Dots above price:</strong> DOWNTREND - stay short, dots act as resistance</li>
                    <li><strong>Dots flip from below to above:</strong> SELL SIGNAL - trend reversal to downtrend</li>
                    <li><strong>Dots flip from above to below:</strong> BUY SIGNAL - trend reversal to uptrend</li>
                    <li><strong>Dots accelerating (getting closer to price):</strong> Trend is strengthening</li>
                    <li><strong>Dots far from price:</strong> Strong, established trend</li>
                </ul>
                
                <h3>Trading Strategies</h3>
                <ul>
                    <li><strong>Trend Following:</strong> Buy when dots flip below, sell when flip above</li>
                    <li><strong>Trailing Stop:</strong> Use SAR dots as dynamic stop-loss levels</li>
                    <li><strong>Exit Strategy:</strong> Exit long when price touches SAR from above</li>
                    <li><strong>SAR + ADX:</strong> Only trade SAR signals when ADX > 25 (strong trend)</li>
                    <li><strong>SAR + MA:</strong> Confirm SAR buy signal when price is above 200 SMA</li>
                </ul>
                
                <h3>Acceleration Factor (AF) Explained</h3>
                <ul>
                    <li><strong>Start Value (0.02):</strong> Conservative initial step</li>
                    <li><strong>Increment (0.02):</strong> Each new extreme point increases sensitivity</li>
                    <li><strong>Max Value (0.20):</strong> Prevents SAR from moving too fast</li>
                    <li><strong>Effect:</strong> SAR accelerates as trend continues (parabolic curve)</li>
                    <li><strong>Customization:</strong> Lower max AF (0.10) = slower, fewer signals; Higher (0.30) = faster, more signals</li>
                </ul>
                
                <div class='warning-box'>
                    ‚ö† <strong>Warning:</strong> Parabolic SAR generates MANY false signals in sideways, choppy markets. It's designed for trending markets only. Expect whipsaws when ADX < 20.
                </div>
                
                <div class='tip-box'>
                    üí° <strong>Pro Tip:</strong> Combine SAR with trend strength indicators like ADX. Only take SAR signals when ADX > 25. In ranging markets, ignore SAR completely and use oscillators like RSI instead. SAR works BEST on daily charts in strong trends.
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Aroon -->
    <div id='modalAroon' class='modal'>
        <div class='modal-content'>
            <div class='modal-header'>
                <h2>üìä Aroon Indicator</h2>
                <span class='close-modal' onclick='closeModal("modalAroon")'>&times;</span>
            </div>
            <div class='modal-body'>
                <h3>What is the Aroon Indicator?</h3>
                <p>Developed by Tushar Chande, the <span class='key-term'>Aroon Indicator</span> (Sanskrit for "dawn's early light") identifies when trends are likely to begin and measures trend strength.</p>
                
                <h3>Mathematical Calculation</h3>
                <div class='formula-box'>
                    <strong>Default Period: 25</strong><br><br>
                    
                    <strong>Aroon Up Formula:</strong><br>
                    Aroon Up = [(25 - Periods Since 25-period High) / 25] √ó 100<br><br>
                    
                    <strong>Aroon Down Formula:</strong><br>
                    Aroon Down = [(25 - Periods Since 25-period Low) / 25] √ó 100<br><br>
                    
                    <strong>Example:</strong><br>
                    25-period high occurred 3 days ago:<br>
                    Aroon Up = [(25 - 3) / 25] √ó 100 = 88%<br><br>
                    
                    25-period low occurred 15 days ago:<br>
                    Aroon Down = [(25 - 15) / 25] √ó 100 = 40%<br><br>
                    
                    <strong>Range:</strong> 0 to 100 (for both indicators)
                </div>
                
                <h3>How to Interpret</h3>
                <ul>
                    <li><strong>Aroon Up > 70 & Aroon Down < 30:</strong> STRONG UPTREND</li>
                    <li><strong>Aroon Down > 70 & Aroon Up < 30:</strong> STRONG DOWNTREND</li>
                    <li><strong>Aroon Up crosses above Aroon Down:</strong> Bullish signal - uptrend starting</li>
                    <li><strong>Aroon Down crosses above Aroon Up:</strong> Bearish signal - downtrend starting</li>
                    <li><strong>Both indicators below 50:</strong> Consolidation - no clear trend</li>
                    <li><strong>Aroon Up = 100:</strong> New 25-period high TODAY (very strong)</li>
                    <li><strong>Aroon Down = 100:</strong> New 25-period low TODAY (very weak)</li>
                </ul>
                
                <h3>Aroon Oscillator (Optional)</h3>
                <div class='formula-box'>
                    Aroon Oscillator = Aroon Up - Aroon Down<br>
                    Range: -100 to +100<br><br>
                    > +50: Strong uptrend<br>
                    < -50: Strong downtrend
                </div>
                
                <div class='tip-box'>
                    üí° <strong>Pro Tip:</strong> Aroon is excellent for identifying the START of new trends. Use it before ADX, which only confirms existing trends.
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Moving Averages -->
    <div id='modalMovingAverages' class='modal'>
        <div class='modal-content'>
            <div class='modal-header'>
                <h2>üìà Moving Averages - Multiple Timeframes</h2>
                <span class='close-modal' onclick='closeModal("modalMovingAverages")'>&times;</span>
            </div>
            <div class='modal-body'>
                <h3>What are Moving Averages?</h3>
                <p><span class='key-term'>Moving Averages</span> smooth price data to identify trend direction. They are the foundation of technical analysis and used by 90% of traders worldwide.</p>
                
                <h3>Types of Moving Averages</h3>
                
                <h4>1. Simple Moving Average (SMA)</h4>
                <div class='formula-box'>
                    <strong>Formula:</strong><br>
                    SMA = (P‚ÇÅ + P‚ÇÇ + P‚ÇÉ + ... + P‚Çô) / n<br><br>
                    
                    <strong>Example (5-day SMA):</strong><br>
                    Prices: 100, 102, 101, 103, 105<br>
                    SMA = (100 + 102 + 101 + 103 + 105) / 5 = 102.2
                </div>
                
                <h4>2. Exponential Moving Average (EMA)</h4>
                <div class='formula-box'>
                    <strong>Formula:</strong><br>
                    Multiplier = 2 / (Period + 1)<br>
                    EMA = [Close - EMA(previous)] √ó Multiplier + EMA(previous)<br><br>
                    
                    <strong>Characteristics:</strong><br>
                    - Gives MORE weight to recent prices<br>
                    - More responsive to price changes than SMA<br>
                    - Preferred for short-term trading
                </div>
                
                <h3>Common Periods Used</h3>
                <ul>
                    <li><strong>SMA 20:</strong> Short-term trend (1 month)</li>
                    <li><strong>SMA 50:</strong> Medium-term trend (2.5 months)</li>
                    <li><strong>SMA 200:</strong> Long-term trend (10 months) - "Line in the sand"</li>
                    <li><strong>EMA 9:</strong> Very short-term momentum</li>
                    <li><strong>EMA 21:</strong> Short-term trend with more responsiveness</li>
                </ul>
                
                <h3>How to Interpret</h3>
                <ul>
                    <li><strong>Price above MA:</strong> Uptrend - bullish</li>
                    <li><strong>Price below MA:</strong> Downtrend - bearish</li>
                    <li><strong>MA sloping up:</strong> Trend is up</li>
                    <li><strong>MA sloping down:</strong> Trend is down</li>
                    <li><strong>MA flat:</strong> Consolidation/ranging</li>
                </ul>
                
                <h3>üåü Golden Cross & Death Cross</h3>
                <div class='formula-box'>
                    <strong>Golden Cross (BULLISH):</strong><br>
                    SMA 50 crosses ABOVE SMA 200<br>
                    ‚Üí Major buy signal, start of long-term uptrend<br><br>
                    
                    <strong>Death Cross (BEARISH):</strong><br>
                    SMA 50 crosses BELOW SMA 200<br>
                    ‚Üí Major sell signal, start of long-term downtrend
                </div>
                
                <h3>Perfect MA Alignment (Strongest Signal)</h3>
                <ul>
                    <li><strong>Bullish Alignment:</strong> Price > EMA 9 > EMA 21 > SMA 50 > SMA 200</li>
                    <li><strong>Bearish Alignment:</strong> Price < EMA 9 < EMA 21 < SMA 50 < SMA 200</li>
                </ul>
                
                <h3>Trading Strategies</h3>
                <ul>
                    <li><strong>Support/Resistance:</strong> MAs act as dynamic support in uptrends, resistance in downtrends</li>
                    <li><strong>Pullback Entry:</strong> In uptrend, buy when price pulls back to SMA 20 or SMA 50</li>
                    <li><strong>Crossover:</strong> Buy when fast MA crosses above slow MA</li>
                    <li><strong>200 SMA Rule:</strong> Only buy when price is above SMA 200 (stay on right side of trend)</li>
                </ul>
                
                <div class='tip-box'>
                    üí° <strong>Pro Tip:</strong> The SMA 200 is watched by EVERY institutional trader. When price breaks above/below it, expect massive volume. Golden/Death crosses are among the most reliable signals in all of technical analysis.
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Linear Regression -->
    <div id='modalLinearRegression' class='modal'>
        <div class='modal-content'>
            <div class='modal-header'>
                <h2>üìâ Linear Regression Channel</h2>
                <span class='close-modal' onclick='closeModal("modalLinearRegression")'>&times;</span>
            </div>
            <div class='modal-body'>
                <h3>What is Linear Regression?</h3>
                <p><span class='key-term'>Linear Regression</span> is a statistical tool that finds the best-fit line through price data. It identifies the dominant trend and potential support/resistance levels.</p>
                
                <h3>Mathematical Calculation</h3>
                <div class='formula-box'>
                    <strong>Default Period: 100</strong><br><br>
                    
                    <strong>Step 1: Linear Regression Formula (Least Squares Method)</strong><br>
                    For data points (x, y), find the line y = mx + b where:<br><br>
                    
                    Slope (m) = [n(Œ£xy) - (Œ£x)(Œ£y)] / [n(Œ£x¬≤) - (Œ£x)¬≤]<br>
                    Intercept (b) = [Œ£y - m(Œ£x)] / n<br><br>
                    
                    Where:<br>
                    - x = period number (0, 1, 2, ...)<br>
                    - y = closing price<br>
                    - n = number of periods<br><br>
                    
                    <strong>Step 2: Calculate Standard Deviation</strong><br>
                    For each point, calculate deviation from regression line<br>
                    Standard Deviation (œÉ) = ‚àö[Œ£(Price - Regression)¬≤ / n]<br><br>
                    
                    <strong>Step 3: Draw Channel</strong><br>
                    Upper Channel = Regression Line + (2 √ó œÉ)<br>
                    Middle Line = Regression Line<br>
                    Lower Channel = Regression Line - (2 √ó œÉ)
                </div>
                
                <h3>How to Interpret</h3>
                <ul>
                    <li><strong>Positive Slope:</strong> UPTREND - slope > 0.5 is strong</li>
                    <li><strong>Negative Slope:</strong> DOWNTREND - slope < -0.5 is strong</li>
                    <li><strong>Near-Zero Slope:</strong> SIDEWAYS - no clear trend</li>
                    <li><strong>Price above Middle Line:</strong> Bullish bias</li>
                    <li><strong>Price below Middle Line:</strong> Bearish bias</li>
                </ul>
                
                <h3>Channel Trading</h3>
                <ul>
                    <li><strong>Price at Upper Channel:</strong> Overbought - potential sell/short</li>
                    <li><strong>Price at Lower Channel:</strong> Oversold - potential buy/cover</li>
                    <li><strong>Price breaking above Upper Channel:</strong> Very strong momentum - breakout</li>
                    <li><strong>Price breaking below Lower Channel:</strong> Very weak - breakdown</li>
                    <li><strong>Channel narrowing:</strong> Volatility decreasing</li>
                    <li><strong>Channel widening:</strong> Volatility increasing</li>
                </ul>
                
                <h3>Advanced Applications</h3>
                <ul>
                    <li><strong>Trend Strength:</strong> Steeper slope = stronger trend</li>
                    <li><strong>Mean Reversion:</strong> When price deviates from line, expect return to mean</li>
                    <li><strong>Breakout Confirmation:</strong> Wait for price to break channel AND slope to change</li>
                    <li><strong>Multi-Timeframe:</strong> Use on daily + weekly for best accuracy</li>
                </ul>
                
                <div class='tip-box'>
                    üí° <strong>Pro Tip:</strong> Linear regression is OBJECTIVE - it removes emotion. The slope tells you the trend direction mathematically. Use 100-period for swing trading, 50-period for day trading.
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Keltner Channels -->
    <div id='modalKeltner' class='modal'>
        <div class='modal-content'>
            <div class='modal-header'>
                <h2>üìä Keltner Channels</h2>
                <span class='close-modal' onclick='closeModal("modalKeltner")'>&times;</span>
            </div>
            <div class='modal-body'>
                <h3>What are Keltner Channels?</h3>
                <p>Developed by Chester Keltner, <span class='key-term'>Keltner Channels</span> are volatility-based envelopes set above and below an exponential moving average. Unlike Bollinger Bands, they use ATR instead of standard deviation.</p>
                
                <h3>Mathematical Calculation</h3>
                <div class='formula-box'>
                    <strong>Default Settings: 20-period EMA, 2√ó ATR</strong><br><br>
                    
                    <strong>Step 1: Calculate Middle Line</strong><br>
                    Middle Line = 20-period EMA of Close<br><br>
                    
                    <strong>Step 2: Calculate ATR</strong><br>
                    TR = MAX[(High - Low), |High - Previous Close|, |Low - Previous Close|]<br>
                    ATR(14) = 14-period Average of True Range<br><br>
                    
                    <strong>Step 3: Calculate Channels</strong><br>
                    Upper Channel = EMA + (2 √ó ATR)<br>
                    Lower Channel = EMA - (2 √ó ATR)<br>
                </div>
                
                <h3>How to Interpret</h3>
                <ul>
                    <li><strong>Price touches Upper Channel:</strong> Overbought - potential resistance</li>
                    <li><strong>Price touches Lower Channel:</strong> Oversold - potential support</li>
                    <li><strong>Price above Middle Line:</strong> Bullish trend</li>
                    <li><strong>Price below Middle Line:</strong> Bearish trend</li>
                    <li><strong>Breakout above Upper Channel:</strong> Very strong bullish signal (continuation likely)</li>
                    <li><strong>Breakdown below Lower Channel:</strong> Very strong bearish signal</li>
                </ul>
                
                <h3>Keltner vs Bollinger Bands</h3>
                <ul>
                    <li><strong>Keltner:</strong> Uses ATR (actual volatility) - smoother, less reactive</li>
                    <li><strong>Bollinger:</strong> Uses Std Dev (statistical) - more reactive to price spikes</li>
                    <li><strong>Strategy:</strong> When Bollinger Bands expand outside Keltner Channels = extreme volatility</li>
                </ul>
                
                <div class='tip-box'>
                    üí° <strong>Pro Tip:</strong> Use Keltner Channels for trend-following strategies. When price consistently stays above upper channel, it's a strong uptrend - don't fight it!
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Donchian Channels -->
    <div id='modalDonchian' class='modal'>
        <div class='modal-content'>
            <div class='modal-header'>
                <h2>üìà Donchian Channels</h2>
                <span class='close-modal' onclick='closeModal("modalDonchian")'>&times;</span>
            </div>
            <div class='modal-body'>
                <h3>What are Donchian Channels?</h3>
                <p>Developed by Richard Donchian, <span class='key-term'>Donchian Channels</span> are formed by the highest high and lowest low over a specified period. Used by the famous Turtle Traders.</p>
                
                <h3>Mathematical Calculation</h3>
                <div class='formula-box'>
                    <strong>Default Period: 20</strong><br><br>
                    
                    <strong>Upper Channel:</strong><br>
                    Highest High over the last 20 periods<br><br>
                    
                    <strong>Lower Channel:</strong><br>
                    Lowest Low over the last 20 periods<br><br>
                    
                    <strong>Middle Line (optional):</strong><br>
                    (Upper Channel + Lower Channel) / 2
                </div>
                
                <h3>How to Interpret</h3>
                <ul>
                    <li><strong>Price breaks above Upper Channel:</strong> BREAKOUT - Strong buy signal (new 20-period high)</li>
                    <li><strong>Price breaks below Lower Channel:</strong> BREAKDOWN - Strong sell signal (new 20-period low)</li>
                    <li><strong>Price near Upper Channel:</strong> Strong uptrend - resistance level</li>
                    <li><strong>Price near Lower Channel:</strong> Strong downtrend - support level</li>
                    <li><strong>Narrow channel:</strong> Low volatility - breakout imminent</li>
                    <li><strong>Wide channel:</strong> High volatility - strong trending market</li>
                </ul>
                
                <h3>Turtle Trading Rules</h3>
                <ul>
                    <li><strong>System 1 (Aggressive):</strong> Enter long on 20-day high breakout, exit on 10-day low</li>
                    <li><strong>System 2 (Conservative):</strong> Enter long on 55-day high breakout, exit on 20-day low</li>
                    <li><strong>Principle:</strong> "Trade the breakouts" - follow new highs/lows</li>
                </ul>
                
                <div class='tip-box'>
                    üí° <strong>Pro Tip:</strong> Donchian Channels are THE indicator for breakout trading. When price makes a new 20-period high, it's a powerful momentum signal. This is how the Turtles made millions!
                </div>
            </div>
        </div>
    </div>

    <!-- Modal OBV -->
    <div id='modalOBV' class='modal'>
        <div class='modal-content'>
            <div class='modal-header'>
                <h2>üìä On-Balance Volume (OBV)</h2>
                <span class='close-modal' onclick='closeModal("modalOBV")'>&times;</span>
            </div>
            <div class='modal-body'>
                <h3>What is OBV?</h3>
                <p>The <span class='key-term'>On-Balance Volume</span> is a cumulative volume-based indicator developed by Joe Granville that measures buying and selling pressure. The theory is that volume precedes price - smart money shows up in volume before moving price.</p>
                
                <h3>Mathematical Calculation</h3>
                <div class='formula-box'>
                    <strong>Formula (Simple yet Powerful):</strong><br><br>
                    
                    If Close(today) > Close(yesterday):<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;OBV(today) = OBV(yesterday) + Volume(today)<br><br>
                    
                    If Close(today) < Close(yesterday):<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;OBV(today) = OBV(yesterday) - Volume(today)<br><br>
                    
                    If Close(today) = Close(yesterday):<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;OBV(today) = OBV(yesterday)<br><br>
                    
                    Starting Value: OBV(1) = Volume(1)
                </div>
                
                <h3>How to Interpret</h3>
                <ul>
                    <li><strong>OBV rising + Price rising:</strong> HEALTHY UPTREND - strong buying pressure confirms price move</li>
                    <li><strong>OBV falling + Price falling:</strong> HEALTHY DOWNTREND - strong selling pressure confirms move</li>
                    <li><strong>OBV rising + Price falling:</strong> BULLISH DIVERGENCE - accumulation happening, reversal up likely</li>
                    <li><strong>OBV falling + Price rising:</strong> BEARISH DIVERGENCE - distribution happening, reversal down likely</li>
                    <li><strong>OBV breaking resistance:</strong> Price likely to follow (volume leading price)</li>
                    <li><strong>OBV flat during price rise:</strong> Weak uptrend, lacks volume support</li>
                </ul>
                
                <h3>Divergence Signals (Most Powerful Use)</h3>
                <ul>
                    <li><strong>Bullish Divergence Example:</strong>
                        <ul>
                            <li>Price: Makes lower low (e.g., $100 ‚Üí $95 ‚Üí $90)</li>
                            <li>OBV: Makes higher low (accumulation despite falling price)</li>
                            <li>Signal: Smart money buying = bullish reversal coming</li>
                        </ul>
                    </li>
                    <li><strong>Bearish Divergence Example:</strong>
                        <ul>
                            <li>Price: Makes higher high (e.g., $100 ‚Üí $110 ‚Üí $115)</li>
                            <li>OBV: Makes lower high (distribution despite rising price)</li>
                            <li>Signal: Smart money selling = bearish reversal coming</li>
                        </ul>
                    </li>
                </ul>
                
                <h3>Trading Strategies</h3>
                <ul>
                    <li><strong>Trend Confirmation:</strong> Only take long trades when OBV is rising, short when falling</li>
                    <li><strong>Breakout Confirmation:</strong> Wait for both price AND OBV to break resistance</li>
                    <li><strong>Divergence Trading:</strong> Enter reversal trades when divergence appears at key levels</li>
                    <li><strong>Volume Thrust:</strong> Strong OBV spike + price breakout = high probability move</li>
                </ul>
                
                <h3>OBV vs Price - The 4 Scenarios</h3>
                <div class='formula-box'>
                    <strong>Scenario 1:</strong> Price ‚Üë + OBV ‚Üë = ‚úÖ Strong Uptrend (Trade with trend)<br>
                    <strong>Scenario 2:</strong> Price ‚Üì + OBV ‚Üì = ‚úÖ Strong Downtrend (Trade with trend)<br>
                    <strong>Scenario 3:</strong> Price ‚Üë + OBV ‚Üì = ‚ö† Bearish Divergence (Prepare to sell)<br>
                    <strong>Scenario 4:</strong> Price ‚Üì + OBV ‚Üë = ‚ö† Bullish Divergence (Prepare to buy)
                </div>
                
                <div class='tip-box'>
                    üí° <strong>Pro Tip:</strong> OBV is one of the BEST leading indicators. When OBV diverges from price, trust the volume - it usually precedes price reversal by days or weeks. Draw trendlines on BOTH price and OBV to spot divergences early. OBV works exceptionally well on stocks with high trading volume.
                </div>
                
                <div class='warning-box'>
                    ‚ö† <strong>Warning:</strong> OBV doesn't work well on low-volume stocks or during low-volume periods (e.g., holidays). Always check if volume is significant before trusting OBV signals. Use with other confirmation indicators.
                </div>
            </div>
        </div>
    </div>

    <!-- Modal CMF -->
    <div id='modalCMF' class='modal'>
        <div class='modal-content'>
            <div class='modal-header'>
                <h2>üíß CMF - Chaikin Money Flow</h2>
                <span class='close-modal' onclick='closeModal("modalCMF")'>&times;</span>
            </div>
            <div class='modal-body'>
                <h3>What is Chaikin Money Flow?</h3>
                <p>Developed by Marc Chaikin, <span class='key-term'>CMF</span> measures the amount of Money Flow Volume over a specific period. It identifies buying and selling pressure.</p>
                
                <h3>Mathematical Calculation</h3>
                <div class='formula-box'>
                    <strong>Default Period: 20</strong><br><br>
                    
                    <strong>Step 1: Calculate Money Flow Multiplier</strong><br>
                    MFM = [(Close - Low) - (High - Close)] / (High - Low)<br>
                    Range: -1 to +1<br><br>
                    
                    <strong>Step 2: Calculate Money Flow Volume</strong><br>
                    MFV = MFM √ó Volume<br><br>
                    
                    <strong>Step 3: Calculate CMF</strong><br>
                    CMF = (20-period Sum of MFV) / (20-period Sum of Volume)<br><br>
                    
                    <strong>Range:</strong> -1 to +1 (or -100% to +100%)
                </div>
                
                <h3>How to Interpret</h3>
                <ul>
                    <li><strong>CMF > +0.05:</strong> STRONG BUYING PRESSURE - Accumulation phase</li>
                    <li><strong>CMF < -0.05:</strong> STRONG SELLING PRESSURE - Distribution phase</li>
                    <li><strong>CMF > 0:</strong> Buyers in control (positive money flow)</li>
                    <li><strong>CMF < 0:</strong> Sellers in control (negative money flow)</li>
                    <li><strong>CMF crossing above 0:</strong> Bullish signal - accumulation starting</li>
                    <li><strong>CMF crossing below 0:</strong> Bearish signal - distribution starting</li>
                </ul>
                
                <h3>Advanced Signals</h3>
                <ul>
                    <li><strong>Bullish Divergence:</strong> Price makes lower low, CMF makes higher low ‚Üí Reversal up</li>
                    <li><strong>Bearish Divergence:</strong> Price makes higher high, CMF makes lower high ‚Üí Reversal down</li>
                    <li><strong>CMF + Price Confirmation:</strong> Rising price + rising CMF = strong uptrend</li>
                </ul>
                
                <div class='tip-box'>
                    üí° <strong>Pro Tip:</strong> CMF is more reliable than OBV because it considers WHERE the price closes within the range, not just up/down. Use it to confirm trends and spot institutional accumulation/distribution.
                </div>
            </div>
        </div>
    </div>

    <!-- Modal ATR -->
    <div id='modalATR' class='modal'>
        <div class='modal-content'>
            <div class='modal-header'>
                <h2>üìè Average True Range (ATR)</h2>
                <span class='close-modal' onclick='closeModal("modalATR")'>&times;</span>
            </div>
            <div class='modal-body'>
                <h3>What is ATR?</h3>
                <p>The <span class='key-term'>Average True Range</span> is a volatility indicator developed by J. Welles Wilder. It measures market volatility by decomposing the entire range of price movement for a period. ATR does NOT indicate trend direction, only volatility.</p>
                
                <h3>Mathematical Calculation</h3>
                <div class='formula-box'>
                    <strong>Default Period: 14</strong><br><br>
                    
                    <strong>Step 1: Calculate True Range (TR)</strong><br>
                    TR = MAX of:<br>
                    - (High - Low) = Current period's range<br>
                    - |High - Previous Close| = Gap up scenario<br>
                    - |Low - Previous Close| = Gap down scenario<br><br>
                    
                    <strong>Why 3 values?</strong><br>
                    Simple High-Low misses gaps. TR captures the FULL volatility including overnight moves.<br><br>
                    
                    <strong>Step 2: Calculate ATR (14-period)</strong><br>
                    First ATR = (Sum of first 14 TR) / 14<br><br>
                    
                    Subsequent ATR = [(Previous ATR √ó 13) + Current TR] / 14<br>
                    (Smoothed moving average - Wilder's method)
                </div>
                
                <h3>How to Interpret</h3>
                <ul>
                    <li><strong>High ATR:</strong> HIGH VOLATILITY - larger price swings, wider stops needed</li>
                    <li><strong>Low ATR:</strong> LOW VOLATILITY - smaller movements, tighter stops possible</li>
                    <li><strong>Rising ATR:</strong> Volatility INCREASING - expect bigger moves (breakout or breakdown)</li>
                    <li><strong>Falling ATR:</strong> Volatility DECREASING - consolidation, range-bound</li>
                    <li><strong>ATR spike:</strong> Panic or excitement - extreme volatility event</li>
                    <li><strong>ATR plateau:</strong> Volatility stabilizing at new level</li>
                </ul>
                
                <h3>Practical Applications (Why ATR Matters)</h3>
                
                <h4>1. Stop Loss Placement</h4>
                <ul>
                    <li><strong>Conservative:</strong> Stop = Entry ¬± (2 √ó ATR)</li>
                    <li><strong>Standard:</strong> Stop = Entry ¬± (1.5 √ó ATR)</li>
                    <li><strong>Aggressive:</strong> Stop = Entry ¬± (1 √ó ATR)</li>
                    <li><strong>Logic:</strong> ATR-based stops adapt to market conditions (wider in volatile markets)</li>
                </ul>
                
                <h4>2. Position Sizing</h4>
                <div class='formula-box'>
                    Position Size = (Account Risk $) / (ATR √ó Multiplier)<br><br>
                    
                    Example:<br>
                    - Account: $100,000<br>
                    - Risk per trade: 1% = $1,000<br>
                    - ATR: $2.50<br>
                    - Stop: 2√ó ATR = $5.00<br>
                    - Position Size: $1,000 / $5.00 = 200 shares
                </div>
                
                <h4>3. Profit Targets</h4>
                <ul>
                    <li><strong>Conservative Target:</strong> Entry + (2 √ó ATR)</li>
                    <li><strong>Aggressive Target:</strong> Entry + (3 √ó ATR)</li>
                    <li><strong>Swing Trade:</strong> Entry + (5 √ó ATR)</li>
                </ul>
                
                <h4>4. Breakout Confirmation</h4>
                <ul>
                    <li>Low ATR + tight consolidation = volatility squeeze</li>
                    <li>ATR starting to rise = breakout likely imminent</li>
                    <li>ATR spike on breakout = confirmation of strong move</li>
                </ul>
                
                <h3>ATR Across Different Markets</h3>
                <ul>
                    <li><strong>Stocks:</strong> ATR varies widely (compare ATR to price, not absolute values)</li>
                    <li><strong>Forex:</strong> ATR in pips - use for stop placement</li>
                    <li><strong>Crypto:</strong> Extremely high ATR - very volatile</li>
                    <li><strong>Indices:</strong> Lower ATR than individual stocks</li>
                </ul>
                
                <h3>Trading Strategies</h3>
                <ul>
                    <li><strong>Chandelier Exit:</strong> Stop = Highest High - (3 √ó ATR) in uptrends</li>
                    <li><strong>Volatility Breakout:</strong> Buy when price moves > 1 ATR from open</li>
                    <li><strong>Mean Reversion:</strong> Fade moves > 2.5 ATR from moving average</li>
                    <li><strong>Turtle Trading:</strong> Position size based on ATR (risk parity)</li>
                </ul>
                
                <div class='tip-box'>
                    üí° <strong>Pro Tip:</strong> NEVER use fixed dollar/point stops! Always use ATR-based stops that adapt to market volatility. A $1 stop might be too tight in a volatile stock (ATR = $3) but too wide in a stable stock (ATR = $0.50). Professional traders ALWAYS consider ATR for risk management.
                </div>
                
                <div class='warning-box'>
                    ‚ö† <strong>Warning:</strong> ATR is NOT directional! High ATR doesn't mean "buy" or "sell", it just means volatility. Also, ATR is a LAGGING indicator - it measures past volatility, not future. Use it for risk management, not trade signals.
                </div>
            </div>
        </div>
    </div>

    <!-- Modal VWAP -->
    <div id='modalVWAP' class='modal'>
        <div class='modal-content'>
            <div class='modal-header'>
                <h2>‚öñ VWAP - Volume Weighted Average Price</h2>
                <span class='close-modal' onclick='closeModal("modalVWAP")'>&times;</span>
            </div>
            <div class='modal-body'>
                <h3>What is VWAP?</h3>
                <p>The <span class='key-term'>Volume Weighted Average Price</span> is a trading benchmark that represents the average price a security has traded at throughout the day, based on both volume AND price. It's the "fair value" price where most institutional trading occurred.</p>
                
                <h3>Mathematical Calculation</h3>
                <div class='formula-box'>
                    <strong>Formula:</strong><br>
                    VWAP = Œ£(Typical Price √ó Volume) / Œ£(Volume)<br><br>
                    
                    Where:<br>
                    Typical Price = (High + Low + Close) / 3<br><br>
                    
                    <strong>Step-by-Step Calculation:</strong><br><br>
                    
                    For each period (e.g., 1-minute bar):<br>
                    1. Calculate Typical Price = (H + L + C) / 3<br>
                    2. Calculate TP √ó Volume<br>
                    3. Keep running total of (TP √ó Volume)<br>
                    4. Keep running total of Volume<br>
                    5. VWAP = Cumulative (TP √ó Volume) / Cumulative Volume<br><br>
                    
                    <strong>Example (first 3 minutes of trading):</strong><br>
                    Min 1: TP = $100, Vol = 1000 ‚Üí TP√óVol = $100,000<br>
                    Min 2: TP = $101, Vol = 1500 ‚Üí TP√óVol = $151,500<br>
                    Min 3: TP = $99, Vol = 2000 ‚Üí TP√óVol = $198,000<br><br>
                    
                    Cumulative TP√óVol = $449,500<br>
                    Cumulative Volume = 4,500<br>
                    VWAP = $449,500 / 4,500 = $99.89
                </div>
                
                <h3>How to Interpret</h3>
                <ul>
                    <li><strong>Price above VWAP:</strong> BULLISH - buyers in control, institutional support</li>
                    <li><strong>Price below VWAP:</strong> BEARISH - sellers in control, institutional resistance</li>
                    <li><strong>Price at VWAP:</strong> FAIR VALUE - equilibrium, maximum liquidity point</li>
                    <li><strong>Price touching VWAP:</strong> Support in uptrends, resistance in downtrends</li>
                    <li><strong>VWAP slope up:</strong> Bullish accumulation</li>
                    <li><strong>VWAP slope down:</strong> Bearish distribution</li>
                </ul>
                
                <h3>VWAP Standard Deviation Bands</h3>
                <div class='formula-box'>
                    <strong>Standard Deviation (œÉ) of VWAP:</strong><br>
                    œÉ = ‚àö[Œ£(Volume √ó (Price - VWAP)¬≤) / Œ£(Volume)]<br><br>
                    
                    <strong>Bands:</strong><br>
                    Upper Band 1 = VWAP + 1œÉ<br>
                    Upper Band 2 = VWAP + 2œÉ<br>
                    Upper Band 3 = VWAP + 3œÉ<br><br>
                    
                    Lower Band 1 = VWAP - 1œÉ<br>
                    Lower Band 2 = VWAP - 2œÉ<br>
                    Lower Band 3 = VWAP - 3œÉ<br><br>
                    
                    <strong>Interpretation:</strong><br>
                    - Price at ¬±1œÉ: Normal range (68% of price action)<br>
                    - Price at ¬±2œÉ: Overbought/Oversold (95% of price action)<br>
                    - Price at ¬±3œÉ: EXTREME - mean reversion likely (99.7%)
                </div>
                
                <h3>Why Institutions Use VWAP</h3>
                <ul>
                    <li><strong>Benchmark:</strong> Institutional traders must beat VWAP to show good execution</li>
                    <li><strong>Large Orders:</strong> Algo trading spreads orders to achieve VWAP price</li>
                    <li><strong>Performance:</strong> Buying below VWAP = good fill, above = poor fill</li>
                    <li><strong>Transparency:</strong> Shows if you're overpaying or getting a deal</li>
                </ul>
                
                <h3>Trading Strategies</h3>
                
                <h4>Strategy 1: VWAP Fade (Mean Reversion)</h4>
                <ul>
                    <li>When price reaches +2œÉ band ‚Üí SHORT (overbought)</li>
                    <li>When price reaches -2œÉ band ‚Üí LONG (oversold)</li>
                    <li>Target: Return to VWAP</li>
                    <li>Stop: Beyond +3œÉ or -3œÉ</li>
                    <li>Best in ranging markets</li>
                </ul>
                
                <h4>Strategy 2: VWAP Breakout (Trend Following)</h4>
                <ul>
                    <li>Wait for price to consolidate near VWAP</li>
                    <li>If price breaks ABOVE VWAP with volume ‚Üí LONG</li>
                    <li>VWAP becomes support</li>
                    <li>Target: +1œÉ, then +2œÉ</li>
                    <li>Stop: Back below VWAP</li>
                </ul>
                
                <h4>Strategy 3: VWAP Pullback (Best Setup)</h4>
                <ul>
                    <li>Uptrend: Price above VWAP, pulls back to VWAP, bounces ‚Üí BUY</li>
                    <li>Downtrend: Price below VWAP, rallies to VWAP, rejects ‚Üí SELL</li>
                    <li>VWAP acts as dynamic support/resistance</li>
                    <li>High probability when combined with 15-min/1-hour trend</li>
                </ul>
                
                <h4>Strategy 4: Opening Range + VWAP</h4>
                <ul>
                    <li>First 30 minutes: If price opens ABOVE VWAP ‚Üí bullish bias</li>
                    <li>Look for long entries when price dips to VWAP</li>
                    <li>Reverse for opens below VWAP (bearish bias)</li>
                </ul>
                
                <h3>VWAP vs Moving Averages</h3>
                <ul>
                    <li><strong>Moving Average:</strong> Based on TIME (equally weights each period)</li>
                    <li><strong>VWAP:</strong> Based on VOLUME (weights periods with high volume more heavily)</li>
                    <li><strong>Reset:</strong> VWAP resets daily (starts fresh each day at market open)</li>
                    <li><strong>Intraday Use:</strong> VWAP is for DAY TRADING, MA is for swing trading</li>
                </ul>
                
                <h3>Best Timeframes & Markets</h3>
                <ul>
                    <li><strong>Timeframe:</strong> Works on ALL intraday charts (1-min, 5-min, 15-min)</li>
                    <li><strong>Best for:</strong> Stocks, futures, forex with HIGH VOLUME</li>
                    <li><strong>Avoid:</strong> Low-volume stocks, after-hours trading, illiquid markets</li>
                    <li><strong>Reset Period:</strong> Daily VWAP is standard (resets at market open)</li>
                </ul>
                
                <div class='tip-box'>
                    üí° <strong>Pro Tip:</strong> VWAP is the KING of intraday trading indicators. Institutions move billions using VWAP algos, creating self-fulfilling support/resistance. Watch the first touch of VWAP after a strong move - it often bounces. If VWAP is sloping up all day, stay LONG. Volume Profile's POC + VWAP confluence = strongest intraday level.
                </div>
                
                <div class='warning-box'>
                    ‚ö† <strong>Warning:</strong> VWAP is ONLY for intraday trading - it resets every day. Don't use VWAP for swing trading or position trading (use moving averages instead). On low-volume days or during lunch hours (11:30am-1:30pm EST), VWAP becomes less reliable. Always check if volume is significant.
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Volume Profile -->
    <div id='modalVolumeProfile' class='modal'>
        <div class='modal-content'>
            <div class='modal-header'>
                <h2>üìä Volume Profile - Price Distribution</h2>
                <span class='close-modal' onclick='closeModal("modalVolumeProfile")'>&times;</span>
            </div>
            <div class='modal-body'>
                <h3>What is Volume Profile?</h3>
                <p><span class='key-term'>Volume Profile</span> is an advanced charting tool that displays trading activity over a specified time period at specified price levels. It shows WHERE the most volume traded.</p>
                
                <h3>Key Components</h3>
                <ul>
                    <li><strong>POC (Point of Control):</strong> Price level with HIGHEST traded volume - peak of histogram</li>
                    <li><strong>Value Area (VA):</strong> Price range where 70% of volume traded</li>
                    <li><strong>VAH (Value Area High):</strong> Upper boundary of value area</li>
                    <li><strong>VAL (Value Area Low):</strong> Lower boundary of value area</li>
                    <li><strong>HVN (High Volume Node):</strong> Price levels with significant volume - strong support/resistance</li>
                    <li><strong>LVN (Low Volume Node):</strong> Price levels with little volume - price moves through quickly</li>
                </ul>
                
                <h3>How to Interpret</h3>
                <ul>
                    <li><strong>Price at POC:</strong> FAIR VALUE - maximum acceptance, high liquidity</li>
                    <li><strong>Price above VA:</strong> BULLISH - buyers in control</li>
                    <li><strong>Price below VA:</strong> BEARISH - sellers in control</li>
                    <li><strong>Price approaching POC:</strong> Expect support/resistance</li>
                    <li><strong>Price in LVN:</strong> Fast movement expected (low liquidity)</li>
                    <li><strong>Price in HVN:</strong> Consolidation expected (high liquidity)</li>
                </ul>
                
                <h3>Trading Strategies</h3>
                <ul>
                    <li><strong>Mean Reversion:</strong> When price moves far from POC, expect return to POC</li>
                    <li><strong>Breakout Trading:</strong> Price breaking above VAH or below VAL = strong signal</li>
                    <li><strong>Support/Resistance:</strong> Use HVN levels as support/resistance zones</li>
                    <li><strong>Trend Confirmation:</strong> POC rising = uptrend, POC falling = downtrend</li>
                </ul>
                
                <div class='tip-box'>
                    üí° <strong>Pro Tip:</strong> Volume Profile is used by institutional traders to identify fair value. The POC acts like a magnet - price often returns to it. HVN levels are STRONG support/resistance.
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Elder Ray -->
    <div id='modalElderRay' class='modal'>
        <div class='modal-content'>
            <div class='modal-header'>
                <h2>‚öñ Elder Ray Index - Bull & Bear Power</h2>
                <span class='close-modal' onclick='closeModal("modalElderRay")'>&times;</span>
            </div>
            <div class='modal-body'>
                <h3>What is the Elder Ray Index?</h3>
                <p>Developed by Dr. Alexander Elder, this indicator measures the <span class='key-term'>power of bulls and bears</span> in the market by comparing price extremes to an exponential moving average.</p>
                
                <h3>Mathematical Calculation</h3>
                <div class='formula-box'>
                    <strong>Default: 13-period EMA</strong><br><br>
                    
                    <strong>Bull Power Formula:</strong><br>
                    Bull Power = High - EMA(13)<br><br>
                    
                    <strong>Bear Power Formula:</strong><br>
                    Bear Power = Low - EMA(13)<br><br>
                    
                    <strong>Interpretation:</strong><br>
                    Bull Power > 0: Bulls pushing above average<br>
                    Bear Power < 0: Bears pushing below average
                </div>
                
                <h3>How to Interpret</h3>
                <ul>
                    <li><strong>Both Bull & Bear Power > 0:</strong> STRONG BULLS - Uptrend (Buy)</li>
                    <li><strong>Both Bull & Bear Power < 0:</strong> STRONG BEARS - Downtrend (Sell)</li>
                    <li><strong>Bull Power > 0, Bear Power < 0:</strong> Mixed signals - consolidation</li>
                    <li><strong>Bull Power rising:</strong> Bulls gaining strength</li>
                    <li><strong>Bear Power falling:</strong> Bears gaining strength</li>
                </ul>
                
                <h3>Dr. Elder's Trading Rules</h3>
                <ul>
                    <li><strong>Buy Signal:</strong> EMA rising + Bear Power negative but rising + Bull Power positive</li>
                    <li><strong>Sell Signal:</strong> EMA falling + Bull Power positive but falling + Bear Power negative</li>
                    <li><strong>Strongest Buy:</strong> Bear Power turns positive (both indicators > 0)</li>
                    <li><strong>Strongest Sell:</strong> Bull Power turns negative (both indicators < 0)</li>
                </ul>
                
                <h3>Divergence Signals</h3>
                <ul>
                    <li><strong>Bullish Divergence:</strong> Price makes lower low, Bear Power makes higher low ‚Üí Reversal up</li>
                    <li><strong>Bearish Divergence:</strong> Price makes higher high, Bull Power makes lower high ‚Üí Reversal down</li>
                </ul>
                
                <div class='tip-box'>
                    üí° <strong>Pro Tip:</strong> Elder Ray is best used WITH trend indicators. In uptrends, wait for Bear Power to become less negative for entries. In downtrends, wait for Bull Power to weaken for shorts.
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Fibonacci -->
    <div id='modalFibonacci' class='modal'>
        <div class='modal-content'>
            <div class='modal-header'>
                <h2>üåÄ Fibonacci Retracements</h2>
                <span class='close-modal' onclick='closeModal("modalFibonacci")'>&times;</span>
            </div>
            <div class='modal-body'>
                <h3>What are Fibonacci Retracements?</h3>
                <p><span class='key-term'>Fibonacci Retracements</span> are horizontal lines that indicate potential support and resistance levels based on the Fibonacci sequence discovered by mathematician Leonardo Fibonacci. Traders use these levels to identify where price might reverse during a pullback.</p>
                
                <h3>The Fibonacci Sequence & Golden Ratio</h3>
                <div class='formula-box'>
                    <strong>Fibonacci Sequence:</strong><br>
                    0, 1, 1, 2, 3, 5, 8, 13, 21, 34, 55, 89, 144, 233...<br>
                    (Each number = sum of previous two)<br><br>
                    
                    <strong>Golden Ratio (œÜ):</strong><br>
                    œÜ = 1.618 (phi)<br>
                    Appears throughout nature, art, architecture<br><br>
                    
                    <strong>Key Ratios Used in Trading:</strong><br>
                    - 0.236 = 23.6% (Square root of 0.618)<br>
                    - 0.382 = 38.2% (1 - 0.618)<br>
                    - 0.500 = 50.0% (Not Fibonacci, but psychological level)<br>
                    - 0.618 = 61.8% (THE Golden Ratio)<br>
                    - 0.786 = 78.6% (Square root of 0.618)
                </div>
                
                <h3>How to Calculate Fibonacci Levels</h3>
                <div class='formula-box'>
                    <strong>For an Uptrend (Swing Low to Swing High):</strong><br>
                    Fibonacci Level = High - [(High - Low) √ó Fibonacci Ratio]<br><br>
                    
                    Example:<br>
                    - Swing Low: $100<br>
                    - Swing High: $150<br>
                    - Range: $50<br><br>
                    
                    Levels:<br>
                    - 0%: $150 (High)<br>
                    - 23.6%: $150 - ($50 √ó 0.236) = $138.20<br>
                    - 38.2%: $150 - ($50 √ó 0.382) = $130.90<br>
                    - 50.0%: $150 - ($50 √ó 0.500) = $125.00<br>
                    - 61.8%: $150 - ($50 √ó 0.618) = $119.10 ‚≠ê<br>
                    - 78.6%: $150 - ($50 √ó 0.786) = $110.70<br>
                    - 100%: $100 (Low)
                </div>
                
                <h3>Key Levels Explained</h3>
                <ul>
                    <li><strong>23.6% Retracement:</strong> SHALLOW pullback - very strong trend, minor profit-taking</li>
                    <li><strong>38.2% Retracement:</strong> MODERATE pullback - common in strong trends, good entry point</li>
                    <li><strong>50.0% Retracement:</strong> PSYCHOLOGICAL level - not true Fibonacci, but widely watched</li>
                    <li><strong>61.8% Retracement (Golden Ratio):</strong> MOST IMPORTANT - deepest pullback in healthy trend</li>
                    <li><strong>78.6% Retracement:</strong> VERY DEEP - last chance before trend fails</li>
                    <li><strong>100% Retracement:</strong> Complete reversal - original move negated</li>
                </ul>
                
                <h3>How to Use Fibonacci Retracements</h3>
                <ul>
                    <li><strong>Uptrend Strategy:</strong>
                        <ul>
                            <li>Wait for pullback to Fib level (38.2%, 50%, or 61.8%)</li>
                            <li>Look for reversal confirmation (candlestick pattern, volume, RSI oversold)</li>
                            <li>Enter long at Fib support</li>
                            <li>Stop below next Fib level</li>
                            <li>Target: New high or Fib extension</li>
                        </ul>
                    </li>
                    <li><strong>Downtrend Strategy:</strong>
                        <ul>
                            <li>Wait for rally to Fib level</li>
                            <li>Look for reversal confirmation</li>
                            <li>Enter short at Fib resistance</li>
                        </ul>
                    </li>
                </ul>
                
                <h3>Fibonacci Extensions (Targets)</h3>
                <div class='formula-box'>
                    Used to project price targets BEYOND the original move:<br><br>
                    
                    - 127.2% Extension (1.272)<br>
                    - 161.8% Extension (1.618) ‚≠ê Most common target<br>
                    - 200.0% Extension<br>
                    - 261.8% Extension (2.618)<br><br>
                    
                    Calculation (Uptrend):<br>
                    Extension = High + [(High - Low) √ó Extension Ratio]
                </div>
                
                <h3>Confluence (Multiple Confirmations)</h3>
                <ul>
                    <li>Fib level + Previous support/resistance = STRONGER</li>
                    <li>Fib level + Moving average (50, 200 SMA) = STRONGER</li>
                    <li>Fib level + Volume profile POC = STRONGER</li>
                    <li>Fib level + Round number ($100, $50) = STRONGER</li>
                    <li>Multiple Fib levels from different swings = STRONGEST</li>
                </ul>
                
                <div class='tip-box'>
                    üí° <strong>Pro Tip:</strong> The 61.8% level is the MOST RELIABLE Fibonacci retracement. If price breaks below 61.8% support in an uptrend, the trend is likely over. Combine Fibonacci with other indicators - NEVER trade Fib levels alone! Look for confluence, candlestick patterns, and volume confirmation.
                </div>
                
                <div class='warning-box'>
                    ‚ö† <strong>Warning:</strong> Fibonacci is a SELF-FULFILLING PROPHECY - it works because millions of traders watch it. Levels are ZONES, not exact prices (allow ¬±1% tolerance). Don't force Fibonacci on every move - use only on clear, significant swings.
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Pivots -->
    <div id='modalPivots' class='modal'>
        <div class='modal-content'>
            <div class='modal-header'>
                <h2>üéØ Pivot Points</h2>
                <span class='close-modal' onclick='closeModal("modalPivots")'>&times;</span>
            </div>
            <div class='modal-body'>
                <h3>What are Pivot Points?</h3>
                <p><span class='key-term'>Pivot Points</span> are technical indicators used by floor traders to determine potential support and resistance levels for the current trading day. They are calculated using the previous period's high, low, and close prices.</p>
                
                <h3>1. Standard Pivot Points (Classic)</h3>
                <div class='formula-box'>
                    <strong>Pivot Point (P):</strong><br>
                    P = (High + Low + Close) / 3<br><br>
                    
                    <strong>Resistance Levels:</strong><br>
                    R1 = (2 √ó P) - Low<br>
                    R2 = P + (High - Low)<br>
                    R3 = High + 2 √ó (P - Low)<br><br>
                    
                    <strong>Support Levels:</strong><br>
                    S1 = (2 √ó P) - High<br>
                    S2 = P - (High - Low)<br>
                    S3 = Low - 2 √ó (High - P)<br><br>
                    
                    <strong>Example:</strong><br>
                    Yesterday: High = $110, Low = $100, Close = $108<br>
                    P = ($110 + $100 + $108) / 3 = $106<br>
                    R1 = (2 √ó $106) - $100 = $112<br>
                    S1 = (2 √ó $106) - $110 = $102
                </div>
                
                <h3>2. Fibonacci Pivot Points</h3>
                <div class='formula-box'>
                    <strong>Pivot Point (P):</strong><br>
                    P = (High + Low + Close) / 3<br><br>
                    
                    <strong>Resistance Levels (using Fib ratios):</strong><br>
                    R1 = P + [(High - Low) √ó 0.382]<br>
                    R2 = P + [(High - Low) √ó 0.618]<br>
                    R3 = P + [(High - Low) √ó 1.000]<br><br>
                    
                    <strong>Support Levels:</strong><br>
                    S1 = P - [(High - Low) √ó 0.382]<br>
                    S2 = P - [(High - Low) √ó 0.618]<br>
                    S3 = P - [(High - Low) √ó 1.000]
                </div>
                
                <h3>3. Camarilla Pivot Points</h3>
                <div class='formula-box'>
                    <strong>Formula (Tighter levels for day trading):</strong><br>
                    Range = High - Low<br><br>
                    
                    R4 = Close + (Range √ó 1.1 / 2)<br>
                    R3 = Close + (Range √ó 1.1 / 4)<br>
                    R2 = Close + (Range √ó 1.1 / 6)<br>
                    R1 = Close + (Range √ó 1.1 / 12)<br><br>
                    
                    S1 = Close - (Range √ó 1.1 / 12)<br>
                    S2 = Close - (Range √ó 1.1 / 6)<br>
                    S3 = Close - (Range √ó 1.1 / 4)<br>
                    S4 = Close - (Range √ó 1.1 / 2)<br><br>
                    
                    <strong>Note:</strong> Camarilla uses CLOSE price heavily, creating tighter clusters
                </div>
                
                <h3>How to Interpret Pivot Points</h3>
                <ul>
                    <li><strong>P (Pivot Point):</strong> FAIR VALUE - equilibrium level, most important</li>
                    <li><strong>Price above P:</strong> Bullish sentiment for the day</li>
                    <li><strong>Price below P:</strong> Bearish sentiment for the day</li>
                    <li><strong>R1, R2, R3:</strong> Resistance levels - potential sell zones</li>
                    <li><strong>S1, S2, S3:</strong> Support levels - potential buy zones</li>
                    <li><strong>R3/S3:</strong> Extreme levels - rarely reached, strong breakout if broken</li>
                </ul>
                
                <h3>Trading Strategies</h3>
                
                <h4>Strategy 1: Pivot Point Bounce (Day Trading)</h4>
                <ul>
                    <li>Wait for price to approach S1 or R1</li>
                    <li>Look for reversal signal (candlestick pattern, RSI divergence)</li>
                    <li>Enter at support (S1) for long, resistance (R1) for short</li>
                    <li>Target: Return to pivot (P)</li>
                    <li>Stop: Below S2 (long) or above R2 (short)</li>
                </ul>
                
                <h4>Strategy 2: Pivot Point Breakout</h4>
                <ul>
                    <li>If price breaks ABOVE R1 with volume ‚Üí go long</li>
                    <li>Target: R2, then R3</li>
                    <li>Stop: Below R1 (now support)</li>
                    <li>Reverse logic for breakdown below S1</li>
                </ul>
                
                <h4>Strategy 3: Opening Range (First Hour)</h4>
                <ul>
                    <li>If market opens above P ‚Üí bullish bias (look for longs at S1)</li>
                    <li>If market opens below P ‚Üí bearish bias (look for shorts at R1)</li>
                    <li>First hour of trading establishes daily tone</li>
                </ul>
                
                <h3>Which Pivot Type to Use?</h3>
                <ul>
                    <li><strong>Standard Pivots:</strong> Most popular, widely watched, good for all timeframes</li>
                    <li><strong>Fibonacci Pivots:</strong> Better for trending markets, wider levels</li>
                    <li><strong>Camarilla Pivots:</strong> Best for day trading, scalping (tighter levels)</li>
                    <li><strong>Recommendation:</strong> Use Standard for swing trading, Camarilla for day trading</li>
                </ul>
                
                <h3>Timeframes</h3>
                <ul>
                    <li><strong>Daily Pivots:</strong> Calculated from yesterday's H/L/C - for day traders</li>
                    <li><strong>Weekly Pivots:</strong> Calculated from last week's H/L/C - for swing traders</li>
                    <li><strong>Monthly Pivots:</strong> Calculated from last month's H/L/C - for position traders</li>
                    <li><strong>Yearly Pivots:</strong> Major institutional levels</li>
                </ul>
                
                <div class='tip-box'>
                    üí° <strong>Pro Tip:</strong> Pivot Points are MOST effective in ranging markets. When ADX < 20, pivots act as excellent support/resistance. In strong trends (ADX > 30), price often blows through all pivot levels. Combine pivots with Volume Profile's POC for ultimate confluence zones. Floor traders used these for DECADES before computers!
                </div>
                
                <div class='warning-box'>
                    ‚ö† <strong>Warning:</strong> Pivot points are based on PREVIOUS day's data - they don't predict the future, they show where traders are likely to react. On high-impact news days (earnings, Fed announcements), pivots become less reliable. Always check economic calendar!
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Support/Resistance -->
    <div id='modalSupportResistance' class='modal'>
        <div class='modal-content'>
            <div class='modal-header'>
                <h2>üéØ Automatic Support & Resistance Detection</h2>
                <span class='close-modal' onclick='closeModal("modalSupportResistance")'>&times;</span>
            </div>
            <div class='modal-body'>
                <h3>What is Support & Resistance?</h3>
                <p><span class='key-term'>Support and Resistance</span> are price levels where buying/selling pressure is historically concentrated. They are the most fundamental concepts in technical analysis.</p>
                
                <h3>Support (Floor)</h3>
                <ul>
                    <li><strong>Definition:</strong> Price level where demand is strong enough to prevent further decline</li>
                    <li><strong>Psychology:</strong> Buyers see value at this level and step in</li>
                    <li><strong>Behavior:</strong> Price bounces up from support</li>
                    <li><strong>Break Below:</strong> Becomes resistance (role reversal)</li>
                </ul>
                
                <h3>Resistance (Ceiling)</h3>
                <ul>
                    <li><strong>Definition:</strong> Price level where selling pressure is strong enough to prevent further rise</li>
                    <li><strong>Psychology:</strong> Sellers see price as expensive and take profits</li>
                    <li><strong>Behavior:</strong> Price bounces down from resistance</li>
                    <li><strong>Break Above:</strong> Becomes support (role reversal)</li>
                </ul>
                
                <h3>How Our Algorithm Detects Levels</h3>
                <div class='formula-box'>
                    <strong>Method: Swing High/Low Detection</strong><br><br>
                    
                    <strong>Step 1: Find Swing Highs (Resistance)</strong><br>
                    A high where:<br>
                    - High(i) > High(i-1) AND High(i) > High(i-2)<br>
                    - High(i) > High(i+1) AND High(i) > High(i+2)<br><br>
                    
                    <strong>Step 2: Find Swing Lows (Support)</strong><br>
                    A low where:<br>
                    - Low(i) < Low(i-1) AND Low(i) < Low(i-2)<br>
                    - Low(i) < Low(i+1) AND Low(i) < Low(i+2)<br><br>
                    
                    <strong>Step 3: Cluster Similar Levels</strong><br>
                    Group levels within 2% of each other<br>
                    Take average of cluster as final level
                </div>
                
                <h3>Strength of Levels</h3>
                <ul>
                    <li><strong>Number of Touches:</strong> More touches = stronger level</li>
                    <li><strong>Volume:</strong> High volume at level = stronger</li>
                    <li><strong>Time:</strong> Older levels are often stronger</li>
                    <li><strong>Round Numbers:</strong> $100, $150, $200 are psychological levels</li>
                </ul>
                
                <h3>How to Trade S/R</h3>
                <ul>
                    <li><strong>Buy at Support:</strong> When price approaches support in uptrend</li>
                    <li><strong>Sell at Resistance:</strong> When price approaches resistance in downtrend</li>
                    <li><strong>Breakout Trading:</strong> Buy when price breaks above resistance with volume</li>
                    <li><strong>Breakdown Trading:</strong> Sell when price breaks below support with volume</li>
                    <li><strong>Role Reversal:</strong> Old resistance becomes new support (and vice versa)</li>
                </ul>
                
                <h3>Confirmation Signals</h3>
                <ul>
                    <li>Wait for price to CLOSE above resistance (not just touch)</li>
                    <li>Look for increased volume on breakout</li>
                    <li>Use candlestick patterns at levels for confirmation</li>
                    <li>Check multiple timeframes for level confluence</li>
                </ul>
                
                <div class='warning-box'>
                    ‚ö† <strong>Warning:</strong> S/R levels are ZONES, not exact prices. Allow 0.5-1% flexibility. False breakouts are common - wait for confirmation.
                </div>
                
                <div class='tip-box'>
                    üí° <strong>Pro Tip:</strong> The best trades happen at the CONFLUENCE of multiple S/R levels (e.g., daily support + weekly support + 200 SMA). Stack your levels for highest probability!
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Candlestick Patterns -->
    <div id='modalCandlestickPatterns' class='modal'>
        <div class='modal-content'>
            <div class='modal-header'>
                <h2>üïØ Candlestick Pattern Recognition</h2>
                <span class='close-modal' onclick='closeModal("modalCandlestickPatterns")'>&times;</span>
            </div>
            <div class='modal-body'>
                <h3>What are Candlestick Patterns?</h3>
                <p><span class='key-term'>Candlestick Patterns</span> are formations created by one or more candlesticks that indicate potential reversals or continuations. Developed in 18th century Japan by rice trader Homma Munehisa.</p>
                
                <h3>Candlestick Anatomy</h3>
                <div class='formula-box'>
                    <strong>Components:</strong><br>
                    - <strong>Body:</strong> Range between Open and Close<br>
                    - <strong>Upper Shadow:</strong> High - max(Open, Close)<br>
                    - <strong>Lower Shadow:</strong> min(Open, Close) - Low<br>
                    - <strong>Green/White:</strong> Close > Open (Bullish)<br>
                    - <strong>Red/Black:</strong> Close < Open (Bearish)
                </div>
                
                <h3>üü¢ Bullish Reversal Patterns (20+ Detected)</h3>
                
                <h4>1. Hammer</h4>
                <ul>
                    <li><strong>Structure:</strong> Small body at top, long lower shadow (2x body), tiny upper shadow</li>
                    <li><strong>Location:</strong> Must appear at bottom of downtrend</li>
                    <li><strong>Meaning:</strong> Sellers pushed down, buyers pushed back up - reversal</li>
                    <li><strong>Confirmation:</strong> Next candle closes above hammer</li>
                </ul>
                
                <h4>2. Inverted Hammer</h4>
                <ul>
                    <li><strong>Structure:</strong> Small body at bottom, long upper shadow, tiny lower shadow</li>
                    <li><strong>Meaning:</strong> Buyers tried to push up, failed, but pressure is building</li>
                </ul>
                
                <h4>3. Bullish Engulfing</h4>
                <ul>
                    <li><strong>Structure:</strong> Small red candle followed by large green candle that engulfs it</li>
                    <li><strong>Meaning:</strong> Strong shift from bearish to bullish sentiment</li>
                    <li><strong>Strength:</strong> Larger the green candle, stronger the signal</li>
                </ul>
                
                <h4>4. Morning Star (3-candle pattern)</h4>
                <ul>
                    <li><strong>Candle 1:</strong> Long red candle (downtrend)</li>
                    <li><strong>Candle 2:</strong> Small body (indecision) - gaps down</li>
                    <li><strong>Candle 3:</strong> Long green candle closing above midpoint of candle 1</li>
                    <li><strong>Signal:</strong> VERY STRONG reversal (one of the best patterns)</li>
                </ul>
                
                <h4>5. Piercing Line</h4>
                <ul>
                    <li><strong>Structure:</strong> Red candle followed by green candle that opens below low and closes above 50% of red body</li>
                    <li><strong>Strength:</strong> The deeper into red candle it penetrates, the stronger</li>
                </ul>
                
                <h3>üî¥ Bearish Reversal Patterns</h3>
                
                <h4>1. Hanging Man</h4>
                <ul>
                    <li><strong>Structure:</strong> Identical to hammer but appears at TOP of uptrend</li>
                    <li><strong>Meaning:</strong> Sellers are starting to appear</li>
                </ul>
                
                <h4>2. Shooting Star</h4>
                <ul>
                    <li><strong>Structure:</strong> Small body at bottom, long upper shadow</li>
                    <li><strong>Location:</strong> Top of uptrend</li>
                    <li><strong>Meaning:</strong> Buyers tried to push higher but failed - reversal</li>
                </ul>
                
                <h4>3. Bearish Engulfing</h4>
                <ul>
                    <li><strong>Structure:</strong> Small green candle followed by large red candle that engulfs it</li>
                    <li><strong>Meaning:</strong> Strong shift from bullish to bearish</li>
                </ul>
                
                <h4>4. Evening Star</h4>
                <ul>
                    <li><strong>Opposite of Morning Star</strong></li>
                    <li><strong>Signal:</strong> VERY STRONG bearish reversal</li>
                </ul>
                
                <h4>5. Dark Cloud Cover</h4>
                <ul>
                    <li><strong>Structure:</strong> Green candle followed by red candle that opens above high and closes below 50% of green body</li>
                </ul>
                
                <h3>‚ö™ Indecision Patterns</h3>
                
                <h4>Doji</h4>
                <ul>
                    <li><strong>Structure:</strong> Open = Close (tiny/no body)</li>
                    <li><strong>Meaning:</strong> Perfect balance between buyers/sellers</li>
                    <li><strong>Context:</strong> At top of trend = reversal warning, at bottom = potential reversal</li>
                    <li><strong>Types:</strong> Long-legged Doji, Dragonfly Doji, Gravestone Doji</li>
                </ul>
                
                <h3>Pattern Strength Factors</h3>
                <ul>
                    <li><strong>Volume:</strong> Higher volume = stronger signal</li>
                    <li><strong>Trend Context:</strong> Patterns work best at trend extremes</li>
                    <li><strong>Support/Resistance:</strong> Patterns at S/R levels are most powerful</li>
                    <li><strong>Confirmation:</strong> Wait for next candle to confirm direction</li>
                </ul>
                
                <div class='warning-box'>
                    ‚ö† <strong>Warning:</strong> NEVER trade candlestick patterns in isolation. Always combine with:
                    - Trend analysis (is there a trend to reverse?)
                    - Support/Resistance levels
                    - Volume confirmation
                    - Other technical indicators
                </div>
                
                <div class='tip-box'>
                    üí° <strong>Pro Tip:</strong> The most reliable patterns are:
                    1. Morning Star / Evening Star (reversal)
                    2. Bullish/Bearish Engulfing (reversal)
                    3. Hammer at support / Shooting Star at resistance
                    
                    Learn these 5 patterns FIRST before others!
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Divergences -->
    <div id='modalDivergences' class='modal'>
        <div class='modal-content'>
            <div class='modal-header'>
                <h2>üîÑ Divergence Detection</h2>
                <span class='close-modal' onclick='closeModal("modalDivergences")'>&times;</span>
            </div>
            <div class='modal-body'>
                <h3>What are Divergences?</h3>
                <p><span class='key-term'>Divergences</span> occur when price and an indicator (like RSI or MACD) move in opposite directions. They are among the MOST POWERFUL reversal signals in technical analysis.</p>
                
                <h3>Types of Divergences</h3>
                
                <h4>üü¢ Regular Bullish Divergence (Reversal Signal)</h4>
                <div class='formula-box'>
                    <strong>Pattern:</strong><br>
                    - Price: Lower Low (LL)<br>
                    - Indicator: Higher Low (HL)<br><br>
                    
                    <strong>Meaning:</strong><br>
                    Price is making new lows, but momentum is weakening<br>
                    ‚Üí Downtrend is losing steam<br>
                    ‚Üí POTENTIAL REVERSAL UP<br><br>
                    
                    <strong>Action:</strong> Look for BUY opportunities<br>
                    <strong>Best Indicators:</strong> RSI, MACD, Stochastic
                </div>
                
                <h4>üî¥ Regular Bearish Divergence (Reversal Signal)</h4>
                <div class='formula-box'>
                    <strong>Pattern:</strong><br>
                    - Price: Higher High (HH)<br>
                    - Indicator: Lower High (LH)<br><br>
                    
                    <strong>Meaning:</strong><br>
                    Price is making new highs, but momentum is weakening<br>
                    ‚Üí Uptrend is losing steam<br>
                    ‚Üí POTENTIAL REVERSAL DOWN<br><br>
                    
                    <strong>Action:</strong> Look for SELL opportunities
                </div>
                
                <h4>üü¢ Hidden Bullish Divergence (Continuation Signal)</h4>
                <div class='formula-box'>
                    <strong>Pattern:</strong><br>
                    - Price: Higher Low (HL)<br>
                    - Indicator: Lower Low (LL)<br><br>
                    
                    <strong>Meaning:</strong><br>
                    Price pullback is shallow, but indicator shows strength<br>
                    ‚Üí Uptrend will CONTINUE<br><br>
                    
                    <strong>Action:</strong> Buy the dip in uptrend
                </div>
                
                <h4>üî¥ Hidden Bearish Divergence (Continuation Signal)</h4>
                <div class='formula-box'>
                    <strong>Pattern:</strong><br>
                    - Price: Lower High (LH)<br>
                    - Indicator: Higher High (HH)<br><br>
                    
                    <strong>Meaning:</strong><br>
                    Price rally is weak, but indicator shows weakness persists<br>
                    ‚Üí Downtrend will CONTINUE<br><br>
                    
                    <strong>Action:</strong> Sell the rally in downtrend
                </div>
                
                <h3>How to Identify Divergences</h3>
                <ol>
                    <li><strong>Identify Clear Trend:</strong> Need at least 2 swing highs/lows</li>
                    <li><strong>Connect Price Swings:</strong> Draw trendline connecting swing points</li>
                    <li><strong>Connect Indicator Swings:</strong> Draw trendline on same timepoints</li>
                    <li><strong>Compare Slopes:</strong> If lines diverge (opposite slopes) = divergence</li>
                </ol>
                
                <h3>Best Indicators for Divergences</h3>
                <ul>
                    <li><strong>RSI:</strong> Most reliable, clear swings</li>
                    <li><strong>MACD Histogram:</strong> Very visual, easy to spot</li>
                    <li><strong>Stochastic:</strong> Good for short-term divergences</li>
                    <li><strong>MFI:</strong> Adds volume component</li>
                    <li><strong>OBV:</strong> Volume-based divergences are powerful</li>
                </ul>
                
                <h3>Confirmation Checklist</h3>
                <ul>
                    <li>‚úÖ Clear uptrend/downtrend exists</li>
                    <li>‚úÖ At least 2 swing points visible</li>
                    <li>‚úÖ Indicator makes clear opposite move</li>
                    <li>‚úÖ Divergence at key support/resistance level</li>
                    <li>‚úÖ Volume decreasing on price move (shows weakness)</li>
                    <li>‚úÖ Candlestick reversal pattern appears</li>
                </ul>
                
                <h3>Trading Divergences</h3>
                <ul>
                    <li><strong>Entry:</strong> When price breaks trendline in direction of divergence</li>
                    <li><strong>Stop Loss:</strong> Beyond the swing high/low that created divergence</li>
                    <li><strong>Target:</strong> Previous swing point or key S/R level</li>
                    <li><strong>Confirmation:</strong> Wait for price to reverse (don't trade the divergence alone)</li>
                </ul>
                
                <h3>Common Mistakes</h3>
                <ul>
                    <li>‚ùå Trading divergences in strong trends (wait for trend exhaustion)</li>
                    <li>‚ùå Using too short timeframes (divergences work best on daily charts)</li>
                    <li>‚ùå Not waiting for confirmation (price must actually reverse)</li>
                    <li>‚ùå Ignoring the broader trend context</li>
                </ul>
                
                <div class='warning-box'>
                    ‚ö† <strong>Critical Rule:</strong> Divergences predict potential reversals but don't guarantee them. ALWAYS wait for:
                    1. Price to break the trendline
                    2. Candlestick confirmation pattern
                    3. Volume spike in reversal direction
                    
                    Never enter on divergence alone!
                </div>
                
                <div class='tip-box'>
                    üí° <strong>Pro Tip:</strong> The STRONGEST divergences occur:
                    - At key S/R levels
                    - On multiple indicators simultaneously (RSI + MACD)
                    - On higher timeframes (daily > hourly)
                    - With decreasing volume (shows trend exhaustion)
                    
                    When all 4 align, you have a HIGH PROBABILITY reversal!
                </div>
            </div>
        </div>
    </div>

    <!-- ============================================
         üìú SCRIPTS FINAUX
         ============================================ -->
    
    <!-- Core Scripts -->
    <script src='assets/js/config.js'></script>
    <script src='assets/js/api-client.js'></script>
    <script src='assets/js/dark-mode.js'></script>
    <script src='assets/js/common.js'></script>
    <script src='assets/js/sidebar.js'></script>
    
    <!-- Advanced Analysis Script -->
    <script src='assets/js/advanced-analysis.js'></script>
    
    <!-- Portfolio, Watchlist & Alerts Manager -->
    <script src='assets/js/portfolio-watchlist-alerts.js'></script>
    
    <!-- ‚úÖ MODAL FUNCTIONS - CORRIG√âES -->
    <script>
    // ============================================
    // MODAL MANAGEMENT FUNCTIONS
    // ============================================
    
    function openModal(modalId) {
        const modal = document.getElementById(modalId);
        if (modal) {
            modal.classList.add('active');
            document.body.style.overflow = 'hidden';
            console.log('‚úÖ Modal opened:', modalId);
        } else {
            console.error('‚ùå Modal not found:', modalId);
        }
    }

    function closeModal(modalId) {
        const modal = document.getElementById(modalId);
        if (modal) {
            modal.classList.remove('active');
            document.body.style.overflow = 'auto';
            console.log('‚úÖ Modal closed:', modalId);
        }
    }

    // Close modal when clicking outside
    window.addEventListener('click', (event) => {
        if (event.target.classList.contains('modal')) {
            event.target.classList.remove('active');
            document.body.style.overflow = 'auto';
            console.log('‚úÖ Modal closed by outside click');
        }
    });

    // Close modal with Escape key
    document.addEventListener('keydown', (event) => {
        if (event.key === 'Escape') {
            const activeModals = document.querySelectorAll('.modal.active');
            activeModals.forEach(modal => {
                modal.classList.remove('active');
            });
            document.body.style.overflow = 'auto';
            if (activeModals.length > 0) {
                console.log('‚úÖ Modal(s) closed by Escape key');
            }
        }
    });
    
    // ============================================
    // HELPER FUNCTIONS FOR NEW FEATURES
    // ============================================
    
    function openPortfolioHelp() {
        const helpText = `
üìÅ PORTFOLIO MANAGEMENT HELP

‚ú® Features:
‚Ä¢ Create multiple portfolios to organize your stocks
‚Ä¢ Each portfolio can track different strategies (e.g., "Growth Stocks", "Dividend Portfolio", "Tech Sector")
‚Ä¢ Switch between portfolios using the dropdown
‚Ä¢ All data is automatically saved to Firebase in real-time

üéØ How to Use:
1. Click "New Portfolio" to create a portfolio
2. Give it a meaningful name
3. Select it from the dropdown to make it active
4. Add stocks to your watchlist - they'll be saved to this portfolio
5. Create price alerts - they're portfolio-specific

üíæ Data Sync:
‚Ä¢ All portfolios sync across devices
‚Ä¢ Automatic backup to Firebase
‚Ä¢ Never lose your tracking data

‚öô Management:
‚Ä¢ Click "Manage" to rename or delete portfolios
‚Ä¢ You can have unlimited portfolios
‚Ä¢ Default portfolio is created automatically
        `;
        alert(helpText);
    }
    
    function openWatchlistHelp() {
        const helpText = `
‚≠ê WATCHLIST HELP

‚ú® Features:
‚Ä¢ Track multiple stocks in real-time
‚Ä¢ See live price changes and percentage moves
‚Ä¢ Filter by gainers/losers
‚Ä¢ One-click analysis of any stock

üéØ How to Use:
1. Type a stock symbol (e.g., AAPL) in the search box
2. Click "Add" or press Enter
3. Stock appears in your watchlist with live data
4. Click on a stock card to analyze it with all 40+ indicators
5. Remove stocks by clicking the trash icon

üìä Features:
‚Ä¢ Real-time price updates
‚Ä¢ Color-coded gains (green) and losses (red)
‚Ä¢ Quick filters: All / Gainers / Losers
‚Ä¢ Automatic sync to Firebase
‚Ä¢ Portfolio-specific (each portfolio has its own watchlist)

üí° Pro Tips:
‚Ä¢ Add stocks BEFORE market opens to track opening moves
‚Ä¢ Use "Gainers" filter to spot momentum stocks
‚Ä¢ Watchlist persists across sessions
‚Ä¢ Maximum 50 stocks per watchlist (performance)
        `;
        alert(helpText);
    }
    
    function openAlertsHelp() {
        const helpText = `
üîî PRICE ALERTS HELP

‚ú® Features:
‚Ä¢ Get notified when stocks reach your target prices
‚Ä¢ Set "above" or "below" conditions
‚Ä¢ Toggle alerts on/off without deleting
‚Ä¢ Alerts check automatically every 60 seconds

üéØ How to Use:
1. Click "Create New Alert"
2. Enter stock symbol (e.g., TSLA)
3. Choose condition: "Price goes above" or "Price goes below"
4. Enter target price (e.g., 250.00)
5. Click "Create Alert"

üìä Alert Types:
‚Ä¢ ABOVE alerts: Trigger when price crosses above target
‚Ä¢ BELOW alerts: Trigger when price crosses below target

üîî Notifications:
‚Ä¢ Browser notification when alert triggers
‚Ä¢ Email notification (if enabled in settings)
‚Ä¢ Sound alert (can be disabled)
‚Ä¢ Alert status changes to "Triggered"

‚öô Management:
‚Ä¢ Toggle alerts on/off with switch
‚Ä¢ Delete alerts individually
‚Ä¢ View triggered vs active count
‚Ä¢ Alerts are portfolio-specific

üí° Pro Tips:
‚Ä¢ Set alerts at key support/resistance levels
‚Ä¢ Use with Fibonacci retracement levels
‚Ä¢ Create both buy (below) and sell (above) alerts
‚Ä¢ Review triggered alerts regularly for opportunities
        `;
        alert(helpText);
    }
    </script>
    
    <!-- ============================================
         ‚úÖ FIX MENU UTILISATEUR - Force l'initialisation
         ============================================ -->
    <script>
        /**
         * Force l'initialisation du menu utilisateur
         * Ce script force un reset complet des event listeners
         */
        (function forceUserMenuInit() {
            console.log('üîß Force initializing user menu...');
            
            const initMenu = () => {
                const trigger = document.getElementById('sidebarUserTrigger');
                const dropdown = document.getElementById('sidebarUserDropdown');
                
                if (!trigger || !dropdown) {
                    console.error('‚ùå User menu elements not found');
                    console.error('  - sidebarUserTrigger:', !!trigger);
                    console.error('  - sidebarUserDropdown:', !!dropdown);
                    return;
                }
                
                console.log('‚úÖ User menu elements found');
                
                // Supprimer tous les anciens event listeners en clonant l'√©l√©ment
                const newTrigger = trigger.cloneNode(true);
                trigger.parentNode.replaceChild(newTrigger, trigger);
                
                // R√©cup√©rer les √©l√©ments fra√Æchement clon√©s
                const freshTrigger = document.getElementById('sidebarUserTrigger');
                const freshDropdown = document.getElementById('sidebarUserDropdown');
                
                console.log('‚úÖ Adding click event to trigger...');
                
                // Event listener principal sur le trigger
                freshTrigger.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    
                    console.log('üëÜ User menu trigger clicked!');
                    
                    const isActive = freshDropdown.classList.contains('active');
                    
                    if (isActive) {
                        freshDropdown.classList.remove('active');
                        console.log('üîΩ Closing dropdown');
                    } else {
                        freshDropdown.classList.add('active');
                        console.log('üîº Opening dropdown');
                    }
                    
                    // Animation de la fl√®che
                    const arrow = freshTrigger.querySelector('.sidebar-user-arrow');
                    if (arrow) {
                        arrow.style.transform = isActive ? 'rotate(0deg)' : 'rotate(180deg)';
                        arrow.style.transition = 'transform 0.3s ease';
                    }
                });
                
                // Fermer si on clique ailleurs
                document.addEventListener('click', function(e) {
                    if (!freshTrigger.contains(e.target) && !freshDropdown.contains(e.target)) {
                        freshDropdown.classList.remove('active');
                        const arrow = freshTrigger.querySelector('.sidebar-user-arrow');
                        if (arrow) {
                            arrow.style.transform = 'rotate(0deg)';
                        }
                    }
                });
                
                // Emp√™cher la fermeture si on clique dans le dropdown
                freshDropdown.addEventListener('click', function(e) {
                    e.stopPropagation();
                });
                
                console.log('‚úÖ User menu initialized successfully!');
            };
            
            // Initialiser au bon moment
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', initMenu);
            } else {
                // Si le DOM est d√©j√† charg√©, attendre un petit peu
                setTimeout(initMenu, 100);
            }
        })();
    </script>
    
    <!-- ‚úÖ Fonction de d√©connexion (conserv√©e) -->
    <script>
        /**
         * Fonction de d√©connexion Firebase
         */
        function logout() {
            if (confirm('Are you sure you want to disconnect?')) {
                console.log('üîì Logout requested...');
                if (typeof firebase !== 'undefined' && firebase.auth) {
                    firebase.auth().signOut().then(() => {
                        console.log('‚úÖ Firebase logout successful');
                        window.location.href = 'login.html';
                    }).catch((error) => {
                        console.error('‚ùå Logout error:', error);
                        alert('Error during logout. Please try again.');
                    });
                } else {
                    console.log('‚ö† Firebase not available, redirecting to login...');
                    window.location.href = 'login.html';
                }
            }
        }
    </script>
    
    <!-- Chatbot Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="assets/js/chatbot-config.js"></script>
    <script src="assets/js/chatbot-gemini.js"></script>
    <script src="assets/js/chatbot-analytics.js"></script>
    <script src="assets/js/chatbot-charts.js"></script>
    <script src="assets/js/chatbot-ipo-analyzer.js"></script>
    <script src="assets/js/chatbot-suggestions.js"></script>
    <script src="assets/js/chatbot-ai-engine.js"></script>
    <script src="assets/js/chatbot-ui.js"></script>
    <script src="assets/js/chatbot-particles.js"></script>

    <!-- Chatbot Initialization -->
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        const initChatbotWhenReady = () => {
            const accessDenied = sessionStorage.getItem('accessDenied') === 'true';
            if (accessDenied) {
                console.log('‚ö† Access denied - chatbot initialization skipped');
                return;
            }
            
            if (typeof ChatbotConfig === 'undefined' || typeof ChatbotUI === 'undefined') {
                console.log('‚è≥ Chatbot dependencies not ready yet...');
                return;
            }
            
            try {
                window.financialChatbot = new ChatbotUI(ChatbotConfig);
                console.log('üéâ Chatbot FinanceGPT initialized successfully');
            } catch (error) {
                console.error('‚ùå Chatbot initialization error:', error);
            }
        };
        
        setTimeout(initChatbotWhenReady, 500);
    });
    </script>

    <!-- ============================================
         üé® STYLES ADDITIONNELS POUR PATTERNS & GRIDS
         ============================================ -->
    <style>
    /* Support/Resistance Grid */
    .sr-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 2rem;
        margin-top: 1.5rem;
    }

    .sr-column h4 {
        font-size: 1.2rem;
        font-weight: 700;
        margin-bottom: 1rem;
        display: flex;
        align-items: center;
        gap: 0.5rem;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
    }

    .sr-column ul {
        list-style: none;
        padding: 0;
    }

    .sr-column li {
        background: var(--card-background);
        padding: 0.75rem 1rem;
        margin-bottom: 0.5rem;
        border-radius: 8px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-weight: 600;
        transition: all 0.3s ease;
        border-left: 3px solid transparent;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
    }

    .sr-column li:hover {
        transform: translateX(5px);
        box-shadow: 0 4px 12px rgba(102, 126, 234, 0.2);
        border-left-color: #667eea;
    }

    .distance {
        font-size: 0.9rem;
        font-weight: 500;
        opacity: 0.8;
    }

    /* Pattern & Divergence Containers */
    .patterns-container,
    .divergences-container {
        margin-top: 1.5rem;
    }

    .patterns-container table {
        width: 100%;
        border-collapse: collapse;
        background: var(--card-background);
        border-radius: 12px;
        overflow: hidden;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
    }

    .patterns-container th,
    .patterns-container td {
        padding: 1rem;
        text-align: left;
        border-bottom: 1px solid var(--border-color);
    }

    .patterns-container th {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        font-weight: 700;
        text-transform: uppercase;
        font-size: 0.9rem;
        letter-spacing: 0.5px;
    }

    .patterns-container tr:last-child td {
        border-bottom: none;
    }

    .patterns-container tr:hover {
        background: rgba(102, 126, 234, 0.05);
    }

    .strength-badge {
        display: inline-block;
        padding: 0.25rem 0.75rem;
        border-radius: 12px;
        font-size: 0.85rem;
        font-weight: 700;
        text-transform: uppercase;
    }

    .strength-badge.very-strong {
        background: linear-gradient(135deg, #10b981, #059669);
        color: white;
        box-shadow: 0 2px 8px rgba(16, 185, 129, 0.3);
    }

    .strength-badge.strong {
        background: linear-gradient(135deg, #3b82f6, #2563eb);
        color: white;
        box-shadow: 0 2px 8px rgba(59, 130, 246, 0.3);
    }

    .strength-badge.medium {
        background: linear-gradient(135deg, #f59e0b, #d97706);
        color: white;
        box-shadow: 0 2px 8px rgba(245, 158, 11, 0.3);
    }

    .divergence-item {
        background: var(--card-background);
        padding: 1rem 1.5rem;
        margin-bottom: 1rem;
        border-radius: 12px;
        border-left: 4px solid var(--border-color);
        transition: all 0.3s ease;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
    }

    .divergence-item:hover {
        transform: translateX(5px);
        box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
    }

    .divergence-item.bullish {
        border-left-color: var(--success-color);
        background: linear-gradient(90deg, rgba(16, 185, 129, 0.05) 0%, var(--card-background) 100%);
    }

    .divergence-item.bearish {
        border-left-color: var(--danger-color);
        background: linear-gradient(90deg, rgba(220, 53, 69, 0.05) 0%, var(--card-background) 100%);
    }

    .divergence-item strong {
        font-size: 1.1rem;
        display: block;
        margin-bottom: 0.5rem;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
    }

    .divergence-item p {
        margin: 0;
        opacity: 0.9;
        line-height: 1.6;
    }

    /* Form Groups pour modals */
    .form-group {
        margin-bottom: 1.5rem;
    }

    .form-group label {
        display: block;
        margin-bottom: 0.5rem;
        font-weight: 600;
        color: var(--text-primary);
        font-size: 0.95rem;
    }

    .form-input {
        width: 100%;
        padding: 0.75rem 1rem;
        border: 2px solid var(--border-color);
        border-radius: 8px;
        font-size: 1rem;
        transition: all 0.3s ease;
        background: var(--card-background);
        color: var(--text-primary);
    }

    .form-input:focus {
        outline: none;
        border-color: #667eea;
        box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
    }

    body.dark-mode .form-input {
        background: #1e293b;
        border-color: #334155;
        color: #e2e8f0;
    }

    body.dark-mode .form-input:focus {
        border-color: #818cf8;
        box-shadow: 0 0 0 3px rgba(129, 140, 248, 0.1);
    }

    /* Modal Actions */
    .modal-actions {
        display: flex;
        gap: 1rem;
        justify-content: flex-end;
        margin-top: 2rem;
        padding-top: 1.5rem;
        border-top: 2px solid var(--border-color);
    }

    .btn-cancel,
    .btn-confirm {
        padding: 0.75rem 1.5rem;
        border-radius: 8px;
        font-weight: 600;
        font-size: 0.95rem;
        cursor: pointer;
        transition: all 0.3s ease;
        border: none;
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }

    .btn-cancel {
        background: #6c757d;
        color: white;
    }

    .btn-cancel:hover {
        background: #5a6268;
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(108, 117, 125, 0.3);
    }

    .btn-confirm {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
    }

    .btn-confirm:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 24px rgba(102, 126, 234, 0.4);
    }

    .btn-confirm:active,
    .btn-cancel:active {
        transform: translateY(0);
    }

    /* Sr-container styling */
    .sr-container {
        margin-top: 1.5rem;
    }

    .sr-container .sr-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 2rem;
    }

    .sr-column {
        background: var(--card-background);
        padding: 1.5rem;
        border-radius: 12px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
        border: 2px solid var(--border-color);
    }

    body.dark-mode .sr-column {
        background: #1e293b;
        border-color: #334155;
    }

    /* Empty states */
    .watchlist-empty,
    .alerts-empty {
        text-align: center;
        padding: 3rem 2rem;
        color: var(--text-secondary);
    }

    .watchlist-empty i,
    .alerts-empty i {
        font-size: 3rem;
        opacity: 0.3;
        margin-bottom: 1rem;
    }

    .watchlist-empty p,
    .alerts-empty p {
        font-size: 1.1rem;
        font-weight: 600;
        margin-bottom: 0.5rem;
    }

    .watchlist-empty small,
    .alerts-empty small {
        opacity: 0.7;
    }

    /* Fibonacci table styling */
    .fibonacci-table {
        margin-top: 1.5rem;
        overflow-x: auto;
    }

    .fibonacci-table table {
        width: 100%;
        border-collapse: collapse;
        background: var(--card-background);
        border-radius: 12px;
        overflow: hidden;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
    }

    .fibonacci-table th,
    .fibonacci-table td {
        padding: 1rem;
        text-align: left;
        border-bottom: 1px solid var(--border-color);
    }

    .fibonacci-table th {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        font-weight: 700;
    }

    .fibonacci-table tr:last-child td {
        border-bottom: none;
    }

    .fibonacci-table tr:hover {
        background: rgba(102, 126, 234, 0.05);
    }

    /* Pivot section styling */
    .pivot-section {
        margin-top: 2rem;
    }

    .pivot-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 2rem;
        margin-top: 1.5rem;
    }

    .pivot-card {
        background: var(--card-background);
        padding: 1.5rem;
        border-radius: 12px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
        border: 2px solid var(--border-color);
    }

    body.dark-mode .pivot-card {
        background: #1e293b;
        border-color: #334155;
    }

    .pivot-card h4 {
        font-size: 1.1rem;
        font-weight: 700;
        margin-bottom: 1rem;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
    }

    .pivot-values {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
    }

    /* Responsive adjustments */
    @media (max-width: 768px) {
        .sr-grid,
        .pivot-grid {
            grid-template-columns: 1fr;
            gap: 1rem;
        }

        .modal-actions {
            flex-direction: column;
        }

        .btn-cancel,
        .btn-confirm {
            width: 100%;
            justify-content: center;
        }
    }
    </style>

</body>
</html>