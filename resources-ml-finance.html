<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Machine Learning in Finance - AlphaVault AI</title>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Styles -->
    <link rel="stylesheet" href="assets/css/common.css">
    <link rel="stylesheet" href="assets/css/sidebar.css">
    <link rel="stylesheet" href="assets/css/user-menu.css">
    <link rel="stylesheet" href="assets/css/resources.css">
    
    <!-- âœ… FAVICON DYNAMIQUE - ICI -->
    <!-- <script src="assets/js/favicon-dynamic.js"></script> -->
    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        FAVICONS ALPHAVAULT AI - CONFIGURATION UNIVERSELLE
        Compatible: Google, Apple, Android, Firefox, Safari, Edge
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->

    <!-- Favicons standard (Google, Firefox, Edge, Bing) -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">

    <!-- Apple Touch Icon (iPhone, iPad, Safari iOS/macOS) -->
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">

    <!-- Android Chrome -->
    <link rel="icon" type="image/png" sizes="192x192" href="/android-chrome-192x192.png">
    <link rel="icon" type="image/png" sizes="512x512" href="/android-chrome-512x512.png">

    <!-- Safari Pinned Tab (macOS Safari) -->
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#667eea">

    <!-- Web App Manifest (PWA - Android, Chrome) -->
    <link rel="manifest" href="/site.webmanifest">

    <!-- Theme Colors (Mobile browsers) -->
    <meta name="theme-color" content="#667eea" media="(prefers-color-scheme: light)">
    <meta name="theme-color" content="#1a1a2e" media="(prefers-color-scheme: dark)">
    <meta name="msapplication-TileColor" content="#667eea">

    <!-- Favicon dynamique (modifiÃ© par JavaScript pour effets) -->
    <link id="dynamic-favicon" rel="alternate icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    
    <!-- Firebase Configuration -->
    <script src="assets/js/firebase-config.js"></script>
    
    <!-- Page Protection -->
    <script src="assets/js/auth-guard.js"></script>
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <!-- Analytics Tracker -->
    <script src="assets/js/analytics-tracker.js"></script>
    
    <style>
        /* ========================================
        NEURAL NETWORK VISUALIZATIONS STYLES
        ======================================== */
        
        .neural-network-canvas {
            width: 100%;
            height: 450px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 16px;
            box-shadow: 0 10px 40px rgba(102, 126, 234, 0.4);
            margin: 2rem 0;
            position: relative;
            overflow: hidden;
        }
        
        .neural-network-canvas::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle at 30% 50%, rgba(255, 255, 255, 0.1), transparent 50%);
            pointer-events: none;
        }
        
        .neural-network-canvas canvas {
            width: 100%;
            height: 100%;
        }
        
        .architecture-diagram {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            border-radius: 16px;
            padding: 2rem;
            margin: 2rem 0;
            box-shadow: 0 10px 40px rgba(240, 147, 251, 0.4);
        }
        
        .architecture-diagram svg {
            width: 100%;
            height: auto;
        }
        
        .ml-pipeline-diagram {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            border-radius: 16px;
            padding: 2rem;
            margin: 2rem 0;
            box-shadow: 0 10px 40px rgba(79, 172, 254, 0.4);
        }
        
        .performance-chart-container {
            background: rgba(255, 255, 255, 0.98);
            border-radius: 16px;
            padding: 2rem;
            margin: 2rem 0;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
        }
        
        body.dark-mode .performance-chart-container {
            background: rgba(30, 41, 59, 0.95);
        }
        
        .chart-title {
            font-size: 1.25rem;
            font-weight: 800;
            margin-bottom: 1.5rem;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .ensemble-architecture {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1.5rem;
            margin: 2rem 0;
        }
        
        .model-card {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.1));
            border: 2px solid rgba(102, 126, 234, 0.3);
            border-radius: 12px;
            padding: 1.5rem;
            text-align: center;
            transition: all 0.3s ease;
        }
        
        .model-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
        }
        
        .model-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
        }
        
        .model-name {
            font-size: 1.1rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }
        
        .model-accuracy {
            font-size: 2rem;
            font-weight: 800;
            background: linear-gradient(135deg, #10b981, #059669);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .feature-importance-viz {
            margin: 2rem 0;
        }
        
        .feature-bar {
            display: flex;
            align-items: center;
            margin-bottom: 1rem;
        }
        
        .feature-label {
            width: 150px;
            font-weight: 600;
            font-size: 0.9rem;
            flex-shrink: 0;
        }
        
        .feature-bar-fill {
            flex: 1;
            height: 30px;
            background: linear-gradient(90deg, #667eea, #764ba2);
            border-radius: 6px;
            position: relative;
            box-shadow: 0 2px 10px rgba(102, 126, 234, 0.3);
            transition: all 0.3s ease;
        }
        
        .feature-bar-fill:hover {
            transform: scaleX(1.02);
            box-shadow: 0 4px 20px rgba(102, 126, 234, 0.5);
        }
        
        .feature-value {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            color: white;
            font-weight: 700;
            font-size: 0.85rem;
        }
        
        .confusion-matrix {
            display: grid;
            grid-template-columns: auto repeat(2, 1fr);
            grid-template-rows: auto repeat(2, 1fr);
            gap: 1px;
            background: #e2e8f0;
            border-radius: 12px;
            overflow: hidden;
            margin: 2rem auto;
            max-width: 400px;
        }
        
        .confusion-cell {
            background: white;
            padding: 1.5rem;
            text-align: center;
            font-weight: 700;
        }
        
        body.dark-mode .confusion-cell {
            background: #1e293b;
        }
        
        .confusion-header {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            font-weight: 800;
        }
        
        .confusion-value {
            font-size: 1.8rem;
            background: linear-gradient(135deg, #10b981, #059669);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .confusion-label {
            font-size: 0.8rem;
            color: #64748b;
            margin-top: 0.5rem;
        }
        
        @keyframes neuronPulse {
            0%, 100% { opacity: 0.8; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.1); }
        }
        
        .neuron-animated {
            animation: neuronPulse 2s ease-in-out infinite;
        }
        
        /* ========================================
        MOBILE RESPONSIVENESS - TABLET
        Max Width: 768px
        ======================================== */
        
        @media (max-width: 768px) {
            /* Canvas height reduction for tablets */
            .neural-network-canvas {
                height: 350px;
                margin: 1.5rem 0;
                border-radius: 12px;
            }
            
            /* Diagram padding reduction */
            .architecture-diagram,
            .ml-pipeline-diagram {
                padding: 1.5rem;
                margin: 1.5rem 0;
                border-radius: 12px;
            }
            
            /* Chart container padding */
            .performance-chart-container {
                padding: 1.5rem;
                margin: 1.5rem 0;
                border-radius: 12px;
            }
            
            /* Chart title smaller */
            .chart-title {
                font-size: 1.1rem;
                margin-bottom: 1rem;
            }
            
            /* Ensemble architecture: 2 columns on tablet */
            .ensemble-architecture {
                grid-template-columns: repeat(2, 1fr);
                gap: 1rem;
                margin: 1.5rem 0;
            }
            
            /* Model card adjustments */
            .model-card {
                padding: 1.25rem;
            }
            
            .model-icon {
                font-size: 2.5rem;
                margin-bottom: 0.75rem;
            }
            
            .model-name {
                font-size: 1rem;
            }
            
            .model-accuracy {
                font-size: 1.75rem;
            }
            
            /* Feature importance bars */
            .feature-label {
                width: 120px;
                font-size: 0.85rem;
            }
            
            .feature-bar-fill {
                height: 28px;
            }
            
            .feature-value {
                font-size: 0.8rem;
                right: 8px;
            }
            
            /* Confusion matrix smaller */
            .confusion-matrix {
                max-width: 350px;
                margin: 1.5rem auto;
            }
            
            .confusion-cell {
                padding: 1.25rem;
                font-size: 0.9rem;
            }
            
            .confusion-value {
                font-size: 1.6rem;
            }
            
            .confusion-label {
                font-size: 0.75rem;
            }
        }
        
        /* ========================================
        MOBILE RESPONSIVENESS - SMARTPHONE
        Max Width: 480px
        ======================================== */
        
        @media (max-width: 480px) {
            /* Canvas height much smaller for smartphones */
            .neural-network-canvas {
                height: 280px;
                margin: 1rem 0;
                border-radius: 10px;
            }
            
            /* Diagram padding minimal */
            .architecture-diagram,
            .ml-pipeline-diagram {
                padding: 1rem;
                margin: 1rem 0;
                border-radius: 10px;
            }
            
            /* Chart container compact */
            .performance-chart-container {
                padding: 1rem;
                margin: 1rem 0;
                border-radius: 10px;
            }
            
            /* Chart title much smaller */
            .chart-title {
                font-size: 0.95rem;
                margin-bottom: 0.75rem;
                line-height: 1.3;
            }
            
            /* Ensemble architecture: 1 column on mobile */
            .ensemble-architecture {
                grid-template-columns: 1fr;
                gap: 1rem;
                margin: 1rem 0;
            }
            
            /* Model card mobile-friendly */
            .model-card {
                padding: 1rem;
                border-radius: 10px;
            }
            
            .model-icon {
                font-size: 2.25rem;
                margin-bottom: 0.5rem;
            }
            
            .model-name {
                font-size: 0.95rem;
                margin-bottom: 0.4rem;
            }
            
            .model-accuracy {
                font-size: 1.6rem;
            }
            
            .model-card p {
                font-size: 0.8rem;
                margin-top: 0.4rem;
            }
            
            /* Feature importance bars - vertical layout on very small screens */
            .feature-bar {
                flex-direction: column;
                align-items: flex-start;
                margin-bottom: 1.25rem;
            }
            
            .feature-label {
                width: 100%;
                font-size: 0.8rem;
                margin-bottom: 0.5rem;
            }
            
            .feature-bar-fill {
                width: 100%;
                height: 26px;
            }
            
            .feature-value {
                font-size: 0.75rem;
                right: 6px;
            }
            
            /* Confusion matrix very compact */
            .confusion-matrix {
                max-width: 100%;
                margin: 1rem 0;
                font-size: 0.85rem;
            }
            
            .confusion-cell {
                padding: 0.75rem 0.5rem;
            }
            
            .confusion-value {
                font-size: 1.3rem;
            }
            
            .confusion-label {
                font-size: 0.65rem;
                margin-top: 0.25rem;
            }
            
            /* Disable hover effects on mobile */
            .model-card:hover {
                transform: none;
            }
            
            .feature-bar-fill:hover {
                transform: none;
            }
        }
        
        /* ========================================
        MOBILE RESPONSIVENESS - VERY SMALL
        Max Width: 360px
        ======================================== */
        
        @media (max-width: 360px) {
            /* Canvas even smaller for tiny screens */
            .neural-network-canvas {
                height: 240px;
                margin: 0.75rem 0;
            }
            
            .architecture-diagram,
            .ml-pipeline-diagram,
            .performance-chart-container {
                padding: 0.75rem;
                margin: 0.75rem 0;
            }
            
            .chart-title {
                font-size: 0.875rem;
                margin-bottom: 0.5rem;
            }
            
            .model-card {
                padding: 0.875rem;
            }
            
            .model-icon {
                font-size: 2rem;
            }
            
            .model-name {
                font-size: 0.875rem;
            }
            
            .model-accuracy {
                font-size: 1.5rem;
            }
            
            .feature-label {
                font-size: 0.75rem;
            }
            
            .feature-bar-fill {
                height: 24px;
            }
            
            .confusion-cell {
                padding: 0.5rem 0.25rem;
            }
            
            .confusion-value {
                font-size: 1.1rem;
            }
            
            .confusion-label {
                font-size: 0.6rem;
            }
        }
        
        /* ========================================
        SVG TEXT RESPONSIVENESS
        ======================================== */
        
        @media (max-width: 768px) {
            /* Reduce SVG text sizes on tablet */
            .ml-pipeline-diagram svg text,
            .architecture-diagram svg text {
                font-size: 12px;
            }
            
            .ml-pipeline-diagram svg text:first-of-type,
            .architecture-diagram svg text:first-of-type {
                font-size: 18px;
            }
        }
        
        @media (max-width: 480px) {
            /* Further reduce SVG text on mobile */
            .ml-pipeline-diagram svg text,
            .architecture-diagram svg text {
                font-size: 9px;
            }
            
            .ml-pipeline-diagram svg text:first-of-type,
            .architecture-diagram svg text:first-of-type {
                font-size: 14px;
            }
            
            /* Hide some detailed SVG text on mobile */
            .ml-pipeline-diagram svg text:nth-child(n+10),
            .architecture-diagram svg text:nth-child(n+15) {
                font-size: 8px;
            }
        }
        
        @media (max-width: 360px) {
            /* Minimal SVG text on very small screens */
            .ml-pipeline-diagram svg text,
            .architecture-diagram svg text {
                font-size: 7px;
            }
            
            .ml-pipeline-diagram svg text:first-of-type,
            .architecture-diagram svg text:first-of-type {
                font-size: 12px;
            }
        }
    </style>
</head>
<body>
    
    <!-- Theme Script -->
    <script src="assets/js/theme.js"></script>

    <!-- Particles Background -->
    <canvas id="particles-canvas" class="particles-background"></canvas>
    
    <div class="layout-wrapper">
        
        <!-- SIDEBAR (identique aux fichiers prÃ©cÃ©dents) -->
        <aside class='sidebar' id='sidebar'>
            <div class="sidebar-header">
                <div class="logo-container">
                    <div class="logo-3d">
                        <svg class="logo-svg" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                            <defs>
                                <linearGradient id="logoGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                    <stop offset="0%" class="logo-gradient-1" />
                                    <stop offset="100%" class="logo-gradient-2" />
                                </linearGradient>
                            </defs>
                            <path d="M 20 80 L 30 70 L 40 75 L 50 60 L 60 65 L 70 45 L 80 50 L 90 30" 
                                  stroke="url(#logoGradient)" 
                                  stroke-width="4" 
                                  fill="none" 
                                  stroke-linecap="round" 
                                  stroke-linejoin="round"/>
                            <circle cx="30" cy="70" r="4" fill="url(#logoGradient)"/>
                            <circle cx="50" cy="60" r="4" fill="url(#logoGradient)"/>
                            <circle cx="70" cy="45" r="4" fill="url(#logoGradient)"/>
                            <circle cx="90" cy="30" r="5" fill="url(#logoGradient)"/>
                            <path d="M 85 35 L 90 30 L 85 25" 
                                  stroke="url(#logoGradient)" 
                                  stroke-width="3" 
                                  fill="none" 
                                  stroke-linecap="round"/>
                        </svg>
                    </div>
                    <div class="brand-text">
                        <h2 class="brand-name">AlphaVault AI</h2>
                        <span class="brand-tagline">Investments</span>
                    </div>
                </div>
                <button class="sidebar-toggle" aria-label="Toggle Sidebar">
                    <i class="fas fa-angle-left"></i>
                </button>
            </div>
            
            <!-- Navigation -->
            <nav class="sidebar-nav">
                <div class="nav-section">
                    <button class="nav-folder" data-tooltip="Home">
                        <i class="fas fa-home"></i>
                        <span>Home</span>
                        <i class="fas fa-chevron-down arrow"></i>
                    </button>
                    <div class="nav-submenu">
                        <a href="index.html" class="nav-link">
                            <i class="fas fa-home"></i>
                            <span>Overview</span>
                        </a>
                    </div>
                </div>
                
                <div class='nav-section'>
                    <button class='nav-folder' data-tooltip="Budget">
                        <i class='fas fa-wallet'></i>
                        <span>Budget</span>
                        <i class='fas fa-chevron-down arrow'></i>
                    </button>
                    <div class='nav-submenu'>
                        <a href='dashboard-financier.html' class='nav-link'>
                            <i class='fas fa-home'></i>
                            <span>Dashboard Budget</span>
                        </a>
                        <a href='investment-analytics.html' class='nav-link'>
                            <i class='fas fa-chart-bar'></i>
                            <span>Investment Analytics</span>
                        </a>
                        <a href='real-estate-tax-simulator.html' class='nav-link'>
                            <i class='fas fa-building'></i>
                            <span>Real Estate Simulator</span>
                        </a>
                    </div>
                </div>
                
                <div class='nav-section'>
                    <button class='nav-folder' data-tooltip="Simulation">
                        <i class='fas fa-calculator'></i>
                        <span>Simulation</span>
                        <i class='fas fa-chevron-down arrow'></i>
                    </button>
                    <div class='nav-submenu'>
                        <a href='monte-carlo.html' class='nav-link'>
                            <i class='fas fa-dice'></i>
                            <span>Monte Carlo</span>
                        </a>
                        <a href='portfolio-optimizer.html' class='nav-link'>
                            <i class='fas fa-chart-pie'></i>
                            <span>Markowitz</span>
                        </a>
                        <a href='risk-parity.html' class='nav-link'>
                            <i class='fas fa-balance-scale'></i>
                            <span>Risk Parity</span>
                        </a>
                        <a href='scenario-analysis.html' class='nav-link'>
                            <i class='fas fa-flask'></i>
                            <span>Scenarios</span>
                        </a>
                    </div>
                </div>
                
                <div class='nav-section'>
                    <button class="nav-folder" data-tooltip="Stocks">
                        <i class="fas fa-chart-line"></i>
                        <span>Stocks</span>
                        <i class="fas fa-chevron-down arrow"></i>
                    </button>
                    <div class='nav-submenu'>
                        <a href='advanced-analysis.html' class='nav-link'>
                            <i class='fas fa-brain'></i>
                            <span>Advanced Analysis</span>
                        </a>
                        <a href='trend-prediction.html' class='nav-link'>
                            <i class='fas fa-chart-line'></i>
                            <span>Trend Prediction</span>
                        </a>
                        <a href='forex-converter.html' class='nav-link'>
                            <i class='fas fa-exchange-alt'></i>
                            <span>Forex Converter</span>
                        </a>
                        <a href='ipo-intelligence.html' class='nav-link'>
                            <i class='fas fa-rocket'></i>
                            <span>IPO Intelligence</span>
                        </a>
                        <a href='insider-flow-tracker.html' class='nav-link'>
                            <i class='fas fa-user-secret'></i>
                            <span>Insider Flow Tracker</span>
                        </a>
                        <a href='ma-predictor.html' class='nav-link'>
                            <i class='fas fa-handshake'></i>
                            <span>M&A Screening</span>
                        </a>
                    </div>
                </div>

                <div class='nav-section'>
                    <button class="nav-folder" data-tooltip="AI Assistant">
                        <i class="fas fa-robot"></i>
                        <span>AI Assistant</span>
                        <i class="fas fa-chevron-down arrow"></i>
                    </button>
                    <div class='nav-submenu'>
                        <a href='chatbot-fullpage.html' class='nav-link'>
                            <i class='fas fa-comments'></i>
                            <span>Alphy AI Chat</span>
                        </a>
                    </div>
                </div>

                <div class='nav-section'>
                    <button class='nav-folder'>
                        <i class='fas fa-globe-americas'></i>
                        <span>Economic Data</span>
                        <i class='fas fa-chevron-down arrow'></i>
                    </button>
                    <div class='nav-submenu'>
                        <a href='economic-dashboard.html' class='nav-link'>
                            <i class='fas fa-tachometer-alt'></i>
                            <span>Macro Economic Dashboard</span>
                        </a>
                        <a href='inflation-calculator.html' class='nav-link'>
                            <i class='fas fa-calculator'></i>
                            <span>Inflation Calculator</span>
                        </a>
                        <a href='interest-rate-tracker.html' class='nav-link'>
                            <i class='fas fa-percent'></i>
                            <span>Interest Rates</span>
                        </a>
                        <a href='recession-indicator.html' class='nav-link'>
                            <i class='fas fa-exclamation-triangle'></i>
                            <span>Recession Indicators</span>
                        </a>
                    </div>
                </div>

                <div class='nav-section'>
                    <button class="nav-folder" data-tooltip="News & Analysis">
                        <i class="fas fa-newspaper"></i>
                        <span>News & Analysis</span>
                        <i class="fas fa-chevron-down arrow"></i>
                    </button>
                    <div class='nav-submenu'>
                        <a href='news-terminal.html' class='nav-link'>
                            <i class='fas fa-desktop'></i>
                            <span>News Terminal</span>
                        </a>
                        <a href='market-sentiment.html' class='nav-link'>
                            <i class='fas fa-chart-pie'></i>
                            <span>Market Sentiment</span>
                        </a>
                        <a href='trending-topics.html' class='nav-link'>
                            <i class='fas fa-fire'></i>
                            <span>Trending Topics</span>
                        </a>
                    </div>
                </div>

                <!-- âœ… NOUVELLE SECTION BLOG -->
                <div class='nav-section'>
                    <button class="nav-folder" data-tooltip="Community">
                        <i class="fas fa-users"></i>
                        <span>Community</span>
                        <i class="fas fa-chevron-down arrow"></i>
                    </button>
                    <div class='nav-submenu' style='display: block;'>
                        <a href='community-hub.html' class='nav-link'>
                            <i class='fas fa-home'></i>
                            <span>Community Hub</span>
                        </a>
                        <a href='create-post.html' class='nav-link'>
                            <i class='fas fa-pen-fancy'></i>
                            <span>Create Post</span>
                        </a>
                    </div>
                </div>

                <!-- ===== SECTION ADMIN (MASQUÃ‰E PAR DÃ‰FAUT - VISIBLE UNIQUEMENT POUR ADMIN) ===== -->
                <div class='nav-section' id='adminSection' style='display: none !important;'>
                    <button class="nav-folder" data-tooltip="Admin">
                        <i class="fas fa-shield-alt"></i>
                        <span>Admin</span>
                        <i class="fas fa-chevron-down arrow"></i>
                    </button>
                    <div class='nav-submenu' style='display: block;'>
                        <a href='admin-analytics.html' class='nav-link'>
                            <i class='fas fa-chart-line'></i>
                            <span>Analytics Dashboard</span>
                        </a>
                    </div>
                </div>
            </nav>
            
            <div class="sidebar-footer">
                <div class="sidebar-user-menu">
                    <div class="sidebar-user-trigger" id="sidebarUserTrigger">
                        <img data-user-photo src="https://ui-avatars.com/api/?name=User&background=2563eb&color=fff" alt="Avatar" class="sidebar-user-avatar">
                        <div class="sidebar-user-info">
                            <span data-user-name class="sidebar-user-name">User</span>
                            <span data-user-plan class="sidebar-user-plan">Free Plan</span>
                        </div>
                        <i class="fas fa-chevron-up sidebar-user-arrow"></i>
                    </div>
                    <div class="sidebar-user-dropdown" id="sidebarUserDropdown">
                        <div class="user-dropdown-header">
                            <img data-user-photo src="https://ui-avatars.com/api/?name=User&background=2563eb&color=fff" alt="Avatar" class="user-dropdown-avatar">
                            <div class="user-dropdown-details">
                                <h4 data-user-name class="user-dropdown-name">User</h4>
                                <p data-user-email class="user-dropdown-email">email@example.com</p>
                            </div>
                        </div>
                        <div class="user-dropdown-divider"></div>
                        <nav class="user-dropdown-links">
                            <a href="user-profile.html" class="user-dropdown-link">
                                <i class="fas fa-user"></i>
                                <span>My profile</span>
                            </a>
                            <a href="settings.html" class="user-dropdown-link">
                                <i class="fas fa-cog"></i>
                                <span>Settings</span>
                            </a>
                            <a href="help.html" class="user-dropdown-link">
                                <i class="fas fa-question-circle"></i>
                                <span>Help</span>
                            </a>
                        </nav>
                        <div class="user-dropdown-divider"></div>
                        <button onclick="logout()" class="user-dropdown-logout">
                            <i class="fas fa-sign-out-alt"></i>
                            <span>Disconnect</span>
                        </button>
                    </div>
                </div>
            </div>
        </aside>
        
        <!-- MAIN CONTENT -->
        <main class="main-content">
            
            <!-- Header Premium -->
            <div class="top-header">
                <div class="header-content-wrapper">
                    <div class="header-left">
                        <button class='mobile-toggle' id='mobileToggle'>
                            <i class='fas fa-bars'></i>
                        </button>
                        <h1 class="page-title">
                            <i class="fas fa-robot"></i> 
                            Learning Resources
                        </h1>
                    </div>
                    <div class="header-right">
                        <a href="help.html" class="btn-back-dashboard">
                            <i class="fas fa-arrow-left"></i>
                            <span>Back to Help</span>
                        </a>
                    </div>
                </div>
            </div>
            
            <!-- Content -->
            <div class="container">
                <div class="resource-container">
                    
                    <!-- Resource Header -->
                    <div class="resource-header">
                        <div class="resource-breadcrumb">
                            <a href="help.html"><i class="fas fa-home"></i> Help</a>
                            <i class="fas fa-chevron-right"></i>
                            <span>Machine Learning in Finance</span>
                        </div>
                        <h1 class="resource-title">Machine Learning in Finance</h1>
                        <p class="resource-subtitle">
                            Explore how hedge funds and quantitative firms use LSTM, Random Forest, and ensemble methods to predict market trends, optimize portfolios, and generate alpha.
                        </p>
                        <div class="resource-meta">
                            <div class="meta-item">
                                <i class="fas fa-clock"></i>
                                <span>75 min read</span>
                            </div>
                            <div class="meta-item">
                                <i class="fas fa-brain"></i>
                                <span>10+ Algorithms</span>
                            </div>
                            <div class="meta-item">
                                <i class="fas fa-code"></i>
                                <span>Code Examples</span>
                            </div>
                            <span class="difficulty-badge expert">Expert</span>
                        </div>
                    </div>
                    
                    <!-- Table of Contents -->
                    <div class="table-of-contents">
                        <h2 class="toc-title"><i class="fas fa-list"></i> Table of Contents</h2>
                        <ul class="toc-list">
                            <li><a href="#introduction">Introduction to ML in Finance</a></li>
                            <li><a href="#supervised-learning">Supervised Learning</a></li>
                            <li><a href="#lstm">LSTM Networks</a></li>
                            <li><a href="#random-forest">Random Forest</a></li>
                            <li><a href="#gradient-boosting">Gradient Boosting (XGBoost)</a></li>
                            <li><a href="#ensemble-methods">Ensemble Methods</a></li>
                            <li><a href="#feature-engineering">Feature Engineering</a></li>
                            <li><a href="#backtesting">Backtesting & Validation</a></li>
                        </ul>
                    </div>
                    
                    <!-- Section 1: Introduction -->
                    <div class="content-section" id="introduction">
                        <h2 class="section-header">
                            <i class="fas fa-rocket"></i>
                            Introduction to Machine Learning in Finance
                        </h2>
                        
                        <p class="content-text">
                            Machine Learning has revolutionized quantitative finance. Hedge funds like <strong>Renaissance Technologies, Two Sigma, and Citadel</strong> use ML algorithms to process billions of data points and identify patterns invisible to human analysts.
                        </p>
                        
                        <!-- ML WORKFLOW DIAGRAM -->
                        <div class="ml-pipeline-diagram">
                            <svg viewBox="0 0 1000 300" xmlns="http://www.w3.org/2000/svg">
                                <defs>
                                    <linearGradient id="pipelineGrad" x1="0%" y1="0%" x2="100%" y2="0%">
                                        <stop offset="0%" style="stop-color:#fff;stop-opacity:0.9" />
                                        <stop offset="100%" style="stop-color:#fff;stop-opacity:0.7" />
                                    </linearGradient>
                                    <filter id="shadow">
                                        <feDropShadow dx="0" dy="4" stdDeviation="8" flood-opacity="0.3"/>
                                    </filter>
                                </defs>
                                
                                <!-- Title -->
                                <text x="500" y="30" text-anchor="middle" fill="white" font-size="24" font-weight="bold">
                                    Machine Learning Pipeline in Finance
                                </text>
                                
                                <!-- Stage 1: Data Collection -->
                                <rect x="20" y="70" width="180" height="180" rx="12" fill="url(#pipelineGrad)" filter="url(#shadow)"/>
                                <text x="110" y="110" text-anchor="middle" fill="#1e293b" font-size="16" font-weight="bold">ðŸ“Š Data Collection</text>
                                <text x="110" y="140" text-anchor="middle" fill="#475569" font-size="12">â€¢ Market Data</text>
                                <text x="110" y="165" text-anchor="middle" fill="#475569" font-size="12">â€¢ Fundamentals</text>
                                <text x="110" y="190" text-anchor="middle" fill="#475569" font-size="12">â€¢ Sentiment</text>
                                <text x="110" y="215" text-anchor="middle" fill="#475569" font-size="12">â€¢ Alternative Data</text>
                                
                                <!-- Arrow 1 -->
                                <path d="M 200 160 L 240 160" stroke="white" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>
                                
                                <!-- Stage 2: Feature Engineering -->
                                <rect x="240" y="70" width="180" height="180" rx="12" fill="url(#pipelineGrad)" filter="url(#shadow)"/>
                                <text x="330" y="110" text-anchor="middle" fill="#1e293b" font-size="16" font-weight="bold">âš™ Feature Eng.</text>
                                <text x="330" y="140" text-anchor="middle" fill="#475569" font-size="12">â€¢ Technical Indicators</text>
                                <text x="330" y="165" text-anchor="middle" fill="#475569" font-size="12">â€¢ Ratios (P/E, ROE)</text>
                                <text x="330" y="190" text-anchor="middle" fill="#475569" font-size="12">â€¢ Lagged Features</text>
                                <text x="330" y="215" text-anchor="middle" fill="#475569" font-size="12">â€¢ Transformations</text>
                                
                                <!-- Arrow 2 -->
                                <path d="M 420 160 L 460 160" stroke="white" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>
                                
                                <!-- Stage 3: Model Training -->
                                <rect x="460" y="70" width="180" height="180" rx="12" fill="url(#pipelineGrad)" filter="url(#shadow)"/>
                                <text x="550" y="110" text-anchor="middle" fill="#1e293b" font-size="16" font-weight="bold">ðŸ§  Model Training</text>
                                <text x="550" y="140" text-anchor="middle" fill="#475569" font-size="12">â€¢ LSTM Networks</text>
                                <text x="550" y="165" text-anchor="middle" fill="#475569" font-size="12">â€¢ Random Forest</text>
                                <text x="550" y="190" text-anchor="middle" fill="#475569" font-size="12">â€¢ XGBoost</text>
                                <text x="550" y="215" text-anchor="middle" fill="#475569" font-size="12">â€¢ Ensemble</text>
                                
                                <!-- Arrow 3 -->
                                <path d="M 640 160 L 680 160" stroke="white" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>
                                
                                <!-- Stage 4: Validation -->
                                <rect x="680" y="70" width="180" height="180" rx="12" fill="url(#pipelineGrad)" filter="url(#shadow)"/>
                                <text x="770" y="110" text-anchor="middle" fill="#1e293b" font-size="16" font-weight="bold">âœ… Validation</text>
                                <text x="770" y="140" text-anchor="middle" fill="#475569" font-size="12">â€¢ Walk-Forward Test</text>
                                <text x="770" y="165" text-anchor="middle" fill="#475569" font-size="12">â€¢ Cross-Validation</text>
                                <text x="770" y="190" text-anchor="middle" fill="#475569" font-size="12">â€¢ Backtesting</text>
                                <text x="770" y="215" text-anchor="middle" fill="#475569" font-size="12">â€¢ Performance Metrics</text>
                                
                                <!-- Arrow markers -->
                                <defs>
                                    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                                        <polygon points="0 0, 10 3, 0 6" fill="white"/>
                                    </marker>
                                </defs>
                            </svg>
                        </div>
                        
                        <div class="info-box">
                            <div class="box-header">
                                <i class="fas fa-chart-line"></i>
                                <span>Why ML Works in Finance</span>
                            </div>
                            <div class="box-content">
                                <ul class="styled-list">
                                    <li><strong>Pattern Recognition:</strong> Identifies non-linear relationships in complex datasets</li>
                                    <li><strong>Speed:</strong> Processes millions of data points in milliseconds</li>
                                    <li><strong>Adaptability:</strong> Self-adjusts to changing market conditions</li>
                                    <li><strong>Scale:</strong> Analyzes 1000s of stocks simultaneously</li>
                                    <li><strong>Emotion-Free:</strong> Eliminates behavioral biases</li>
                                </ul>
                            </div>
                        </div>
                        
                        <h3 class="subsection-header">Types of Machine Learning</h3>
                        
                        <div class="data-table-wrapper">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Type</th>
                                        <th>Description</th>
                                        <th>Finance Applications</th>
                                        <th>Algorithms</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><strong>Supervised Learning</strong></td>
                                        <td>Learns from labeled data (input â†’ output)</td>
                                        <td>Price prediction, credit scoring, fraud detection</td>
                                        <td>LSTM, Random Forest, XGBoost</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Unsupervised Learning</strong></td>
                                        <td>Finds patterns in unlabeled data</td>
                                        <td>Portfolio clustering, anomaly detection</td>
                                        <td>K-Means, PCA, Autoencoders</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Reinforcement Learning</strong></td>
                                        <td>Learns through trial & error (rewards)</td>
                                        <td>Algorithmic trading, portfolio optimization</td>
                                        <td>Q-Learning, Deep Q-Network (DQN)</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        
                        <div class="warning-box">
                            <div class="box-header">
                                <i class="fas fa-exclamation-triangle"></i>
                                <span>The ML Overfitting Trap</span>
                            </div>
                            <div class="box-content">
                                <p><strong>Overfitting</strong> is the #1 mistake in ML finance. A model that's too complex memorizes historical noise instead of learning true patterns.</p>
                                <p><strong>Symptoms:</strong></p>
                                <ul class="styled-list">
                                    <li>95%+ accuracy on training data, 40% on live trading</li>
                                    <li>Model performs perfectly on past data but fails forward</li>
                                    <li>Too many features (curse of dimensionality)</li>
                                </ul>
                                <p><strong>Prevention:</strong></p>
                                <ul class="styled-list">
                                    <li>Use cross-validation (k-fold, time-series split)</li>
                                    <li>Regularization (L1/L2 penalties)</li>
                                    <li>Out-of-sample testing (walk-forward validation)</li>
                                    <li>Feature selection (remove irrelevant variables)</li>
                                </ul>
                            </div>
                        </div>
                        
                    </div>
                    
                    <!-- Section 2: Supervised Learning -->
                    <div class="content-section" id="supervised-learning">
                        <h2 class="section-header">
                            <i class="fas fa-brain"></i>
                            Supervised Learning Fundamentals
                        </h2>
                        
                        <p class="content-text">
                            Supervised learning is the <strong>most common ML approach in finance</strong>. The model learns from historical data (features â†’ labels) to make predictions on new data.
                        </p>
                        
                        <div class="formula-block">
                            <div class="formula-title">Supervised Learning Framework</div>
                            <div class="formula-content">
                                f(X) = y
                            </div>
                            <dl class="formula-legend">
                                <dt>X (Features):</dt>
                                <dd>Input variables (e.g., P/E ratio, volume, RSI, sentiment)</dd>
                                <dt>y (Label):</dt>
                                <dd>Target variable (e.g., future return, buy/sell signal)</dd>
                                <dt>f (Model):</dt>
                                <dd>The algorithm that learns the mapping (LSTM, Random Forest, etc.)</dd>
                            </dl>
                        </div>
                        
                        <h3 class="subsection-header">Classification vs. Regression</h3>
                        
                        <div class="data-table-wrapper">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Task Type</th>
                                        <th>Output</th>
                                        <th>Finance Example</th>
                                        <th>Metrics</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><strong>Classification</strong></td>
                                        <td>Discrete categories</td>
                                        <td>Predict stock direction (Up/Down/Neutral)</td>
                                        <td>Accuracy, Precision, Recall, F1-Score</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Regression</strong></td>
                                        <td>Continuous values</td>
                                        <td>Predict stock price ($142.50)</td>
                                        <td>MAE, RMSE, RÂ² Score</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        
                        <div class="example-card">
                            <div class="example-header">
                                <i class="fas fa-code"></i>
                                <span>Example: Stock Direction Prediction (Classification)</span>
                            </div>
                            <div class="example-content">
                                <p><strong>Problem:</strong> Predict if a stock will go up or down tomorrow.</p>
                                <p><strong>Features (X):</strong></p>
                                <ul class="styled-list">
                                    <li>RSI (14-day)</li>
                                    <li>MACD histogram</li>
                                    <li>Volume ratio (today/avg)</li>
                                    <li>Sentiment score (news/social media)</li>
                                    <li>5-day price change (%)</li>
                                </ul>
                                <p><strong>Label (y):</strong></p>
                                <ul class="styled-list">
                                    <li>1 = Stock goes up >0.5%</li>
                                    <li>0 = Stock goes down >0.5%</li>
                                    <li>-1 = Neutral (change < 0.5%)</li>
                                </ul>
                                <p><strong>Model Output:</strong> Probability distribution</p>
                                <div class="formula-content" style="margin: 1rem 0;">
                                    P(Up) = 0.72 | P(Down) = 0.15 | P(Neutral) = 0.13
                                </div>
                                <p><strong>Decision:</strong> Buy signal (72% confidence of upward move)</p>
                            </div>
                        </div>
                        
                    </div>
                    
                    <!-- Section 3: LSTM Networks -->
                    <div class="content-section" id="lstm">
                        <h2 class="section-header">
                            <i class="fas fa-project-diagram"></i>
                            LSTM Networks for Time Series
                        </h2>
                        
                        <p class="content-text">
                            <strong>Long Short-Term Memory (LSTM)</strong> networks are a type of Recurrent Neural Network (RNN) designed to learn from sequential data. They're ideal for stock price prediction because they <strong>remember long-term dependencies</strong>.
                        </p>
                        
                        <!-- LSTM NEURAL NETWORK VISUALIZATION -->
                        <div class="neural-network-canvas">
                            <canvas id="lstmCanvas"></canvas>
                        </div>
                        
                        <div class="info-box">
                            <div class="box-header">
                                <i class="fas fa-lightbulb"></i>
                                <span>Why LSTM for Finance?</span>
                            </div>
                            <div class="box-content">
                                <ul class="styled-list">
                                    <li><strong>Temporal Dependencies:</strong> Stock prices depend on previous prices (autocorrelation)</li>
                                    <li><strong>Variable Sequence Length:</strong> Can process 10 days or 1000 days of history</li>
                                    <li><strong>Non-Linear Patterns:</strong> Captures complex relationships traditional models miss</li>
                                    <li><strong>Vanishing Gradient Solution:</strong> Solves the problem that plagued basic RNNs</li>
                                </ul>
                            </div>
                        </div>
                        
                        <h3 class="subsection-header">LSTM Architecture</h3>
                        
                        <!-- LSTM CELL ARCHITECTURE DIAGRAM -->
                        <div class="architecture-diagram">
                            <svg viewBox="0 0 1000 400" xmlns="http://www.w3.org/2000/svg">
                                <defs>
                                    <linearGradient id="cellGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                                        <stop offset="0%" style="stop-color:#fff;stop-opacity:0.95" />
                                        <stop offset="100%" style="stop-color:#fff;stop-opacity:0.85" />
                                    </linearGradient>
                                    <filter id="glow">
                                        <feGaussianBlur stdDeviation="4" result="coloredBlur"/>
                                        <feMerge>
                                            <feMergeNode in="coloredBlur"/>
                                            <feMergeNode in="SourceGraphic"/>
                                        </feMerge>
                                    </filter>
                                </defs>
                                
                                <!-- Title -->
                                <text x="500" y="35" text-anchor="middle" fill="white" font-size="28" font-weight="bold">
                                    LSTM Cell Internal Architecture
                                </text>
                                
                                <!-- Main Cell Box -->
                                <rect x="250" y="80" width="500" height="250" rx="20" fill="url(#cellGrad)" stroke="#fff" stroke-width="3" filter="url(#glow)"/>
                                
                                <!-- Forget Gate -->
                                <circle cx="350" cy="150" r="35" fill="#ef4444" opacity="0.8"/>
                                <text x="350" y="155" text-anchor="middle" fill="white" font-size="14" font-weight="bold">Ïƒ</text>
                                <text x="350" y="200" text-anchor="middle" fill="white" font-size="12" font-weight="bold">Forget Gate</text>
                                
                                <!-- Input Gate -->
                                <circle cx="500" cy="150" r="35" fill="#3b82f6" opacity="0.8"/>
                                <text x="500" y="155" text-anchor="middle" fill="white" font-size="14" font-weight="bold">Ïƒ</text>
                                <text x="500" y="200" text-anchor="middle" fill="white" font-size="12" font-weight="bold">Input Gate</text>
                                
                                <!-- Output Gate -->
                                <circle cx="650" cy="150" r="35" fill="#10b981" opacity="0.8"/>
                                <text x="650" y="155" text-anchor="middle" fill="white" font-size="14" font-weight="bold">Ïƒ</text>
                                <text x="650" y="200" text-anchor="middle" fill="white" font-size="12" font-weight="bold">Output Gate</text>
                                
                                <!-- Cell State -->
                                <rect x="300" y="240" width="400" height="50" rx="10" fill="#8b5cf6" opacity="0.8"/>
                                <text x="500" y="270" text-anchor="middle" fill="white" font-size="14" font-weight="bold">Cell State (C_t) - Long-term Memory</text>
                                
                                <!-- Input/Output Arrows -->
                                <path d="M 100 200 L 250 200" stroke="white" stroke-width="4" fill="none" marker-end="url(#arrow)"/>
                                <text x="150" y="190" fill="white" font-size="14" font-weight="bold">x_t, h_{t-1}</text>
                                
                                <path d="M 750 200 L 900 200" stroke="white" stroke-width="4" fill="none" marker-end="url(#arrow)"/>
                                <text x="800" y="190" fill="white" font-size="14" font-weight="bold">h_t (output)</text>
                                
                                <!-- Arrow marker -->
                                <defs>
                                    <marker id="arrow" markerWidth="12" markerHeight="12" refX="10" refY="6" orient="auto">
                                        <polygon points="0 0, 12 6, 0 12" fill="white"/>
                                    </marker>
                                </defs>
                                
                                <!-- Gates Info -->
                                <text x="500" y="370" text-anchor="middle" fill="white" font-size="12">
                                    Forget Gate: Decides what to remove from memory | Input Gate: Decides what new info to store | Output Gate: Decides what to output
                                </text>
                            </svg>
                        </div>
                        
                        <div class="formula-block">
                            <div class="formula-title">LSTM Cell Equations</div>
                            <div class="formula-content">
                                Forget Gate: f_t = Ïƒ(W_f Â· [h_{t-1}, x_t] + b_f)
                                <br><br>
                                Input Gate: i_t = Ïƒ(W_i Â· [h_{t-1}, x_t] + b_i)
                                <br><br>
                                Cell State: C_t = f_t * C_{t-1} + i_t * tanh(W_C Â· [h_{t-1}, x_t] + b_C)
                                <br><br>
                                Output Gate: o_t = Ïƒ(W_o Â· [h_{t-1}, x_t] + b_o)
                                <br><br>
                                Hidden State: h_t = o_t * tanh(C_t)
                            </div>
                            <dl class="formula-legend">
                                <dt>Ïƒ (Sigma):</dt>
                                <dd>Sigmoid activation function (0 to 1)</dd>
                                <dt>C_t:</dt>
                                <dd>Cell state (long-term memory)</dd>
                                <dt>h_t:</dt>
                                <dd>Hidden state (short-term memory)</dd>
                                <dt>W, b:</dt>
                                <dd>Learnable weights and biases</dd>
                            </dl>
                        </div>
                        
                        <!-- LSTM TRAINING PERFORMANCE CHART -->
                        <div class="performance-chart-container">
                            <h3 class="chart-title"><i class="fas fa-chart-line"></i> LSTM Training Progress: Loss Over Epochs</h3>
                            <canvas id="lstmTrainingChart"></canvas>
                        </div>
                        
                        <div class="example-card">
                            <div class="example-header">
                                <i class="fas fa-code"></i>
                                <span>Python Code: LSTM Stock Price Prediction</span>
                            </div>
                            <div class="example-content">
                                <div class="code-block">
                                    <div class="code-header">
                                        <span class="code-lang">Python</span>
                                        <button class="copy-code-btn">Copy</button>
                                    </div>
                                    <pre class="code-content">
import numpy as np
import pandas as pd
from sklearn.preprocessing import MinMaxScaler
from tensorflow.keras.models import Sequential
from tensorflow.keras.layers import LSTM, Dense, Dropout

# Load stock data
df = pd.read_csv('AAPL_historical.csv')
prices = df['Close'].values.reshape(-1, 1)

# Normalize data (0-1 range)
scaler = MinMaxScaler()
scaled_prices = scaler.fit_transform(prices)

# Create sequences (60 days â†’ predict day 61)
def create_sequences(data, seq_length=60):
    X, y = [], []
    for i in range(seq_length, len(data)):
        X.append(data[i-seq_length:i, 0])
        y.append(data[i, 0])
    return np.array(X), np.array(y)

X, y = create_sequences(scaled_prices)
X = X.reshape(X.shape[0], X.shape[1], 1)  # (samples, timesteps, features)

# Split train/test (80/20)
split = int(0.8 * len(X))
X_train, X_test = X[:split], X[split:]
y_train, y_test = y[:split], y[split:]

# Build LSTM model
model = Sequential([
    LSTM(50, return_sequences=True, input_shape=(60, 1)),
    Dropout(0.2),
    LSTM(50, return_sequences=False),
    Dropout(0.2),
    Dense(25),
    Dense(1)  # Output: predicted price
])

model.compile(optimizer='adam', loss='mean_squared_error')

# Train model
history = model.fit(
    X_train, y_train,
    batch_size=32,
    epochs=50,
    validation_data=(X_test, y_test),
    verbose=1
)

# Make predictions
predictions = model.predict(X_test)
predictions = scaler.inverse_transform(predictions)  # De-normalize

print(f"Predicted Price: ${predictions[-1][0]:.2f}")
                                    </pre>
                                </div>
                            </div>
                        </div>
                        
                        <div class="success-box">
                            <div class="box-header">
                                <i class="fas fa-trophy"></i>
                                <span>LSTM Best Practices</span>
                            </div>
                            <div class="box-content">
                                <ul class="styled-list">
                                    <li><strong>Sequence Length:</strong> Use 30-60 time steps (days) for stock prediction</li>
                                    <li><strong>Dropout:</strong> Add 0.2-0.3 dropout to prevent overfitting</li>
                                    <li><strong>Normalization:</strong> Always scale data to 0-1 range (MinMaxScaler)</li>
                                    <li><strong>Stationary Data:</strong> Use returns (% change) instead of raw prices</li>
                                    <li><strong>Multi-Feature:</strong> Combine price with volume, RSI, sentiment for better accuracy</li>
                                    <li><strong>Validation:</strong> Use walk-forward testing (not random split)</li>
                                </ul>
                            </div>
                        </div>
                        
                    </div>
                    
                    <!-- Section 4: Random Forest -->
                    <div class="content-section" id="random-forest">
                        <h2 class="section-header">
                            <i class="fas fa-tree"></i>
                            Random Forest for Stock Prediction
                        </h2>
                        
                        <p class="content-text">
                            <strong>Random Forest</strong> is an ensemble of decision trees. It's robust, handles non-linear relationships, and <strong>works well with tabular financial data</strong> (fundamentals, ratios, indicators).
                        </p>
                        
                        <!-- RANDOM FOREST ARCHITECTURE -->
                        <div class="neural-network-canvas" style="background: linear-gradient(135deg, #10b981 0%, #059669 100%);">
                            <canvas id="randomForestCanvas"></canvas>
                        </div>
                        
                        <div class="formula-block">
                            <div class="formula-title">Random Forest Algorithm</div>
                            <div class="formula-content">
                                Prediction = (1/N) Ã— Î£ Tree_i(X)
                            </div>
                            <dl class="formula-legend">
                                <dt>N:</dt>
                                <dd>Number of trees (typically 100-500)</dd>
                                <dt>Tree_i:</dt>
                                <dd>Individual decision tree trained on bootstrap sample</dd>
                                <dt>Aggregation:</dt>
                                <dd>Regression = Average | Classification = Majority Vote</dd>
                            </dl>
                        </div>
                        
                        <h3 class="subsection-header">How Random Forest Works</h3>
                        
                        <div class="info-box">
                            <div class="box-header">
                                <i class="fas fa-sitemap"></i>
                                <span>Decision Tree â†’ Random Forest</span>
                            </div>
                            <div class="box-content">
                                <p><strong>Step 1: Bootstrap Sampling</strong></p>
                                <p>Randomly sample training data with replacement (each tree gets unique dataset)</p>
                                <br>
                                <p><strong>Step 2: Random Feature Selection</strong></p>
                                <p>At each split, consider only âˆšn features (prevents correlation between trees)</p>
                                <br>
                                <p><strong>Step 3: Build Trees</strong></p>
                                <p>Grow deep decision trees without pruning</p>
                                <br>
                                <p><strong>Step 4: Aggregate Predictions</strong></p>
                                <p>Average all tree outputs (reduces variance, increases stability)</p>
                            </div>
                        </div>
                        
                        <!-- FEATURE IMPORTANCE VISUALIZATION -->
                        <div class="performance-chart-container">
                            <h3 class="chart-title"><i class="fas fa-star"></i> Feature Importance from Random Forest</h3>
                            <div class="feature-importance-viz">
                                <div class="feature-bar">
                                    <div class="feature-label">Sentiment Score</div>
                                    <div class="feature-bar-fill" style="width: 90%;">
                                        <span class="feature-value">0.28</span>
                                    </div>
                                </div>
                                <div class="feature-bar">
                                    <div class="feature-label">RSI (14-day)</div>
                                    <div class="feature-bar-fill" style="width: 68%;">
                                        <span class="feature-value">0.19</span>
                                    </div>
                                </div>
                                <div class="feature-bar">
                                    <div class="feature-label">Volume Ratio</div>
                                    <div class="feature-bar-fill" style="width: 54%;">
                                        <span class="feature-value">0.15</span>
                                    </div>
                                </div>
                                <div class="feature-bar">
                                    <div class="feature-label">ROE</div>
                                    <div class="feature-bar-fill" style="width: 43%;">
                                        <span class="feature-value">0.12</span>
                                    </div>
                                </div>
                                <div class="feature-bar">
                                    <div class="feature-label">MACD</div>
                                    <div class="feature-bar-fill" style="width: 36%;">
                                        <span class="feature-value">0.10</span>
                                    </div>
                                </div>
                                <div class="feature-bar">
                                    <div class="feature-label">P/E Ratio</div>
                                    <div class="feature-bar-fill" style="width: 29%;">
                                        <span class="feature-value">0.08</span>
                                    </div>
                                </div>
                                <div class="feature-bar">
                                    <div class="feature-label">Debt/Equity</div>
                                    <div class="feature-bar-fill" style="width: 22%;">
                                        <span class="feature-value">0.05</span>
                                    </div>
                                </div>
                                <div class="feature-bar">
                                    <div class="feature-label">Insider Buying</div>
                                    <div class="feature-bar-fill" style="width: 11%;">
                                        <span class="feature-value">0.03</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="example-card">
                            <div class="example-header">
                                <i class="fas fa-code"></i>
                                <span>Python Code: Random Forest Stock Classifier</span>
                            </div>
                            <div class="example-content">
                                <div class="code-block">
                                    <div class="code-header">
                                        <span class="code-lang">Python</span>
                                        <button class="copy-code-btn">Copy</button>
                                    </div>
                                    <pre class="code-content">
import pandas as pd
import numpy as np
from sklearn.ensemble import RandomForestClassifier
from sklearn.model_selection import train_test_split
from sklearn.metrics import classification_report, confusion_matrix

# Load data with features
df = pd.read_csv('stock_features.csv')

# Features
features = [
    'P/E', 'P/B', 'ROE', 'Debt/Equity',  # Fundamentals
    'RSI', 'MACD', 'Volume_Ratio',        # Technical
    'Sentiment_Score', 'Insider_Buy'      # Alternative
]

X = df[features]
y = df['Direction']  # 1 = Up, 0 = Down

# Split data
X_train, X_test, y_train, y_test = train_test_split(
    X, y, test_size=0.2, random_state=42
)

# Build Random Forest
rf_model = RandomForestClassifier(
    n_estimators=300,        # 300 trees
    max_depth=15,            # Prevent overfitting
    min_samples_split=20,
    min_samples_leaf=10,
    max_features='sqrt',     # âˆš9 â‰ˆ 3 features per split
    random_state=42
)

# Train model
rf_model.fit(X_train, y_train)

# Predictions
y_pred = rf_model.predict(X_test)
y_proba = rf_model.predict_proba(X_test)[:, 1]  # Probability of Up

# Evaluation
print(classification_report(y_test, y_pred))
print("\nConfusion Matrix:")
print(confusion_matrix(y_test, y_pred))

# Feature Importance
feature_importance = pd.DataFrame({
    'Feature': features,
    'Importance': rf_model.feature_importances_
}).sort_values('Importance', ascending=False)

print("\nTop 5 Features:")
print(feature_importance.head())
                                    </pre>
                                </div>
                            </div>
                        </div>
                        
                        <!-- CONFUSION MATRIX VISUALIZATION -->
                        <div class="performance-chart-container">
                            <h3 class="chart-title"><i class="fas fa-table"></i> Confusion Matrix: Model Performance</h3>
                            <div class="confusion-matrix">
                                <div class="confusion-cell"></div>
                                <div class="confusion-cell confusion-header">Predicted Down</div>
                                <div class="confusion-cell confusion-header">Predicted Up</div>
                                
                                <div class="confusion-cell confusion-header">Actual Down</div>
                                <div class="confusion-cell">
                                    <div class="confusion-value">892</div>
                                    <div class="confusion-label">True Negative</div>
                                </div>
                                <div class="confusion-cell">
                                    <div class="confusion-value" style="background: linear-gradient(135deg, #ef4444, #dc2626); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">147</div>
                                    <div class="confusion-label">False Positive</div>
                                </div>
                                
                                <div class="confusion-cell confusion-header">Actual Up</div>
                                <div class="confusion-cell">
                                    <div class="confusion-value" style="background: linear-gradient(135deg, #ef4444, #dc2626); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">123</div>
                                    <div class="confusion-label">False Negative</div>
                                </div>
                                <div class="confusion-cell">
                                    <div class="confusion-value">1,038</div>
                                    <div class="confusion-label">True Positive</div>
                                </div>
                            </div>
                            <p style="text-align: center; margin-top: 1.5rem; font-size: 0.95rem; color: #64748b;">
                                <strong>Accuracy:</strong> 87.7% | <strong>Precision:</strong> 87.6% | <strong>Recall:</strong> 89.4% | <strong>F1-Score:</strong> 88.5%
                            </p>
                        </div>
                        
                        <div class="data-table-wrapper">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Feature</th>
                                        <th>Importance</th>
                                        <th>Interpretation</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><strong>Sentiment_Score</strong></td>
                                        <td>0.28</td>
                                        <td>Most predictive (news/social sentiment)</td>
                                    </tr>
                                    <tr>
                                        <td><strong>RSI</strong></td>
                                        <td>0.19</td>
                                        <td>Momentum indicator critical</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Volume_Ratio</strong></td>
                                        <td>0.15</td>
                                        <td>Volume confirms price moves</td>
                                    </tr>
                                    <tr>
                                        <td><strong>ROE</strong></td>
                                        <td>0.12</td>
                                        <td>Fundamental quality matters</td>
                                    </tr>
                                    <tr>
                                        <td><strong>P/E</strong></td>
                                        <td>0.08</td>
                                        <td>Valuation less predictive short-term</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        
                    </div>
                    
                    <!-- Section 5: Gradient Boosting -->
                    <div class="content-section" id="gradient-boosting">
                        <h2 class="section-header">
                            <i class="fas fa-rocket"></i>
                            Gradient Boosting (XGBoost)
                        </h2>
                        
                        <p class="content-text">
                            <strong>XGBoost (Extreme Gradient Boosting)</strong> is the go-to algorithm for Kaggle competitions and quantitative finance. It builds trees sequentially, each correcting errors of the previous one.
                        </p>
                        
                        <!-- XGBOOST PERFORMANCE COMPARISON CHART -->
                        <div class="performance-chart-container">
                            <h3 class="chart-title"><i class="fas fa-trophy"></i> Model Accuracy Comparison: LSTM vs Random Forest vs XGBoost</h3>
                            <canvas id="modelComparisonChart"></canvas>
                        </div>
                        
                        <div class="formula-block">
                            <div class="formula-title">Gradient Boosting Framework</div>
                            <div class="formula-content">
                                F_M(x) = F_0(x) + Î£_{m=1}^M Î· Â· h_m(x)
                            </div>
                            <dl class="formula-legend">
                                <dt>F_0:</dt>
                                <dd>Initial prediction (e.g., mean of target)</dd>
                                <dt>h_m:</dt>
                                <dd>Weak learner (decision tree) at step m</dd>
                                <dt>Î· (eta):</dt>
                                <dd>Learning rate (0.01 - 0.3, lower = more robust)</dd>
                                <dt>M:</dt>
                                <dd>Number of boosting rounds (100-1000)</dd>
                            </dl>
                        </div>
                        
                        <div class="info-box">
                            <div class="box-header">
                                <i class="fas fa-chess"></i>
                                <span>Random Forest vs. XGBoost</span>
                            </div>
                            <div class="box-content">
                                <div class="data-table-wrapper" style="margin: 1rem 0;">
                                    <table class="data-table">
                                        <thead>
                                            <tr>
                                                <th>Aspect</th>
                                                <th>Random Forest</th>
                                                <th>XGBoost</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td><strong>Training</strong></td>
                                                <td>Parallel (all trees independent)</td>
                                                <td>Sequential (trees correct each other)</td>
                                            </tr>
                                            <tr>
                                                <td><strong>Speed</strong></td>
                                                <td>Fast</td>
                                                <td>Slower (but optimized)</td>
                                            </tr>
                                            <tr>
                                                <td><strong>Accuracy</strong></td>
                                                <td>Good</td>
                                                <td>Superior (usually 2-5% better)</td>
                                            </tr>
                                            <tr>
                                                <td><strong>Overfitting Risk</strong></td>
                                                <td>Low</td>
                                                <td>Higher (needs regularization)</td>
                                            </tr>
                                            <tr>
                                                <td><strong>Tuning Complexity</strong></td>
                                                <td>Simple (few hyperparameters)</td>
                                                <td>Complex (20+ parameters)</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                        
                        <div class="example-card">
                            <div class="example-header">
                                <i class="fas fa-code"></i>
                                <span>Python Code: XGBoost Stock Return Prediction</span>
                            </div>
                            <div class="example-content">
                                <div class="code-block">
                                    <div class="code-header">
                                        <span class="code-lang">Python</span>
                                        <button class="copy-code-btn">Copy</button>
                                    </div>
                                    <pre class="code-content">
import xgboost as xgb
from sklearn.model_selection import TimeSeriesSplit
from sklearn.metrics import mean_squared_error, r2_score
import numpy as np

# Load features and target
X = df[features]
y = df['Next_Day_Return']  # Continuous target (% return)

# Time-series cross-validation
tscv = TimeSeriesSplit(n_splits=5)

# XGBoost parameters
params = {
    'objective': 'reg:squarederror',  # Regression task
    'max_depth': 6,                   # Tree depth
    'learning_rate': 0.05,            # Eta (slower = better generalization)
    'n_estimators': 500,              # Number of trees
    'subsample': 0.8,                 # Row sampling (prevents overfitting)
    'colsample_bytree': 0.8,          # Column sampling
    'gamma': 1,                       # Minimum loss reduction
    'reg_alpha': 0.1,                 # L1 regularization
    'reg_lambda': 1,                  # L2 regularization
    'random_state': 42
}

# Train with early stopping
for train_idx, val_idx in tscv.split(X):
    X_train, X_val = X.iloc[train_idx], X.iloc[val_idx]
    y_train, y_val = y.iloc[train_idx], y.iloc[val_idx]
    
    model = xgb.XGBRegressor(**params)
    model.fit(
        X_train, y_train,
        eval_set=[(X_val, y_val)],
        early_stopping_rounds=50,
        verbose=False
    )
    
    # Predictions
    y_pred = model.predict(X_val)
    
    # Metrics
    rmse = np.sqrt(mean_squared_error(y_val, y_pred))
    r2 = r2_score(y_val, y_pred)
    
    print(f"Fold RMSE: {rmse:.4f} | RÂ²: {r2:.4f}")

# Feature importance
xgb.plot_importance(model, max_num_features=10)
                                    </pre>
                                </div>
                            </div>
                        </div>
                        
                        <div class="success-box">
                            <div class="box-header">
                                <i class="fas fa-cogs"></i>
                                <span>XGBoost Hyperparameter Tuning Guide</span>
                            </div>
                            <div class="box-content">
                                <p><strong>Start with these defaults, then tune:</strong></p>
                                <ul class="styled-list">
                                    <li><strong>max_depth:</strong> 3-8 (deeper = more complex, higher overfitting risk)</li>
                                    <li><strong>learning_rate:</strong> 0.01-0.1 (lower = more trees needed, but better accuracy)</li>
                                    <li><strong>n_estimators:</strong> 100-1000 (use early stopping to find optimal)</li>
                                    <li><strong>subsample:</strong> 0.6-0.9 (row sampling reduces overfitting)</li>
                                    <li><strong>colsample_bytree:</strong> 0.6-0.9 (column sampling)</li>
                                    <li><strong>gamma:</strong> 0-5 (minimum loss reduction for split)</li>
                                    <li><strong>reg_alpha, reg_lambda:</strong> 0.1-10 (L1/L2 regularization)</li>
                                </ul>
                            </div>
                        </div>
                        
                    </div>
                    
                    <!-- Section 6: Ensemble Methods -->
                    <div class="content-section" id="ensemble-methods">
                        <h2 class="section-header">
                            <i class="fas fa-layer-group"></i>
                            Ensemble Methods: The AlphaVault AI Approach
                        </h2>
                        
                        <p class="content-text">
                            <strong>Ensemble learning</strong> combines multiple models to achieve superior accuracy. AlphaVault AI uses a <strong>3-model ensemble</strong> (LSTM + Random Forest + XGBoost) to generate predictions.
                        </p>
                        
                        <!-- ENSEMBLE ARCHITECTURE VISUALIZATION -->
                        <div class="ensemble-architecture">
                            <div class="model-card">
                                <div class="model-icon">ðŸ§ </div>
                                <div class="model-name">LSTM Neural Network</div>
                                <div class="model-accuracy">68.5%</div>
                                <p style="font-size: 0.85rem; color: #64748b; margin-top: 0.5rem;">Captures temporal patterns</p>
                            </div>
                            <div class="model-card">
                                <div class="model-icon">ðŸŒ³</div>
                                <div class="model-name">Random Forest</div>
                                <div class="model-accuracy">72.3%</div>
                                <p style="font-size: 0.85rem; color: #64748b; margin-top: 0.5rem;">Feature interactions</p>
                            </div>
                            <div class="model-card">
                                <div class="model-icon">ðŸš€</div>
                                <div class="model-name">XGBoost</div>
                                <div class="model-accuracy">74.8%</div>
                                <p style="font-size: 0.85rem; color: #64748b; margin-top: 0.5rem;">Sequential optimization</p>
                            </div>
                        </div>
                        
                        <div style="text-align: center; margin: 2rem 0;">
                            <div style="font-size: 2.5rem; margin-bottom: 0.5rem;">â¬‡</div>
                            <div style="background: linear-gradient(135deg, #f093fb, #f5576c); color: white; padding: 1.5rem; border-radius: 16px; display: inline-block; box-shadow: 0 10px 40px rgba(240, 147, 251, 0.4);">
                                <div style="font-size: 1.1rem; font-weight: 700; margin-bottom: 0.5rem;">Weighted Ensemble</div>
                                <div style="font-size: 2.5rem; font-weight: 900;">78.9%</div>
                                <div style="font-size: 0.9rem; opacity: 0.9; margin-top: 0.5rem;">+4.1% improvement over best single model</div>
                            </div>
                        </div>
                        
                        <div class="formula-block">
                            <div class="formula-title">Weighted Ensemble Formula</div>
                            <div class="formula-content">
                                Final_Prediction = wâ‚ Ã— LSTM + wâ‚‚ Ã— RF + wâ‚ƒ Ã— XGBoost
                                <br><br>
                                where: wâ‚ + wâ‚‚ + wâ‚ƒ = 1
                            </div>
                            <dl class="formula-legend">
                                <dt>Weights (w):</dt>
                                <dd>Based on historical performance (e.g., 0.4, 0.3, 0.3)</dd>
                                <dt>Optimization:</dt>
                                <dd>Weights adjusted via validation set accuracy</dd>
                            </dl>
                        </div>
                        
                        <!-- ENSEMBLE PREDICTION CHART -->
                        <div class="performance-chart-container">
                            <h3 class="chart-title"><i class="fas fa-chart-area"></i> Ensemble Prediction vs Individual Models</h3>
                            <canvas id="ensemblePredictionChart"></canvas>
                        </div>
                        
                        <div class="example-card">
                            <div class="example-header">
                                <i class="fas fa-calculator"></i>
                                <span>Ensemble Example: Combining 3 Models</span>
                            </div>
                            <div class="example-content">
                                <p><strong>Scenario:</strong> Predicting AAPL stock direction (Up/Down)</p>
                                <div class="data-table-wrapper" style="margin: 1rem 0;">
                                    <table class="data-table">
                                        <thead>
                                            <tr>
                                                <th>Model</th>
                                                <th>P(Up)</th>
                                                <th>Weight</th>
                                                <th>Contribution</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td><strong>LSTM</strong></td>
                                                <td>0.68</td>
                                                <td>0.40</td>
                                                <td>0.272</td>
                                            </tr>
                                            <tr>
                                                <td><strong>Random Forest</strong></td>
                                                <td>0.75</td>
                                                <td>0.30</td>
                                                <td>0.225</td>
                                            </tr>
                                            <tr>
                                                <td><strong>XGBoost</strong></td>
                                                <td>0.71</td>
                                                <td>0.30</td>
                                                <td>0.213</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <div class="formula-content" style="margin: 1rem 0;">
                                    Ensemble P(Up) = 0.272 + 0.225 + 0.213 = <strong>0.71 (71%)</strong>
                                </div>
                                <p><strong>Decision:</strong> Strong buy signal (71% confidence of upward move)</p>
                            </div>
                        </div>
                        
                        <div class="success-box">
                            <div class="box-header">
                                <i class="fas fa-trophy"></i>
                                <span>Why Ensembles Outperform Single Models</span>
                            </div>
                            <div class="box-content">
                                <ul class="styled-list">
                                    <li><strong>Diversity:</strong> LSTM captures temporal patterns, RF/XGBoost capture feature interactions</li>
                                    <li><strong>Error Cancellation:</strong> Individual model errors average out</li>
                                    <li><strong>Robustness:</strong> Less sensitive to market regime changes</li>
                                    <li><strong>Reduced Variance:</strong> Smoother predictions, fewer false signals</li>
                                </ul>
                                <p><strong>Empirical Result:</strong> Ensemble improves accuracy by 5-8% vs. best single model</p>
                            </div>
                        </div>
                        
                    </div>
                    
                    <!-- Section 7: Feature Engineering -->
                    <div class="content-section" id="feature-engineering">
                        <h2 class="section-header">
                            <i class="fas fa-wrench"></i>
                            Feature Engineering: The Secret Sauce
                        </h2>
                        
                        <p class="content-text">
                            <strong>"Features matter more than algorithms"</strong> â€“ Andrew Ng. In finance ML, 80% of success comes from creating the right features.
                        </p>
                        
                        <h3 class="subsection-header">Types of Features</h3>
                        
                        <div class="data-table-wrapper">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Category</th>
                                        <th>Examples</th>
                                        <th>Purpose</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><strong>Price-based</strong></td>
                                        <td>Returns, volatility, high-low spread</td>
                                        <td>Capture price momentum & risk</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Technical Indicators</strong></td>
                                        <td>RSI, MACD, Bollinger Bands, ATR</td>
                                        <td>Identify overbought/oversold conditions</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Volume-based</strong></td>
                                        <td>Volume ratio, OBV, VWAP</td>
                                        <td>Confirm price moves with liquidity</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Fundamental</strong></td>
                                        <td>P/E, ROE, Debt/Equity, EPS growth</td>
                                        <td>Assess intrinsic value</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Sentiment</strong></td>
                                        <td>News sentiment, social media buzz</td>
                                        <td>Gauge market psychology</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Alternative Data</strong></td>
                                        <td>Insider trades, institutional flows, M&A filings</td>
                                        <td>Capture smart money activity</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        
                        <div class="example-card">
                            <div class="example-header">
                                <i class="fas fa-code"></i>
                                <span>Python Code: Advanced Feature Engineering</span>
                            </div>
                            <div class="example-content">
                                <div class="code-block">
                                    <div class="code-header">
                                        <span class="code-lang">Python</span>
                                        <button class="copy-code-btn">Copy</button>
                                    </div>
                                    <pre class="code-content">
import pandas as pd
import numpy as np
import ta  # Technical Analysis library

def engineer_features(df):
    """
    Create ML features from stock OHLCV data
    """
    
    # 1. PRICE-BASED FEATURES
    df['Return_1d'] = df['Close'].pct_change()
    df['Return_5d'] = df['Close'].pct_change(5)
    df['Return_20d'] = df['Close'].pct_change(20)
    df['Volatility_20d'] = df['Return_1d'].rolling(20).std()
    df['HL_Spread'] = (df['High'] - df['Low']) / df['Close']
    
    # 2. TECHNICAL INDICATORS
    df['RSI'] = ta.momentum.RSIIndicator(df['Close']).rsi()
    df['MACD'] = ta.trend.MACD(df['Close']).macd()
    df['MACD_Signal'] = ta.trend.MACD(df['Close']).macd_signal()
    df['BB_Upper'] = ta.volatility.BollingerBands(df['Close']).bollinger_hband()
    df['BB_Lower'] = ta.volatility.BollingerBands(df['Close']).bollinger_lband()
    df['ATR'] = ta.volatility.AverageTrueRange(df['High'], df['Low'], df['Close']).average_true_range()
    
    # 3. VOLUME FEATURES
    df['Volume_Ratio'] = df['Volume'] / df['Volume'].rolling(20).mean()
    df['OBV'] = ta.volume.OnBalanceVolumeIndicator(df['Close'], df['Volume']).on_balance_volume()
    
    # 4. MOVING AVERAGES
    df['SMA_20'] = df['Close'].rolling(20).mean()
    df['SMA_50'] = df['Close'].rolling(50).mean()
    df['EMA_12'] = df['Close'].ewm(span=12).mean()
    df['Price_to_SMA20'] = df['Close'] / df['SMA_20']
    
    # 5. MOMENTUM FEATURES
    df['Price_Momentum'] = df['Close'] - df['Close'].shift(10)
    df['Volume_Momentum'] = df['Volume'] - df['Volume'].shift(10)
    
    # 6. LAGGED FEATURES (past values as features)
    for lag in [1, 2, 3, 5, 10]:
        df[f'Close_Lag_{lag}'] = df['Close'].shift(lag)
        df[f'Volume_Lag_{lag}'] = df['Volume'].shift(lag)
    
    # 7. TARGET (Next day return)
    df['Target_Return'] = df['Close'].shift(-1) / df['Close'] - 1
    df['Target_Direction'] = (df['Target_Return'] > 0).astype(int)
    
    return df.dropna()

# Apply feature engineering
df_features = engineer_features(df)
print(f"Total Features Created: {len(df_features.columns)}")
                                    </pre>
                                </div>
                            </div>
                        </div>
                        
                        <div class="warning-box">
                            <div class="box-header">
                                <i class="fas fa-exclamation-triangle"></i>
                                <span>Feature Engineering Pitfalls</span>
                            </div>
                            <div class="box-content">
                                <ul class="styled-list">
                                    <li><strong>Look-Ahead Bias:</strong> Using future data (e.g., tomorrow's price) in features â†’ Unrealistic accuracy</li>
                                    <li><strong>Multicollinearity:</strong> Highly correlated features (e.g., RSI + Stochastic) â†’ Model instability</li>
                                    <li><strong>Too Many Features:</strong> 100+ features with 1000 samples â†’ Overfitting (curse of dimensionality)</li>
                                    <li><strong>Non-Stationarity:</strong> Using raw prices instead of returns â†’ Poor generalization</li>
                                </ul>
                                <p><strong>Solution:</strong> Feature selection (L1 regularization, RFE, feature importance)</p>
                            </div>
                        </div>
                        
                    </div>
                    
                    <!-- Section 8: Backtesting -->
                    <div class="content-section" id="backtesting">
                        <h2 class="section-header">
                            <i class="fas fa-history"></i>
                            Backtesting & Walk-Forward Validation
                        </h2>
                        
                        <p class="content-text">
                            <strong>Backtesting</strong> is the process of testing a trading strategy on historical data. However, <strong>90% of backtests are overly optimistic</strong> due to common mistakes.
                        </p>
                        
                        <!-- BACKTESTING PERFORMANCE CHART -->
                        <div class="performance-chart-container">
                            <h3 class="chart-title"><i class="fas fa-chart-line"></i> Walk-Forward Backtest Results: Cumulative Returns</h3>
                            <canvas id="backtestPerformanceChart"></canvas>
                        </div>
                        
                        <div class="warning-box">
                            <div class="box-header">
                                <i class="fas fa-skull-crossbones"></i>
                                <span>The Deadly Sins of Backtesting</span>
                            </div>
                            <div class="box-content">
                                <ol style="list-style: decimal; padding-left: 1.5rem; margin: 1rem 0;">
                                    <li><strong>Look-Ahead Bias:</strong> Using future data (e.g., end-of-day close at 9:30 AM)</li>
                                    <li><strong>Survivorship Bias:</strong> Backtesting only on stocks still trading (ignores bankruptcies)</li>
                                    <li><strong>Data Snooping:</strong> Testing 100 strategies, reporting only the best (p-hacking)</li>
                                    <li><strong>Overfitting:</strong> Tuning parameters until backtest is perfect (won't work live)</li>
                                    <li><strong>Ignoring Costs:</strong> Not accounting for commissions, slippage, spreads</li>
                                    <li><strong>Ignoring Market Impact:</strong> Assuming you can trade $100M without moving price</li>
                                </ol>
                            </div>
                        </div>
                        
                        <h3 class="subsection-header">Walk-Forward Validation (The Right Way)</h3>
                        
                        <div class="info-box">
                            <div class="box-header">
                                <i class="fas fa-forward"></i>
                                <span>Walk-Forward Testing Protocol</span>
                            </div>
                            <div class="box-content">
                                <p><strong>Step 1: Training Window</strong></p>
                                <p>Train model on data from Year 1-3 (e.g., 2018-2020)</p>
                                <br>
                                <p><strong>Step 2: Validation Window</strong></p>
                                <p>Test on Year 4 (2021) â†’ Record performance</p>
                                <br>
                                <p><strong>Step 3: Roll Forward</strong></p>
                                <p>Retrain on Year 2-4 (2019-2021), test on Year 5 (2022)</p>
                                <br>
                                <p><strong>Step 4: Repeat</strong></p>
                                <p>Continue rolling forward until present day</p>
                                <br>
                                <p><strong>Step 5: Aggregate Results</strong></p>
                                <p>Average all out-of-sample periods (realistic performance estimate)</p>
                            </div>
                        </div>
                        
                        <div class="example-card">
                            <div class="example-header">
                                <i class="fas fa-code"></i>
                                <span>Python Code: Walk-Forward Backtest</span>
                            </div>
                            <div class="example-content">
                                <div class="code-block">
                                    <div class="code-header">
                                        <span class="code-lang">Python</span>
                                        <button class="copy-code-btn">Copy</button>
                                    </div>
                                    <pre class="code-content">
import pandas as pd
from sklearn.ensemble import RandomForestClassifier

def walk_forward_backtest(df, features, target, train_periods=252, test_period=21):
    """
    Walk-forward validation for time series
    
    train_periods: Days in training window (252 = 1 year)
    test_period: Days in test window (21 = 1 month)
    """
    
    results = []
    
    for i in range(train_periods, len(df) - test_period, test_period):
        # Define windows
        train_start = i - train_periods
        train_end = i
        test_start = i
        test_end = i + test_period
        
        # Split data
        X_train = df[features].iloc[train_start:train_end]
        y_train = df[target].iloc[train_start:train_end]
        X_test = df[features].iloc[test_start:test_end]
        y_test = df[target].iloc[test_start:test_end]
        
        # Train model
        model = RandomForestClassifier(n_estimators=100, random_state=42)
        model.fit(X_train, y_train)
        
        # Predict
        y_pred = model.predict(X_test)
        
        # Calculate returns (assumes 1 = Buy, 0 = Sell)
        strategy_returns = df['Return_1d'].iloc[test_start:test_end] * y_pred
        
        # Store results
        results.append({
            'Period_Start': df.index[test_start],
            'Period_End': df.index[test_end-1],
            'Total_Return': strategy_returns.sum(),
            'Sharpe_Ratio': strategy_returns.mean() / strategy_returns.std() * np.sqrt(252),
            'Win_Rate': (y_pred == y_test).mean()
        })
    
    return pd.DataFrame(results)

# Run backtest
backtest_results = walk_forward_backtest(df, features, 'Target_Direction')

print(backtest_results)
print(f"\nAverage Sharpe Ratio: {backtest_results['Sharpe_Ratio'].mean():.2f}")
print(f"Average Win Rate: {backtest_results['Win_Rate'].mean():.2%}")
                                    </pre>
                                </div>
                            </div>
                        </div>
                        
                        <div class="success-box">
                            <div class="box-header">
                                <i class="fas fa-chart-line"></i>
                                <span>Performance Metrics That Matter</span>
                            </div>
                            <div class="box-content">
                                <div class="data-table-wrapper" style="margin: 1rem 0;">
                                    <table class="data-table">
                                        <thead>
                                            <tr>
                                                <th>Metric</th>
                                                <th>Formula</th>
                                                <th>Good Value</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td><strong>Sharpe Ratio</strong></td>
                                                <td>(Return - Risk-Free Rate) / Std Dev</td>
                                                <td>> 1.5 (excellent > 2.0)</td>
                                            </tr>
                                            <tr>
                                                <td><strong>Max Drawdown</strong></td>
                                                <td>Largest peak-to-trough decline</td>
                                                <td>< 20% (conservative)</td>
                                            </tr>
                                            <tr>
                                                <td><strong>Win Rate</strong></td>
                                                <td>% of profitable trades</td>
                                                <td>> 55% (ML strategies)</td>
                                            </tr>
                                            <tr>
                                                <td><strong>Profit Factor</strong></td>
                                                <td>Gross Profit / Gross Loss</td>
                                                <td>> 1.5</td>
                                            </tr>
                                            <tr>
                                                <td><strong>Calmar Ratio</strong></td>
                                                <td>Annual Return / Max Drawdown</td>
                                                <td>> 1.0</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                        
                    </div>
                    
                    <!-- Navigation -->
                    <div class="page-navigation">
                        <a href="resources-technical-analysis.html" class="nav-button prev">
                            <i class="fas fa-chevron-left"></i>
                            <span>Previous: Technical Analysis</span>
                        </a>
                        <a href="help.html" class="nav-button next">
                            <span>Back to Help Center</span>
                            <i class="fas fa-chevron-right"></i>
                        </a>
                    </div>
                    
                </div>
            </div>
            
        </main>
        
    </div>
    
    <!-- Scripts -->
    <script src="assets/js/common.js"></script>
    <script src="assets/js/sidebar.js"></script>
    <script src="assets/js/chatbot-particles.js"></script>
    
    <!-- User menu script -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const sidebarUserTrigger = document.getElementById('sidebarUserTrigger');
            const sidebarUserDropdown = document.getElementById('sidebarUserDropdown');
            
            if (sidebarUserTrigger && sidebarUserDropdown) {
                sidebarUserTrigger.addEventListener('click', (e) => {
                    e.stopPropagation();
                    sidebarUserTrigger.classList.toggle('active');
                    sidebarUserDropdown.classList.toggle('active');
                });
                
                document.addEventListener('click', (e) => {
                    if (!sidebarUserDropdown.contains(e.target) && 
                        !sidebarUserTrigger.contains(e.target)) {
                        sidebarUserTrigger.classList.remove('active');
                        sidebarUserDropdown.classList.remove('active');
                    }
                });
                
                sidebarUserDropdown.addEventListener('click', (e) => {
                    e.stopPropagation();
                });
            }
            
            // ===================================================
            // NEURAL NETWORK VISUALIZATIONS
            // ===================================================
            
            // 1. LSTM NETWORK VISUALIZATION
            const lstmCanvas = document.getElementById('lstmCanvas');
            if (lstmCanvas) {
                const ctx = lstmCanvas.getContext('2d');
                lstmCanvas.width = lstmCanvas.offsetWidth;
                lstmCanvas.height = lstmCanvas.offsetHeight;
                
                // Animation variables
                let animationFrame = 0;
                
                function drawLSTMNetwork() {
                    ctx.clearRect(0, 0, lstmCanvas.width, lstmCanvas.height);
                    
                    const layers = {
                        input: { x: 100, y: lstmCanvas.height / 2, neurons: 5 },
                        lstm1: { x: 300, y: lstmCanvas.height / 2, neurons: 8 },
                        lstm2: { x: 500, y: lstmCanvas.height / 2, neurons: 6 },
                        dense: { x: 700, y: lstmCanvas.height / 2, neurons: 4 },
                        output: { x: 900, y: lstmCanvas.height / 2, neurons: 1 }
                    };
                    
                    // Draw connections
                    Object.keys(layers).forEach((key, index) => {
                        if (index < Object.keys(layers).length - 1) {
                            const currentLayer = layers[key];
                            const nextLayer = layers[Object.keys(layers)[index + 1]];
                            
                            for (let i = 0; i < currentLayer.neurons; i++) {
                                for (let j = 0; j < nextLayer.neurons; j++) {
                                    const startY = currentLayer.y - (currentLayer.neurons - 1) * 25 + i * 50;
                                    const endY = nextLayer.y - (nextLayer.neurons - 1) * 25 + j * 50;
                                    
                                    const pulse = Math.sin(animationFrame * 0.05 + i + j) * 0.3 + 0.7;
                                    
                                    ctx.strokeStyle = `rgba(255, 255, 255, ${0.15 * pulse})`;
                                    ctx.lineWidth = 1.5;
                                    ctx.beginPath();
                                    ctx.moveTo(currentLayer.x, startY);
                                    ctx.lineTo(nextLayer.x, endY);
                                    ctx.stroke();
                                }
                            }
                        }
                    });
                    
                    // Draw neurons
                    Object.entries(layers).forEach(([key, layer]) => {
                        for (let i = 0; i < layer.neurons; i++) {
                            const y = layer.y - (layer.neurons - 1) * 25 + i * 50;
                            const pulse = Math.sin(animationFrame * 0.05 + i) * 5 + 20;
                            
                            // Neuron glow
                            const gradient = ctx.createRadialGradient(layer.x, y, 0, layer.x, y, pulse + 15);
                            gradient.addColorStop(0, 'rgba(255, 255, 255, 0.8)');
                            gradient.addColorStop(1, 'rgba(255, 255, 255, 0)');
                            
                            ctx.fillStyle = gradient;
                            ctx.beginPath();
                            ctx.arc(layer.x, y, pulse + 15, 0, Math.PI * 2);
                            ctx.fill();
                            
                            // Neuron core
                            ctx.fillStyle = 'white';
                            ctx.beginPath();
                            ctx.arc(layer.x, y, pulse, 0, Math.PI * 2);
                            ctx.fill();
                        }
                    });
                    
                    // Draw labels
                    ctx.fillStyle = 'white';
                    ctx.font = 'bold 14px Inter, sans-serif';
                    ctx.textAlign = 'center';
                    
                    ctx.fillText('Input Layer', layers.input.x, 30);
                    ctx.fillText('(Price, Volume, RSI)', layers.input.x, 50);
                    
                    ctx.fillText('LSTM Layer 1', layers.lstm1.x, 30);
                    ctx.fillText('(50 units)', layers.lstm1.x, 50);
                    
                    ctx.fillText('LSTM Layer 2', layers.lstm2.x, 30);
                    ctx.fillText('(50 units)', layers.lstm2.x, 50);
                    
                    ctx.fillText('Dense Layer', layers.dense.x, 30);
                    ctx.fillText('(25 units)', layers.dense.x, 50);
                    
                    ctx.fillText('Output', layers.output.x, 30);
                    ctx.fillText('(Prediction)', layers.output.x, 50);
                    
                    animationFrame++;
                    requestAnimationFrame(drawLSTMNetwork);
                }
                
                drawLSTMNetwork();
            }
            
            // 2. RANDOM FOREST VISUALIZATION
            const rfCanvas = document.getElementById('randomForestCanvas');
            if (rfCanvas) {
                const ctx = rfCanvas.getContext('2d');
                rfCanvas.width = rfCanvas.offsetWidth;
                rfCanvas.height = rfCanvas.offsetHeight;
                
                let animationFrame = 0;
                
                function drawRandomForest() {
                    ctx.clearRect(0, 0, rfCanvas.width, rfCanvas.height);
                    
                    const numTrees = 7;
                    const treeWidth = rfCanvas.width / numTrees;
                    
                    for (let i = 0; i < numTrees; i++) {
                        const x = treeWidth * i + treeWidth / 2;
                        const y = rfCanvas.height - 50;
                        
                        drawTree(ctx, x, y, 5, Math.PI / 2, 100, i);
                    }
                    
                    // Draw title
                    ctx.fillStyle = 'white';
                    ctx.font = 'bold 20px Inter, sans-serif';
                    ctx.textAlign = 'center';
                    ctx.fillText('Random Forest: 300 Decision Trees', rfCanvas.width / 2, 40);
                    
                    ctx.font = '14px Inter, sans-serif';
                    ctx.fillText('Each tree votes on the final prediction (ensemble averaging)', rfCanvas.width / 2, 65);
                    
                    animationFrame++;
                    requestAnimationFrame(drawRandomForest);
                }
                
                function drawTree(ctx, x, y, depth, angle, length, treeIndex) {
                    if (depth === 0) return;
                    
                    const pulse = Math.sin(animationFrame * 0.03 + treeIndex) * 0.2 + 0.8;
                    
                    const x2 = x + Math.cos(angle) * length * pulse;
                    const y2 = y - Math.sin(angle) * length * pulse;
                    
                    ctx.strokeStyle = `rgba(255, 255, 255, ${depth / 5})`;
                    ctx.lineWidth = depth * 1.5;
                    ctx.beginPath();
                    ctx.moveTo(x, y);
                    ctx.lineTo(x2, y2);
                    ctx.stroke();
                    
                    // Draw branches
                    drawTree(ctx, x2, y2, depth - 1, angle - Math.PI / 6, length * 0.7, treeIndex);
                    drawTree(ctx, x2, y2, depth - 1, angle + Math.PI / 6, length * 0.7, treeIndex);
                    
                    // Draw leaf nodes (predictions)
                    if (depth === 1) {
                        const gradient = ctx.createRadialGradient(x2, y2, 0, x2, y2, 8);
                        gradient.addColorStop(0, 'rgba(16, 185, 129, 1)');
                        gradient.addColorStop(1, 'rgba(16, 185, 129, 0.3)');
                        
                        ctx.fillStyle = gradient;
                        ctx.beginPath();
                        ctx.arc(x2, y2, 6, 0, Math.PI * 2);
                        ctx.fill();
                    }
                }
                
                drawRandomForest();
            }
            
            // ===================================================
            // CHART.JS VISUALIZATIONS
            // ===================================================
            
            // 1. LSTM TRAINING PROGRESS CHART
            const lstmTrainingChart = document.getElementById('lstmTrainingChart');
            if (lstmTrainingChart) {
                new Chart(lstmTrainingChart, {
                    type: 'line',
                    data: {
                        labels: Array.from({ length: 50 }, (_, i) => i + 1),
                        datasets: [{
                            label: 'Training Loss',
                            data: Array.from({ length: 50 }, (_, i) => 0.8 * Math.exp(-i / 15) + 0.05),
                            borderColor: '#667eea',
                            backgroundColor: 'rgba(102, 126, 234, 0.1)',
                            borderWidth: 3,
                            fill: true,
                            tension: 0.4
                        }, {
                            label: 'Validation Loss',
                            data: Array.from({ length: 50 }, (_, i) => 0.85 * Math.exp(-i / 18) + 0.08),
                            borderColor: '#f093fb',
                            backgroundColor: 'rgba(240, 147, 251, 0.1)',
                            borderWidth: 3,
                            fill: true,
                            tension: 0.4
                        }]
                    },
                    options: {
                        responsive: true,
                        plugins: {
                            legend: { display: true, position: 'top' },
                            title: { display: false }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                title: { display: true, text: 'Mean Squared Error (Loss)' }
                            },
                            x: {
                                title: { display: true, text: 'Epoch' }
                            }
                        }
                    }
                });
            }
            
            // 2. MODEL COMPARISON CHART
            const modelComparisonChart = document.getElementById('modelComparisonChart');
            if (modelComparisonChart) {
                new Chart(modelComparisonChart, {
                    type: 'bar',
                    data: {
                        labels: ['LSTM', 'Random Forest', 'XGBoost', 'Ensemble'],
                        datasets: [{
                            label: 'Accuracy (%)',
                            data: [68.5, 72.3, 74.8, 78.9],
                            backgroundColor: [
                                'rgba(102, 126, 234, 0.8)',
                                'rgba(16, 185, 129, 0.8)',
                                'rgba(245, 87, 108, 0.8)',
                                'rgba(139, 92, 246, 0.8)'
                            ],
                            borderColor: [
                                '#667eea',
                                '#10b981',
                                '#f5576c',
                                '#8b5cf6'
                            ],
                            borderWidth: 2
                        }]
                    },
                    options: {
                        responsive: true,
                        plugins: {
                            legend: { display: false },
                            title: { display: false }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                max: 100,
                                title: { display: true, text: 'Accuracy (%)' }
                            }
                        }
                    }
                });
            }
            
            // 3. ENSEMBLE PREDICTION CHART
            const ensemblePredictionChart = document.getElementById('ensemblePredictionChart');
            if (ensemblePredictionChart) {
                const days = Array.from({ length: 30 }, (_, i) => `Day ${i + 1}`);
                const actualPrices = Array.from({ length: 30 }, (_, i) => 100 + Math.sin(i / 3) * 15 + Math.random() * 5);
                
                new Chart(ensemblePredictionChart, {
                    type: 'line',
                    data: {
                        labels: days,
                        datasets: [{
                            label: 'Actual Price',
                            data: actualPrices,
                            borderColor: '#1e293b',
                            backgroundColor: 'rgba(30, 41, 59, 0.1)',
                            borderWidth: 3,
                            pointRadius: 4,
                            pointBackgroundColor: '#1e293b'
                        }, {
                            label: 'LSTM Prediction',
                            data: actualPrices.map(p => p + (Math.random() - 0.5) * 8),
                            borderColor: '#667eea',
                            borderWidth: 2,
                            borderDash: [5, 5],
                            pointRadius: 2
                        }, {
                            label: 'Random Forest Prediction',
                            data: actualPrices.map(p => p + (Math.random() - 0.5) * 6),
                            borderColor: '#10b981',
                            borderWidth: 2,
                            borderDash: [5, 5],
                            pointRadius: 2
                        }, {
                            label: 'XGBoost Prediction',
                            data: actualPrices.map(p => p + (Math.random() - 0.5) * 7),
                            borderColor: '#f5576c',
                            borderWidth: 2,
                            borderDash: [5, 5],
                            pointRadius: 2
                        }, {
                            label: 'Ensemble Prediction',
                            data: actualPrices.map(p => p + (Math.random() - 0.5) * 3),
                            borderColor: '#8b5cf6',
                            backgroundColor: 'rgba(139, 92, 246, 0.1)',
                            borderWidth: 3,
                            fill: true,
                            pointRadius: 3,
                            pointBackgroundColor: '#8b5cf6'
                        }]
                    },
                    options: {
                        responsive: true,
                        plugins: {
                            legend: { display: true, position: 'top' }
                        },
                        scales: {
                            y: {
                                title: { display: true, text: 'Stock Price ($)' }
                            }
                        }
                    }
                });
            }
            
            // 4. BACKTEST PERFORMANCE CHART
            const backtestChart = document.getElementById('backtestPerformanceChart');
            if (backtestChart) {
                const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
                let strategyReturn = 10000;
                let benchmarkReturn = 10000;
                const strategyData = [];
                const benchmarkData = [];
                
                for (let i = 0; i < 12; i++) {
                    strategyReturn *= (1 + (Math.random() * 0.05 + 0.02));
                    benchmarkReturn *= (1 + (Math.random() * 0.03 + 0.005));
                    strategyData.push(strategyReturn);
                    benchmarkData.push(benchmarkReturn);
                }
                
                new Chart(backtestChart, {
                    type: 'line',
                    data: {
                        labels: months,
                        datasets: [{
                            label: 'ML Strategy',
                            data: strategyData,
                            borderColor: '#10b981',
                            backgroundColor: 'rgba(16, 185, 129, 0.1)',
                            borderWidth: 3,
                            fill: true,
                            tension: 0.4
                        }, {
                            label: 'S&P 500 Benchmark',
                            data: benchmarkData,
                            borderColor: '#64748b',
                            backgroundColor: 'rgba(100, 116, 139, 0.1)',
                            borderWidth: 3,
                            fill: true,
                            tension: 0.4
                        }]
                    },
                    options: {
                        responsive: true,
                        plugins: {
                            legend: { display: true, position: 'top' },
                            title: { display: false }
                        },
                        scales: {
                            y: {
                                title: { display: true, text: 'Portfolio Value ($)' },
                                ticks: {
                                    callback: function(value) {
                                        return '$' + value.toLocaleString();
                                    }
                                }
                            },
                            x: {
                                title: { display: true, text: 'Month' }
                            }
                        }
                    }
                });
            }
        });
    </script>

    <!-- Admin Visibility (affiche le menu admin uniquement pour raphnardone@gmail.com) -->
    <script src="assets/js/admin-visibility.js"></script>
    
</body>
</html>